<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-C语言指针讲解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88%E8%AE%B2%E8%A7%A3/" class="article-date">
  <time datetime="2022-11-13T06:48:18.135Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        </font>

<p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">


<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>指针，是C语言中的一个重要概念及其特点，也是掌握C语言比较困难的部分。作为一个C语言初学者，我对指针也有了一定的了解，正好这几天在做一个C语言指针的知识点汇总，于是就有了这篇文章，向大家分享一些我的见解，与大家一起共勉。</p>
<h1 id="为什么要学习指针"><a href="#为什么要学习指针" class="headerlink" title="为什么要学习指针"></a>为什么要学习指针</h1><ol>
<li>如果你想通过函数改变一个变量的值，就得用指针而不能用值传递，很多时候不同的函数存在很多不同的变量，当程序的数据量十分庞大的时候，我们就需要用指针来作为形参，通过传递地址，达到传递变量的目的。</li>
<li>指针变量是用来存放内存地址的变量，在同一CPU构架下，不同类型的指针变量所占用的存储单元长度是相同的，而存放数据的变量因数据的类型不同，所占用的存储空间长度也不同。有了指针以后，不仅可以对数据本身，也可以对存储数据的变量地址进行操作。</li>
<li>同样，指针也使得一些复杂的内容变得简单，例如：链表等等；也有一些操作它必须使用指针，例如：申请内存等等。<h1 id="什么是指针"><a href="#什么是指针" class="headerlink" title="什么是指针"></a>什么是指针</h1>在计算机中，每一个数据都是存放在储存器中的，而不同的数据类型所占的内存空间不同（例如：int类型占用4个字节，double类型占用8个字节等等），内存空间又是以字节为单位的，每一个字节又对应了一个编号，这个编号我们称为这一个内存单元的地址。</li>
</ol>
<p>而系统在内存中又为变量分配了存储空间的首个字节单元的地址即变量的地址。为了方便用户对存储空间进行正确的访问，指针便应运而生了。</p>
<p>指针相对于一个内存单元来说，指的是单元的地址，该单元的内容里面存放的是数据。在 C 语言中，允许用指针变量来存放指针，因此，一个指针变量的值就是某个内存单元的地址或称为某内存单元的指针。</p>
<p>指针变量是存放一个内存地址的变量，不同于其他类型变量，它是专门用来存放内存地址的，也称为地址变量。定义指针变量的一般形式为：类型说明符*变量名。</p>
<h1 id="指针详解"><a href="#指针详解" class="headerlink" title="指针详解"></a>指针详解</h1><h2 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h2><p>在C语言中，定义变量时，如果在变量名前加上一个 “ * ”，那么这个变量就变成了对应变量类型的指针变量。</p>
<h3 id="1、取地址"><a href="#1、取地址" class="headerlink" title="1、取地址"></a>1、取地址</h3><p>对于一个指针变量，我们需要让它来保存其他变量的地址的时候，就需要用 到 &amp;运算符。<br>下面举个例子：</p>
<p><strong>例1</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">10</span>;<span class="comment">//在内存中开辟一块空间</span></span><br><span class="line">	<span class="keyword">int</span>* p = &amp;num;<span class="comment">//这里我们对变量num取地址，使用了&amp;运算符</span></span><br><span class="line">				  <span class="comment">//将num的地址存放在p变量中，p就是一个指针变量。</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&amp;num就取得了num的地址，指针p指向的num的地址，就形成了一个简单的指针变量。</p>
<p>但是对于某些特殊情况，我们可以不需要用&amp;运算符，例如：数组，函数等等，我们后边会讲到。</p>
<h3 id="2、解引用"><a href="#2、解引用" class="headerlink" title="2、解引用"></a>2、解引用</h3><p>上面我们了解了如何取得一个数据的地址，那么接下来我们可以尝试运用指针来解地址，从而得到这个变量的内存数据。</p>
<p>在指针前加一个“ * “即解引用地址，也就是从指针指向的内存中，取出这段内存地址对应的数据。</p>
<p>输出例1中的指针p：</p>
<p><strong>例2</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* p = &amp;num;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, *p);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果为：10</p>
<h3 id="3、指针变量"><a href="#3、指针变量" class="headerlink" title="3、指针变量"></a>3、指针变量</h3><p>指针就是一个变量，用来存放地址的变量。（存放在指针中的值，均会被看作地址）</p>
<p><strong>一个小的单元会有多大：</strong>（一个字节）<br><strong>那么地址是如何编写的呢？</strong></p>
<p>目前经过仔细的技术及思考后，最合适的结论为：一个字节对应了一个地址。</p>
<p>对于32位机器，可以看作有32根地址线，每一根地址线在寻址的时候都会产生一个电信号（正电1/负电0），所以它的地址从000……000（32个0）到111……111（32个1）共有2的32次方个地址。</p>
<p>在32位机器上，地址是32个0或1组成的二进制序列，一个地址需要用4个字节的空间来存储，所以一个指针变量的大小就是4个字节。</p>
<p>同样，可以类比推理得到：64位机器有2的64次方个地址，一个指针变量的大小位8个字节。</p>
<p>我们来做一个练习：</p>
<p><strong>例3</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span>*));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">short</span>*));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">double</span>*));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>4<br>4<br>4<br>4</p>
<p><strong>总结</strong><br>（1）指针是一个变量，它存放的是地址。<br>（2）指针在32位机器中占4个字节，在64位机器中占8个字节，与类型无关。</p>
<h2 id="二、指针与指针类型"><a href="#二、指针与指针类型" class="headerlink" title="二、指针与指针类型"></a>二、指针与指针类型</h2><h3 id="1、指针类型"><a href="#1、指针类型" class="headerlink" title="1、指针类型"></a>1、指针类型</h3><p>我们前边提到，指针的定义方式是：type + * ：<br>char* 类型的指针是为了存放char类型变量的地址；<br>int* 类型的指针是为了存放int类型变量的地址；<br>short* 类型的指针是为了存放short类型变量的地址；<br>double* 类型的指针是为了存放double类型变量的地址。</p>
<p><strong>指针的类型决定了指针向前或者向后的空间有多大。</strong></p>
<p>指针类型决定了指针进行解引用操作的时候，能够访问空间的大小：<br>（1） int* p：* p能够访问4个字节。<br>（2）char* p：* p能够访问1个字节。<br>（3）double* p： *p能够访问8个字节。</p>
<p><strong>指针类型的意义</strong></p>
<p>先来看一个例子：</p>
<p><strong>例4</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">char</span>* p1 = (<span class="keyword">char</span>*)&amp;a;</span><br><span class="line">	<span class="keyword">int</span>* p2 = &amp;a;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p1+<span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p2+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出的结果为：<br>003CFC80<br>003CFC80<br>003CFC81<br>003CFC80<br>003CFC84</p>
<p>我们可以看到不同类型的指针p1和p2都指向了变量a的地址，但是p1+1指向的是003CFC81，而p2+1指向了003CFC84。一个地址向后移动了1，一个地址向后移动了4。</p>
<p>这是因为：指针的类型决定了指针向前或者向后移动一步有多大的距离。</p>
<h3 id="2、野指针"><a href="#2、野指针" class="headerlink" title="2、野指针"></a>2、野指针</h3><p>（1）概念：<br>野指针就是指针指向的位置是不可知的（随机的、不正确的、没有明确限制的）。</p>
<p>（2）成因：<br>①指针未初始化<br><strong>例5</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p;<span class="comment">//局部变量指针未初始化，默认未随机值。</span></span><br><span class="line">	*p = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②指针越界访问<br><strong>例6</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span>* p = arr;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= <span class="number">11</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//当指针指向的范围超出数组arr的范围时，p就是野指针</span></span><br><span class="line">		*(p++) = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>③指针指向的空间释放<br><strong>例7</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;a);</span><br><span class="line">	<span class="keyword">return</span> &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p = func();</span><br><span class="line">	<span class="comment">//返回的地址是跟a的地址一致 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p);</span><br><span class="line">	<span class="comment">//但指针对应的值却不是变量a原来的值了 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *p);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0093F7F4<br>0093F7F4<br>10361167</p>
<p>这里的func函数虽然确实返回了地址，而p也确实接受到了返回的地址，但是当返回的时候，已经来不及保存了，因为func函数一结束，函数申请的内存等等就返回给操作系统了，已经无法再通过指针p去访问a的地址了，后边再用*p=20去访问的是已经被释放的a的地址。</p>
<p>（3）如何避免野指针<br>①指针初始化<br><strong>例8</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* p1 = &amp;a;</span><br><span class="line">	<span class="keyword">int</span>* p2 = <span class="literal">NULL</span>;<span class="comment">//NULL:用来初始化指针的，给指针赋值。</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>②小心指针越界<br>③指针指向空间释放即设置NULL<br>④指针使用之前检查有效性<br><strong>例9</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	p = &amp;a;</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		*p = <span class="number">20</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、指针运算"><a href="#3、指针运算" class="headerlink" title="3、指针运算"></a>3、指针运算</h3><p>（1）指针+-整数</p>
<p><strong>例10</strong>：输出数组的每一个元素</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">	<span class="keyword">int</span>* p = arr;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1 2 3 4 5 6 7 8 9 10</p>
<p>（2）指针-指针<br>指针-指针得到的是中间的元素个数。（注意尽量大-小）</p>
<p><strong>易错点提示：两个指针不能进行加法运算，这是非法的！！！两个指针在进行减法运算时，类型要相同，否则结果不可预知！！！</strong></p>
<p><strong>例11</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span>* p1 = &amp;arr[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">int</span>* p2 = &amp;arr[<span class="number">9</span>];</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *p2 - *p1);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：9</p>
<p>我们在之前学过了用递归和迭代两种方法来实现strlen函数，那么今天我们就学会了第三种方法——指针相减法：</p>
<p><strong>例12</strong>：自己的strlen函数（指针相减法）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">my_strlen</span><span class="params">(<span class="keyword">char</span>* str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* ret = str;</span><br><span class="line">	<span class="keyword">while</span> (*str != <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		str++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> str - ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> arr[] = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">	<span class="keyword">int</span> len = my_strlen(arr);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, len);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）指针的关系运算——“&lt;”      “&gt;”     “&lt;=”        “&gt;=”        “==”        “!=”<br>指针进行关系运算的前提是它们都指向同一个数组中的元素。</p>
<p><strong>易错点提示：指针的关系运算是相同类型的指针之间的关系运算，不同类型的指针之间的关系运算没有意义，指针与非0整数的关系运算也没有意义。</strong><br><strong>例13</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span>* p = &amp;arr[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">int</span>* q = &amp;arr[<span class="number">9</span>];</span><br><span class="line">	p &lt; q; <span class="comment">//当p所指的元素在q所指的元素之前时，表达式的值为1；反之为0。</span></span><br><span class="line">	p &gt; q; <span class="comment">//当p所指的元素在q所指的元素之后时，表达式的值为1；反之为0。</span></span><br><span class="line">	p == q; <span class="comment">//当p和q指向同一元素时，表达式的值为1；反之为0。</span></span><br><span class="line">	p != q; <span class="comment">//当p和q不指向同一元素时，表达式的值为1；反之为0。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, p &lt; q, p &gt; q, p == q, p != q);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1 0 0 1</p>
<h3 id="4、二级指针"><a href="#4、二级指针" class="headerlink" title="4、二级指针"></a>4、二级指针</h3><p><strong>例14</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* p1 = &amp;a;</span><br><span class="line">	<span class="keyword">int</span>** p2 = &amp;p1;<span class="comment">//p2就是二级指针。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, **p2);</span><br><span class="line">	</span><br><span class="line">	**p2 = <span class="number">20</span>;<span class="comment">//二级指针p2改变，其指向的a随之改变。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, **p2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>10<br>20<br>20</p>
<h2 id="三、指针的分类"><a href="#三、指针的分类" class="headerlink" title="三、指针的分类"></a>三、指针的分类</h2><h3 id="1、字符指针"><a href="#1、字符指针" class="headerlink" title="1、字符指针"></a>1、字符指针</h3><p>指向字符型数据的指针变量。每个字符串在内存中都占用一段连续的存储空间，并有唯一确定的首地址。即将字符串的首地址赋值给字符指针，可让字符指针指向一个字符串。</p>
<p>下面举一个例子：<br><strong>例15</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> arr[] = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span>* p1 = arr;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, p1);</span><br><span class="line">    <span class="comment">//这里的字符指针p1指向的是arr[]中首位的地址，所以在打印时不用解引用，它表示的是从arr[]的首位开始打印至&quot;\0&quot;停止。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span>* p2 = <span class="string">&quot;abcdef&quot;</span>;<span class="comment">//&quot;abcdef&quot;是一个常量字符串。</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *p);<span class="comment">//说明p存的只是首元素a的地址。</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, p);<span class="comment">//同上</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>abcdef<br>abcdef<br>a<br>abcdef</p>
<p><strong>易错点提示：在常量字符串前加一个“const”。</strong></p>
<p><strong>例16</strong>：常量字符串</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* p = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="comment">//*p = &#x27;w&#x27;;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：abcdef</p>
<p>有了const以后，我们就不能对指针p进行赋值修改了，这样可以使其更加安全的储存数据。</p>
<p><strong>例17</strong>：经典易错题</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> arr1[] = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> arr2[] = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span>* p1 = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span>* p2 = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (arr1 == arr2)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (p1 == p2)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0<br>1<br>这是因为arr1和arr2是分别开辟的内存，虽然元素相同，但所处内存空间不同，所以arr1 ！= arr2；但是字符指针p1和p2都指向了字符串”abcdef”，指向相同，所以p1 == p2。</p>
<h3 id="2、指针和数组"><a href="#2、指针和数组" class="headerlink" title="2、指针和数组"></a>2、指针和数组</h3><h4 id="（1）数组名"><a href="#（1）数组名" class="headerlink" title="（1）数组名"></a>（1）数组名</h4><p><strong>数组名表示的是数组首元素的地址</strong>。</p>
<p><strong>例18</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, arr);<span class="comment">//arr:首元素的地址。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, arr + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;arr[<span class="number">0</span>]);<span class="comment">//&amp;arr[i]:数组中对应元素的地址。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;arr[<span class="number">0</span>] + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;arr);<span class="comment">//&amp;arr:整个数组的地址。</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;arr + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1. &amp;arr — &amp;数组名:数组名不是首元素地址，数组名表示整个数组，&amp;数组名-取出的是整个数组的地址。</span></span><br><span class="line">	<span class="comment">//2.sizeof（arr） — sizeof（数组名）：数组名表示的整个数组，sizeof（数组名）计算的是整个数组的大小。</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>00B3F828<br>00B3F82C<br>00B3F828<br>00B3F82C<br>00B3F828<br>00B3F850</p>
<p>也就是说，对于上述代码，arr与&amp;arr[0]通过加1运算后发现地址加了4，而&amp;arr通过加1运算后发现地址加了40，从而说明了&amp;arr表示的是整个数组的地址。</p>
<h4 id="（2）指针数组"><a href="#（2）指针数组" class="headerlink" title="（2）指针数组"></a>（2）指针数组</h4><p>概念：数组元素全为指针变量的数组称为指针数组。<br>也就是<strong>指针数组是一个数组</strong>，用来存放指针的数组。<br>如：*p[10]是一个指针数组。</p>
<p>举一个例子：<br><strong>例19</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr1[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> arr2[] = &#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> arr3[] = &#123; <span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* arr[] = &#123; arr1,arr2,arr3 &#125;;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//分别遍历出arr1，arr2，arr3。</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//分别遍历出arr1,arr2,arr3中的每个元素。</span></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(arr[i] + j));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>1 2 3 4 5<br>2 3 4 5 6<br>3 4 5 6 7</p>
<h4 id="（3）数组指针"><a href="#（3）数组指针" class="headerlink" title="（3）数组指针"></a>（3）数组指针</h4><p>概念：指的是数组名的指针，即数组首元素地址的指针。<br>也就是<strong>数组指针是一个指针</strong>，指向数组的指针。<br>如：(*p)[10]是一个数组指针。</p>
<p>举一个例子：<br><strong>例20</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print1</span><span class="params">(<span class="keyword">int</span> arr[<span class="number">3</span>][<span class="number">5</span>], <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span><span class="comment">//二维数组打印。</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; x; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; y; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print2</span><span class="params">(<span class="keyword">int</span> (*p)[<span class="number">5</span>], <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span><span class="comment">//数组指针打印</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; x; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; y; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(*(p+i)+j));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>][<span class="number">5</span>] = &#123; &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span> &#125;,&#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;,&#123; <span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span> &#125; &#125;;</span><br><span class="line">    </span><br><span class="line">    print1(arr, <span class="number">3</span>, <span class="number">5</span>);<span class="comment">//参数是数组的形式。</span></span><br><span class="line">    print2(arr, <span class="number">3</span>, <span class="number">5</span>);<span class="comment">//参数是指针的形式。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>1 2 3 4 5<br>2 3 4 5 6<br>3 4 5 6 7<br>1 2 3 4 5<br>2 3 4 5 6<br>3 4 5 6 7</p>
<h3 id="3、指针和函数"><a href="#3、指针和函数" class="headerlink" title="3、指针和函数"></a>3、指针和函数</h3><h4 id="（1）指针传参"><a href="#（1）指针传参" class="headerlink" title="（1）指针传参"></a>（1）指针传参</h4><p>对于普通的参数传递，我们传入的值是什么，函数调用完毕后，这个值还是什么；我们无法在函数调用之后，使用修改后的值。</p>
<p>而当我们使用指针进行传递的时候，就可以达到这个目的。因为指针传递的是变量的地址，而不是值。</p>
<p>下面来举一个例子：<br><strong>例21</strong>：输出数组中的最大值和最小值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">minmax</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> len,<span class="keyword">int</span> *min,<span class="keyword">int</span> *max)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	*min = *max = a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>( i=<span class="number">1</span>; i&lt;len;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>( a[i] &lt; *min )&#123;</span><br><span class="line">			*min = a[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>( a[i] &gt; *max)&#123;</span><br><span class="line">			*max = a[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">56</span>,<span class="number">12</span>,<span class="number">42</span>,<span class="number">13</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">19</span>,<span class="number">23</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> min,max;</span><br><span class="line">	minmax(a,<span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(a[<span class="number">0</span>]),&amp;min,&amp;max);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;min=%d,max=%d\n&quot;</span>,min,max);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：min=1,max=56</p>
<p><strong>易错点提示：<br>①指针变量实质是一个地址，这个地址指向一个内存。<br>②函数在传递参数时传递的一定是形参。</strong></p>
<h4 id="（2）函数指针"><a href="#（2）函数指针" class="headerlink" title="（2）函数指针"></a>（2）函数指针</h4><p>概念：指向函数的指针变量。<br>也就是<strong>函数指针是一个指针</strong>，指向函数的指针。<br> 如：int *f(int a)是一个函数指针。</p>
<p>关于函数名，看一个实例。<br><strong>例22</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ADD</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z = <span class="number">0</span>;</span><br><span class="line">	z = x + y;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;ADD);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, ADD);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>000B13BB<br>000B13BB</p>
<p>说明：&amp;函数名 和 函数名 都表示函数的地址。</p>
<p>再举一个简单的函数指针的例子。<br><strong>例23</strong>：加法</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ADD</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z = <span class="number">0</span>;</span><br><span class="line">	z = x + y;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>(*p)(<span class="keyword">int</span> x, <span class="keyword">int</span> y) = ADD;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, (*p)(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：5</p>
<p>函数指针和数组指针原理相同，他有两种作用：<br>①调用函数。②做函数的参数（回调函数）。</p>
<p><strong>划重点：</strong><br><strong>① void * 类型的指针 可以接受任意类型的地址。</strong><br>（有点垃圾桶的意思？狗头）<br><strong>② void * 类型的指针 不能进行解引用操作。</strong><br><strong>③ void * 类型的指针 不能就行+-整数的操作。</strong> </p>
<p>下面来举个例子：<br><strong>例24</strong>：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* pa = &amp;a;</span><br><span class="line">	<span class="comment">//char* pc = &amp;a;</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> ch = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">	<span class="keyword">void</span>* p= &amp;a;</span><br><span class="line">	p = &amp;ch;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//*p = 0;</span></span><br><span class="line">	<span class="comment">//p++;</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解读：<br>①对于char* pc = &amp;a 这种写法，可以过编译（ pc中能放下a的地址 ），但是会有一个警告（ C4133：“初始化” ：从 “int *” 到 “char *” 的类型不兼容）。<br>但是对于void *类型就不会有警告出现，因为<strong>void * 类型指针可以接收任意类型的指针</strong>。<br>②同样因为 void * 类型的指针类型未知，所以在进行<strong>解引用 和 +-整数</strong>时会报错。</p>
<p><strong>回调函数：</strong><br>回调函数就是一个通过函数指针调用的函数。如果你把函数的指针（地址）作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，我们就说这是回调函数。回调函数不是由该函数的实现方直接调用，而是在特定的事件或条件发生时由另外的一方调用的，用于对该事件或条件进行响应。</p>
<p>最典型的莫过于qsort（）函数了，这个函数对应的头文件为#include&lt;stdlib.h&gt;，包含了4个参数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">qsort</span><span class="params">( <span class="keyword">void</span>* base,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="keyword">size_t</span> num,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="keyword">size_t</span> width,</span></span></span><br><span class="line"><span class="params"><span class="function">			<span class="keyword">int</span>(* cmp)(<span class="keyword">const</span> <span class="keyword">void</span>* e1, <span class="keyword">const</span> <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="params"><span class="function">			)</span></span>;</span><br></pre></td></tr></table></figure>
<p>有兴趣的朋友，可以自行查阅一下源代码，这里就不过多阐述了。</p>
<p>来看使用qsort排序的函数：<br><strong>例25</strong>：qsort函数的运用</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_int</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span>* e1, <span class="keyword">const</span> <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//比较两个整形值的</span></span><br><span class="line">	<span class="keyword">return</span> *(<span class="keyword">int</span>*)e1 - *(<span class="keyword">int</span>*)e2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">	qsort(arr, sz, <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]), cmp_int);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_float</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span>* e1, <span class="keyword">const</span> <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//比较两个浮点型值的</span></span><br><span class="line">	<span class="keyword">return</span> ((<span class="keyword">int</span>)(*(<span class="keyword">float</span>*)e1 - *(<span class="keyword">float</span>*)e2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> f[] = &#123; <span class="number">9.0</span>,<span class="number">8.0</span>,<span class="number">7.0</span>,<span class="number">6.0</span>,<span class="number">5.0</span>,<span class="number">4.0</span>,<span class="number">3.0</span>,<span class="number">2.0</span>,<span class="number">1.0</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(f) / <span class="keyword">sizeof</span>(f[<span class="number">0</span>]);</span><br><span class="line">	qsort(f, sz, <span class="keyword">sizeof</span>(f[<span class="number">0</span>]), cmp_float);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%.1f &quot;</span>, f[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	test1();</span><br><span class="line">	test2();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 1 2 3 4 5 6 7 8 9<br>1.0 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0</p>
<h4 id="（3）指针函数"><a href="#（3）指针函数" class="headerlink" title="（3）指针函数"></a>（3）指针函数</h4><p>概念：返回某一类型指针的函数。<br>也就是<strong>指针函数是函数</strong>，返回值为指针的函数。<br>如： int (*f)(int a)是一个指针函数。</p>
<p>下面举一个例子：<br><strong>例26</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//指针函数的简单例程 malloc strcpy</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *pa;</span><br><span class="line">    pa = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">40</span>); <span class="comment">//申请内存</span></span><br><span class="line">    <span class="comment">//一定记得要写出错判断</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">NULL</span> == pa)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;malloc error\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcpy</span>(pa,<span class="string">&quot;Welcome to xiyou!&quot;</span>);<span class="comment">//字符串拷贝函数</span></span><br><span class="line">    <span class="keyword">return</span> pa;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *p;</span><br><span class="line">    p = fun();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：Welcome to xiyou!</p>
<h3 id="4、指针和结构体"><a href="#4、指针和结构体" class="headerlink" title="4、指针和结构体"></a>4、指针和结构体</h3><h4 id="（1）结构体内包含指针"><a href="#（1）结构体内包含指针" class="headerlink" title="（1）结构体内包含指针"></a>（1）结构体内包含指针</h4><p>声明一个结构体：<br><strong>例27</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">person</span> &#123;</span><span class="comment">//结构体的声明</span></span><br><span class="line">	<span class="keyword">char</span>* name;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125;Person;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person stu;<span class="comment">//结构体实例声明</span></span><br><span class="line">	stu.name = <span class="string">&quot;zhangsan&quot;</span>;<span class="comment">//点表示法访问其字段</span></span><br><span class="line">	stu.age = <span class="number">20</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s %d\n&quot;</span>,stu.name,stu.age);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>zhangsan 20</p>
<p>我们可以直接使用.来进行结构体数据的访问。更加便捷！</p>
<h4 id="（2）结构体指针"><a href="#（2）结构体指针" class="headerlink" title="（2）结构体指针"></a>（2）结构体指针</h4><p>①我们可以使用指针来访问变量，同时还能当做函数的参数进行传递<br>举一个例子：<br><strong>例28</strong>：按照年龄录入信息</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_stu_by_age</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span>* e1, <span class="keyword">const</span> <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> ((struct Stu*)e1)-&gt;age - ((struct Stu*)e2)-&gt;age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s</span>[3] =</span> &#123; &#123;<span class="string">&quot;zhangsan&quot;</span>,<span class="number">20</span>&#125;,&#123;<span class="string">&quot;lisi&quot;</span>,<span class="number">30</span>&#125;,&#123;<span class="string">&quot;wangwu&quot;</span>,<span class="number">10</span>&#125; &#125;;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(s) / <span class="keyword">sizeof</span>(s[<span class="number">0</span>]);</span><br><span class="line">	qsort(s, sz, <span class="keyword">sizeof</span>(s[<span class="number">0</span>]), cmp_stu_by_age);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%8s-%2d\n&quot;</span>, s[i].name,s[i].age);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>  wangwu-10<br>zhangsan-20<br>    lisi-30</p>
<p>为了使用的方便和直观，用指针引用结构体变量成员的方式：<br>(*指针变量名).成员名<br>可以直接用：<br><strong>指针变量名-&gt;成员名</strong></p>
<p>②用来构造数据结构<br>链表，二叉树这些数据结构都是由结构体组成的，这里就不展开讲了。<br><strong>例29</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">int</span> num;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Student* p;</span><br><span class="line">  Student Stu1;</span><br><span class="line">  p = &amp;Stu1;</span><br><span class="line">  p-&gt;num = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><p>历经了千难万险，有关指针的介绍到此结束，本文章只是很简单的介绍向大家介绍了指针的冰山一角，指针的奇妙远不止于此，还需要我们在日常学习中慢慢积累，厚积才能薄发，各位，我们以此共勉！！！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88%E8%AE%B2%E8%A7%A3/" data-id="claf3rtik0002bovlh4436opi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言——qsort函数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E2%80%94%E2%80%94qsort%E5%87%BD%E6%95%B0/" class="article-date">
  <time datetime="2022-11-13T06:48:18.131Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>之前的指针详解中，提到过qsort函数，这个函数是用来排序的，然后我后来也自己敲了一次qsort函数，就当做笔记分享一下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">//实现bubble_sort函数的程序员，他是否知道未来排序的数据类型：不知道。</span></span><br><span class="line"><span class="comment">//那程序员也不知道：待比较的两个元素类型。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(<span class="keyword">char</span>* buf1, <span class="keyword">char</span>* buf2, <span class="keyword">int</span> width)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; width; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">char</span> tmp = *buf1;</span><br><span class="line">		*buf1 = *buf2;</span><br><span class="line">		*buf2 = tmp;</span><br><span class="line">		buf1++;</span><br><span class="line">		buf2++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">void</span>* base, <span class="keyword">int</span> sz, <span class="keyword">int</span> width, <span class="keyword">int</span> (*cmp)(<span class="keyword">void</span>* e1, <span class="keyword">void</span>* e2))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//趟数。</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz - <span class="number">1</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//每一趟比较的对数。</span></span><br><span class="line">		<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; sz - <span class="number">1</span> - i; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//两个元素的比较。</span></span><br><span class="line">			<span class="keyword">if</span> (cmp((<span class="keyword">char</span>*)base + j * width, (<span class="keyword">char</span>*)base + (j + <span class="number">1</span>) * width) &gt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">//交换</span></span><br><span class="line">				Swap((<span class="keyword">char</span>*)base + j * width, (<span class="keyword">char</span>*)base + (j + <span class="number">1</span>) * width, width);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_int</span><span class="params">(<span class="keyword">void</span>* e1, <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//比较两个整形值的</span></span><br><span class="line">	<span class="keyword">return</span> *(<span class="keyword">int</span>*)e1 - *(<span class="keyword">int</span>*)e2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">	<span class="comment">//使用bubble_sort的程序员一定知道自己排序的是什么数据。</span></span><br><span class="line">	<span class="comment">//就应该知道如何比较待排序数组中的元素。</span></span><br><span class="line">	bubble_sort(arr, sz, <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]), cmp_int);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int cmp_stu_by_age(void* e1, void* e2)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//	return ((struct Stu*)e1)-&gt;age - ((struct Stu*)e2)-&gt;age;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_stu_by_name</span><span class="params">(<span class="keyword">void</span>* e1, <span class="keyword">void</span>* e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//比较名字就是比较字符串。</span></span><br><span class="line">	<span class="comment">//字符串比较不能直接用&gt;&lt;=来比较，应该用strcmp函数。</span></span><br><span class="line">	<span class="comment">//strcmp函数对应的头文件为#include&lt;string.h&gt;。</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">strcmp</span>(((struct Stu*)e1)-&gt;name, ((struct Stu*)e2)-&gt;name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s</span>[3] =</span> &#123; &#123;<span class="string">&quot;zhangsan&quot;</span>,<span class="number">20</span>&#125;,&#123;<span class="string">&quot;lisi&quot;</span>,<span class="number">30</span>&#125;,&#123;<span class="string">&quot;wangwu&quot;</span>,<span class="number">10</span>&#125; &#125;;</span><br><span class="line">	<span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(s) / <span class="keyword">sizeof</span>(s[<span class="number">0</span>]);</span><br><span class="line">	<span class="comment">//bubble_sort(s, sz, sizeof(s[0]), cmp_stu_by_age);</span></span><br><span class="line">	bubble_sort(s, sz, <span class="keyword">sizeof</span>(s[<span class="number">0</span>]), cmp_stu_by_name);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%8s-%2d\n&quot;</span>, s[i].name, s[i].age);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	test1();</span><br><span class="line">	test2();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E2%80%94%E2%80%94qsort%E5%87%BD%E6%95%B0/" data-id="claf3rtid0000bovlgdp86f5z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言自定义变量类型——结构体详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E7%BB%93%E6%9E%84%E4%BD%93%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time datetime="2022-11-13T06:48:18.128Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <font color=#999AAA >

</font>

<p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>关于C语言，在指针学习过程中，在学习之余，做了一次总结，写成了一篇详解博客，也向大家分享的我对于指针的见解，我发现将所学的内容写成博客，不仅仅可以使和我一样的初学者们更快的了解相关知识点，还可以让我查缺补漏，弥补自己的短板，让我的基础更加扎实，所以在学完结构体以后，我也将结构体的内容整理成一篇博客，向大家分享。</p>
<h1 id="为什么要学习结构体"><a href="#为什么要学习结构体" class="headerlink" title="为什么要学习结构体"></a>为什么要学习结构体</h1><p>当我们需要表达一个数据的时候，我们就需要用到变量，而变量又需要定义一个类型。我们通过之前的学习，知道了C语言中变量类型有：int、double、char、float等等基础类型，还有指针等等。但是如果我们想表达的数据比较复杂，不是一个数据，例如：日期（年、月、日）、学生信息（姓名、性别、年龄等等）、时间（时、分、秒）等等。而我们又想用一个整体来表达这些所有的数据，这个时候我们就需要用到一个自定义变量类型——结构体。</p>
<h1 id="什么是结构体"><a href="#什么是结构体" class="headerlink" title="什么是结构体"></a>什么是结构体</h1><p>结构体是C语言中一种重要的数据类型，该数据类型由一组称为成员（或称为域，或称为元素）的不同数据组成，其中每个成员可以具有不同的类型。结构体通常用来表示类型不同但是又相关的若干数据。</p>
<p><strong>注意：结构体是一种数据类型！！！</strong></p>
<h1 id="一、结构体：struct"><a href="#一、结构体：struct" class="headerlink" title="一、结构体：struct"></a>一、结构体：struct</h1><h2 id="1、结构体类型的声明"><a href="#1、结构体类型的声明" class="headerlink" title="1、结构体类型的声明"></a>1、结构体类型的声明</h2><h3 id="（1）结构体的基础知识"><a href="#（1）结构体的基础知识" class="headerlink" title="（1）结构体的基础知识"></a>（1）结构体的基础知识</h3><p>成员变量：结构是一些值的集合，这些值称为成员变量。</p>
<p><strong>结构体的每个成员可以是不同类型的变量。</strong></p>
<h3 id="（2）结构体的声明"><a href="#（2）结构体的声明" class="headerlink" title="（2）结构体的声明"></a>（2）结构体的声明</h3><p>结构体的定义如下所示，struct为结构体关键字，tag为结构体的标志，member-list为结构体成员列表，其必须列出其所有成员；variable-list为此结构体声明的变量。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tag</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	member-<span class="built_in">list</span></span><br><span class="line">&#125;variable-<span class="built_in">list</span>;</span><br></pre></td></tr></table></figure>

<p><strong>例1：描述一个学生信息</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//声明一个结构体类型</span></span><br><span class="line"><span class="comment">//声明一个学生类型，是想通过学生类型来创建学生变量（对象）</span></span><br><span class="line"><span class="comment">//描述学生：属性·名字+电话+性别+年龄</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];<span class="comment">//名字</span></span><br><span class="line">	<span class="keyword">char</span> tele[<span class="number">12</span>];<span class="comment">//电话</span></span><br><span class="line">	<span class="keyword">char</span> sex[<span class="number">5</span>];<span class="comment">//性别</span></span><br><span class="line">	<span class="keyword">int</span> age;<span class="comment">//年龄</span></span><br><span class="line">&#125;s4,s5,s6;<span class="comment">//分号不能丢</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s3</span>;</span><span class="comment">//s3,s4,s5,s6为全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//创建结构体变量</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s1</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s2</span>;</span></span><br><span class="line">	<span class="comment">//s1,s2为局部变量</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>易错提示：<br>一定不要忘记结束时的分号！！！</strong></p>
<h3 id="（3）特殊的声明"><a href="#（3）特殊的声明" class="headerlink" title="（3）特殊的声明"></a>（3）特殊的声明</h3><p>在声明结构的时候，可以不完全的声明<br><strong>例2：匿名结构体类型</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">char</span> b;</span><br><span class="line">	<span class="keyword">float</span> c;</span><br><span class="line">&#125;x;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">char</span> b;</span><br><span class="line">	<span class="keyword">float</span> c;</span><br><span class="line">&#125;* p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	p = &amp;x;<span class="comment">//错误 E0513	不能将 &quot;struct &lt;unnamed&gt; *&quot; 类型的值分配到 &quot;struct &lt;unnamed&gt; *&quot; 类型的实体	</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的两个结构在声明的时候省略了结构体的标志（tag）。（是正确的）</p>
<p>上述代码的问题出现在：p = &amp;x。//这是非法的。<br>上面的两个匿名结构体虽然各自的成员是一模一样的，但是在编译器看来，它们是两个不同的类型，所以出现了报错（部分编译器是警告）。</p>
<h2 id="2、结构体的自引用"><a href="#2、结构体的自引用" class="headerlink" title="2、结构体的自引用"></a>2、结构体的自引用</h2><p>结构体的自引用就是指在结构体内部，包含指向自身类型结构体的指针。</p>
<p>在之前的学习中，我们知道了在函数中可以包含自己（即递归），那么在结构中包含一个类型为该结构体本身的成员是否可以呢？</p>
<p><strong>例3：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;<span class="comment">//4</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span> <span class="title">n</span>;</span><span class="comment">//4+套娃</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">sizeof</span>(struct Node);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br>错误    C2460    “Node::n”: 使用正在定义的“Node”</p>
<p>这是为什么呢？因为n定义中又有n，无限循环，系统无法确定该结构体的长度，会判定定义非法。</p>
<p><strong>切记，结构体自引用，成员定义只能是指针。</strong></p>
<p><strong>例4：正确的自引用</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;<span class="comment">//4</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">n</span>;</span><span class="comment">//4/8</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="keyword">sizeof</span>(struct Node);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：8（因为博主是32位）</p>
<p>这是为什么呢？因为我们在自引用时把结构的成员定义为指针，又指针的长度是确定的（上一节指针详解中提到过），所以此时结构体的长度也是确定的。</p>
<p>这时候可能有人又有疑问了，我们刚刚学了一种特殊的声明方式——匿名，那在自引用的时候，我们可不可以使用匿名了，就拿例4来举例子，因为这时候，我们使用了匿名结构，所以里边使用“Node* n;”不就好了吗？我们来看看，结构是怎样的：<br><strong>例5：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;</span><br><span class="line">	Node* n;</span><br><span class="line">&#125;Node;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="keyword">sizeof</span>(struct Node);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：一大堆报错</p>
<p>这是为什么呢？因为我们在声明结构体的内部，就使用了Node这个变量，但是我们的编译器是在声明结构体结束以后，才接收到Node这个变量，所以，在使用Node变量的时候，编译器无法识别，就自然会出现错误。</p>
<p><strong>建议：在使用结构体自引用的时候最好不要使用匿名声明结构体。</strong></p>
<h2 id="3、结构体变量的定义和初始化"><a href="#3、结构体变量的定义和初始化" class="headerlink" title="3、结构体变量的定义和初始化"></a>3、结构体变量的定义和初始化</h2><p>前面我们了解了如何声明结构体的类型，现在我们有了结构体类型，那么我们要如何定义一个结构体变量以及初始化一个结构体变量呢？其实非常简单。</p>
<h3 id="（1）单一结构体的定义和初始化"><a href="#（1）单一结构体的定义和初始化" class="headerlink" title="（1）单一结构体的定义和初始化"></a>（1）单一结构体的定义和初始化</h3><p><strong>例6：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">char</span> sex[<span class="number">5</span>];</span><br><span class="line">&#125;s1;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s2</span> =</span> &#123; <span class="string">&quot;lisi&quot;</span>,<span class="number">18</span>,<span class="string">&quot;nan&quot;</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s %d %s&quot;</span>, s2.name[<span class="number">20</span>], s2.age, s2.sex[<span class="number">5</span>]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>lisi 18 nan<br>PS：这里博主用的是Visual Studio 2019</p>
<p>通过struct+结构体的标志（tag）+变量名，就完成了结构体的定义；而在{}内把结构体成员对应的类型用逗号隔开赋值给声明的结构体，我们就完成的结构体的初始化。</p>
<h3 id="（2）嵌套结构体的定义和初始化"><a href="#（2）嵌套结构体的定义和初始化" class="headerlink" title="（2）嵌套结构体的定义和初始化"></a>（2）嵌套结构体的定义和初始化</h3><p>刚刚我们了解了结构体的自引用，了解了结构体内是可以存在结构体的，也就是结构体的嵌套，现在我们了解了单一的结构体如何定义和初始化，那有人就会想了，嵌套结构体如何进行定义和初始化呢？<br><strong>例7：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> c;</span><br><span class="line">	<span class="keyword">double</span> weight;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">T</span> <span class="title">p</span>;</span></span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">char</span> sex[<span class="number">5</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s</span> =</span> &#123; <span class="string">&quot;lisi&quot;</span>,&#123;<span class="number">30</span>,<span class="number">1.0</span>&#125;,<span class="number">18</span>,<span class="string">&quot;nan&quot;</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %lf&quot;</span>,s.p.c,s.p.weight);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：30 1.000000</p>
<p>在结构体中遇到结构体，我们在初始化的时候，同样的方法在外层结构体的{}内再添加一个{}即可。</p>
<p><strong>注意：嵌套结构体在调用的时候，逐层调用。</strong></p>
<h2 id="4、结构体内存对齐"><a href="#4、结构体内存对齐" class="headerlink" title="4、结构体内存对齐"></a>4、结构体内存对齐</h2><p>通过前面的学习，我们已经掌握了结构体的基本使用了。</p>
<p>有人就又会问了，结构体是变量，那变量就有大小啊，我们如何计算结构体的大小呢？</p>
<p>这里就涉及到了一个热门的考点：<strong>结构体内存对齐</strong>。</p>
<h3 id="（1）单一结构体内存对齐"><a href="#（1）单一结构体内存对齐" class="headerlink" title="（1）单一结构体内存对齐"></a>（1）单一结构体内存对齐</h3><p>先来做一道练习题：<br><strong>例8：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">char</span> c2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">char</span> c2;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s1</span> <span class="title">s1</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(s1));</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s2</span> <span class="title">s2</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(s2));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>12<br>8</p>
<p>大家第一次拿到这个题，肯定会想：这有什么好算的，不就是6、6吗？但是结构体的大小计算不是这样随便计算的，它需要符合一定的条件。</p>
<p>那么到底如何计算呢？我们需要利用结构体对齐规则：<br>①第一个成员在与结构体变量偏移量为0的地址处。<br>②其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。<br><strong>对齐数</strong> = 编译器默认的一个对齐数 与 该成员大小的<strong>较小值</strong><br><strong>提示：VS中默认的值为8</strong><br>③结构体总大小为最大对齐数（每个成员变量都有一个对齐数）的整数倍。</p>
<p>看完对齐规则，我们回到例8<br>㈠先看到struct s1这个结构体<br><img src="https://img-blog.csdnimg.cn/c62e4d1c12444af1a816be1398d4af15.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>第①步 结构体存放变量从偏移量为0的位置开始：<br>就是从图中0开始，又因为c1是一个字节，所以c1就是0 ~ 1。</p>
<p>第②步 其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处：<br>对齐数 = 编译器默认的一个对齐数 与 该成员大小的 较小值<br>a的对齐数为4，所以a要放到4的整数倍的地址处，所以a从4开始，又因为a是4个字节，所以a就是4 ~ 8；<br>到这里有人就会问了：那中间的1 ~ 4怎么办，中间这部分就浪费掉了。<br>c2的对齐数为1，c2是1个字节，所以从8开始，c2是8~9。</p>
<p>第③步 结构体总大小为最大对齐数（每个成员变量都有一个对齐数）的整数倍。<br>对于这个结构体中的成员：<br>c1的对齐数为1，a的对齐数为4，c2的对齐数为1，那么最大对齐数就是4；<br>而现在我们的一共用了9个字节，9不是4的整数倍，所以我们还要再浪费3个字节，达到4的整数倍12个字节。</p>
<p>㈡再看到struct s2这个结构体<br><img src="https://img-blog.csdnimg.cn/53ceef0f951b4f888cb0630c088b57db.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<p>第①步 结构体存放变量从偏移量为0的位置开始：<br>就是从图中0开始，又因为c1是一个字节，所以c1就是0 ~ 1。</p>
<p>第②步 其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处：<br>对齐数 = 编译器默认的一个对齐数 与 该成员大小的 较小值<br>c2的对齐数为1，所以c2要放到1的整数倍的地址处，所以c2从1开始，又因为c2是1个字节，所以c2就是1 ~ 2；<br>a的对齐数为4，所以a要放到4的整数倍的地址处，所以a从4开始，又因为a是4个字节，所以a就是4 ~ 8。</p>
<p>第③步 结构体总大小为最大对齐数（每个成员变量都有一个对齐数）的整数倍。<br>对于这个结构体中的成员：<br>c1的对齐数为1，c2的对齐数为1，a的对齐数为4，那么最大对齐数就是4；<br>现在我们一共用了8个字节，8是4的整数倍，所以这个结构体的大小就是8个字节。</p>
<p>趁热打铁，再来一道练习题：<br><strong>例9：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s3</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> a;</span><br><span class="line">	<span class="keyword">char</span> b;</span><br><span class="line">	<span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(struct s3));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：16</p>
<p>你做对了吗？如果没做对，没关系重新来过，再温习一遍例题；如果做对了，是不是成就感满满，但是别急，下面还有更难的！</p>
<h3 id="（2）嵌套结构体内存对齐"><a href="#（2）嵌套结构体内存对齐" class="headerlink" title="（2）嵌套结构体内存对齐"></a>（2）嵌套结构体内存对齐</h3><p>在思考每一个问题的同时，不要忘记我们学过的结构体是可以嵌套的。但是不要担心，我们的对齐规则考虑到了这种情况：</p>
<p>④如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，结构体的整体大小就是所有最大对齐数（含嵌套结构体的对齐数）的整数倍。</p>
<p>来看一道例题：<br><strong>例10：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s3</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> a;</span><br><span class="line">	<span class="keyword">char</span> b;</span><br><span class="line">	<span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s4</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s3</span> <span class="title">s3</span>;</span></span><br><span class="line">	<span class="keyword">double</span> d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(struct s4));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：32</p>
<p>还是按照步骤来解题：<br><img src="https://img-blog.csdnimg.cn/8ed10f54b38b4f9dac76828cc5c96126.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>第①步 结构体存放变量从偏移量为0的位置开始：<br>就是从图中0开始，又因为c1是一个字节，所以c1就是0 ~ 1。</p>
<p>第②步 其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处，<br>如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处：<br>对齐数 = 编译器默认的一个对齐数 与 该成员大小的 较小值<br>对于struct s3这个结构体：<br>a的对齐数为8，b的对齐数为1，c的对齐数为4，所以最大对齐数为8；<br>所以s3要放到8的整数倍的地址处，所以s3从8开始，又因为s3是16个字节（例9），所以s3就是8~24；<br>d的对齐数为8，所以a要放到8的整数倍的地址处，所以a从24开始，又因为a是8个字节，所以a就是24 ~ 32。</p>
<p>第③步 结构体的整体大小就是所有最大对齐数（含嵌套结构体的对齐数）的整数倍。<br>对于这个结构体中的成员：<br>c1的对齐数为1，s3的对齐数为8，d的对齐数为8，那么最大对齐数就是8；<br>现在我们一共用了32个字节，32是4的整数倍，所以这个结构体的大小就是32个字节。</p>
<h3 id="（3）对齐规则"><a href="#（3）对齐规则" class="headerlink" title="（3）对齐规则"></a>（3）对齐规则</h3><p>①第一个成员在与结构体变量偏移量为0的地址处。<br>②其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。<br><strong>对齐数</strong> = 编译器默认的一个对齐数 与 该成员大小的<strong>较小值</strong><br><strong>提示：VS中默认的值为8</strong><br>③结构体总大小为最大对齐数（每个成员变量都有一个对齐数）的整数倍。<br>④如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，结构体的整体大小就是所有最大对齐数（含嵌套结构体的对齐数）的整数倍。</p>
<h3 id="（4）为什么存在内存对齐"><a href="#（4）为什么存在内存对齐" class="headerlink" title="（4）为什么存在内存对齐"></a>（4）为什么存在内存对齐</h3><p>大家在对于对齐规则的学习中，肯定会有这样的疑问：<br>我们在对齐的过程中，浪费了那么多空间，那为什么还要存在内存对齐呢？</p>
<p>①<strong>平台原因（移植原因）</strong>：不是所有的硬件平台都能访问任意地址上的任意数据的；某些硬件平台只能在某些地址处取某些特定类型的数据，否则抛出硬件异常。<br>②<strong>性能原因</strong>：数据结构（尤其是栈）应该尽可能地在自然边界上对齐。原因在于：为了访问未对齐的内存，处理器需要作两次内存访问；而对齐的内存访问仅需要一次访问。</p>
<p>即 结构体的内存对齐是拿<strong>空间</strong>来换取<strong>时间</strong>的做法。</p>
<h3 id="（5）如何利用内存对齐"><a href="#（5）如何利用内存对齐" class="headerlink" title="（5）如何利用内存对齐"></a>（5）如何利用内存对齐</h3><p>前面我们了解到：内存对齐是拿<strong>空间</strong>来换取<strong>时间</strong>的做法。</p>
<p>那么我们如何做到既要满足内存对齐，又要节省空间呢？<br><strong>让占用空间小的成员尽量集中在一起。</strong></p>
<p>举个例子：<br><strong>例11：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">char</span> c2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">char</span> c2;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这里s1和s2类型的成员是一模一样的，但是s2占用的空间比s1小。</p>
<h3 id="（6）修改默认对齐数"><a href="#（6）修改默认对齐数" class="headerlink" title="（6）修改默认对齐数"></a>（6）修改默认对齐数</h3><p>在C语言中默认对齐数是可以修改的，利用 #pragma 这个预处理命令，就可以改变默认对齐数。</p>
<p>举一个例子：<br><strong>例12：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">double</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> pack(4)</span></span><br><span class="line"><span class="comment">//设置默认对齐数为4</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c1;</span><br><span class="line">	<span class="keyword">double</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> pack()</span></span><br><span class="line"><span class="comment">//取消设置的默认对齐数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(struct s1));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(struct s2));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>16<br>12</p>
<p>这里可以看到：<br>s1中，存放a的时候对齐数为8，所以a从8开始，又因为a是8个字节，所以a是8<del>16，所以s2是16个字节；<br>我们将默认对齐数修改为4的时候，s2中，存放a的时候对齐数为4，所以a从4开始，又因为a是8个字节，所以a是4</del>12，所以s2是12个字节。</p>
<h3 id="（7）offsetof（）函数"><a href="#（7）offsetof（）函数" class="headerlink" title="（7）offsetof（）函数"></a>（7）offsetof（）函数</h3><p>offsetof（）函数是用来返回结构体成员的偏移量。<br>使用offsetof（）函数时，需要加上 #include&lt;stddef.h&gt; 这个头文件<br>offsetof（variable-list，member-list）</p>
<p>举个例子：<br><strong>例13：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">double</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, offsetof(struct s, c));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, offsetof(struct s, a));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, offsetof(struct s, b));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0<br>4<br>8</p>
<h2 id="5、结构体传参"><a href="#5、结构体传参" class="headerlink" title="5、结构体传参"></a>5、结构体传参</h2><p>直接上例子：<br><strong>例14：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">double</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(struct s p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	p.a = <span class="number">100</span>;</span><br><span class="line">	p.b = <span class="number">3.14</span>;</span><br><span class="line">	p.c = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">(struct s* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	p-&gt;a = <span class="number">100</span>;</span><br><span class="line">	p-&gt;b = <span class="number">3.14</span>;</span><br><span class="line">	p-&gt;c = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//传值</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print1</span><span class="params">(struct s tmp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %lf %c\n&quot;</span>, tmp.a, tmp.b, tmp.c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//传址</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print2</span><span class="params">(struct s* tmp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %lf %c\n&quot;</span>, tmp-&gt;a, tmp-&gt;b, tmp-&gt;c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s</span> <span class="title">s</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	func1(s);</span><br><span class="line">	print1(s);</span><br><span class="line">	print2(&amp;s);</span><br><span class="line"></span><br><span class="line">	func2(&amp;s);</span><br><span class="line">	print1(s);</span><br><span class="line">	print2(&amp;s);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 0.000000<br>0 0.000000<br>100 3.140000 w<br>100 3.140000 w</p>
<p>通过例14，我们可以看出func1进行传参，只是形参，func2进行传参，传的是地址；同样print1是传值，而print2是传址。两种传递方法都可以，但是我们更加提倡以地址的形式进行传递，因为这样是以指针的形式传递，无论结构体有多大，指针的大小均为4/8。</p>
<h2 id="6、结构体实现位段（位段的填充-amp-可移植性）"><a href="#6、结构体实现位段（位段的填充-amp-可移植性）" class="headerlink" title="6、结构体实现位段（位段的填充&amp;可移植性）"></a>6、结构体实现位段（位段的填充&amp;可移植性）</h2><h3 id="（1）什么是位段"><a href="#（1）什么是位段" class="headerlink" title="（1）什么是位段"></a>（1）什么是位段</h3><p>位段的声明和结构是类似的，有两个不同：<br>①位段的成员必须是int、unsigned int 、 signed int 或 char。<br>②位段的成员名后边有一个冒号和一个数字。</p>
<p>来做一道题：<br><strong>例15：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//位段 - 二进制位</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a : <span class="number">2</span>;<span class="comment">//2个bit</span></span><br><span class="line">	<span class="keyword">int</span> b : <span class="number">5</span>;<span class="comment">//5个bit</span></span><br><span class="line">	<span class="keyword">int</span> c : <span class="number">10</span>;<span class="comment">//10个bit</span></span><br><span class="line">	<span class="keyword">int</span> d : <span class="number">30</span>;<span class="comment">//30个bit</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s</span> <span class="title">s</span>;</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(s));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：8</p>
<p>这里大家就会猜测说：2+5+10+30=47bit，那不应该是6个字节吗？为什么是8个字节啊，这是因为位段也有它的规则。</p>
<h3 id="（2）位段的内存分配"><a href="#（2）位段的内存分配" class="headerlink" title="（2）位段的内存分配"></a>（2）位段的内存分配</h3><p>①位段的成员可以是int、unsigned int 、 signed int 或 char（属于整形家族）类型。<br>②位段的空间上是按照需要以4个字节（int）或者1个字节（char）的方式来开辟的。<br>③位段涉及很多不确定因素，位段是不跨平台的，注重可移植的程序应该避免使用位段。</p>
<p>现在我们再来看例15,：<br>a，b，c一共需要17个bit来存放，这时，需要开辟4个字节（32bit）的空间来存放；但是剩下的15个bit不足以存放d，所以就需要再开辟4个字节（32bit）的空间来存放d。（剩余的空间浪费了）<br>所以共需8个字节。</p>
<h3 id="（3）位段的跨平台问题"><a href="#（3）位段的跨平台问题" class="headerlink" title="（3）位段的跨平台问题"></a>（3）位段的跨平台问题</h3><p>①int位段被当成有符号数还是无符号数是不确定的；<br>②位段中最大位的数目不能确定；（16位机器最大16,32位机器最大32）<br>③位段中的成员在内存中从左向右分配，还是从右向左分配标准尚未定义；<br>④当一个结构包含两个位段，第二个位段成员比较大，无法容纳于第一个位段剩余的位时，是舍弃剩余的位还是利用，这是不确定的。</p>
<h3 id="（4）比较"><a href="#（4）比较" class="headerlink" title="（4）比较"></a>（4）比较</h3><p>跟结构体相比，位段可以达到同样的效果，但是可以很好的节省空间，但是有跨平台的问题存在。</p>
<h1 id="二、枚举：enum"><a href="#二、枚举：enum" class="headerlink" title="二、枚举：enum"></a>二、枚举：enum</h1><p>概念：一一列举，把可能的取值一一列举。</p>
<h2 id="1、枚举类型的定义"><a href="#1、枚举类型的定义" class="headerlink" title="1、枚举类型的定义"></a>1、枚举类型的定义</h2><p>举一个例子：<br><strong>例16：一个人的性别</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//枚举类型</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Sex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="comment">//枚举的可能取值</span></span><br><span class="line">	MALE,<span class="comment">//男性</span></span><br><span class="line">	FEMALE,<span class="comment">//女性</span></span><br><span class="line">	SECRET<span class="comment">//秘密</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">enum</span> <span class="title">Sex</span> <span class="title">s</span> =</span> MALE;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, MALE, FEMALE, SECRET);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：0 1 2</p>
<p>注意：在定义枚举时，我们可以随意定义，但是如果没有赋值，会默认为0，1,2，……，同时枚举作为一个常量，我们无法在定义完成后进行修改。</p>
<h2 id="2、枚举的优点"><a href="#2、枚举的优点" class="headerlink" title="2、枚举的优点"></a>2、枚举的优点</h2><p>①增加代码的可读性和可维护性；<br>②和 #define 定义的标识符比较枚举，枚举具有类型检查，更加严谨；<br>③防止了命名污染（封装）；<br>④便于调试；<br>⑤使用方便，一次可以定义多个常量。</p>
<h2 id="3、枚举的使用"><a href="#3、枚举的使用" class="headerlink" title="3、枚举的使用"></a>3、枚举的使用</h2><p>再举一个例子：<br><strong>例17：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">DAY</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    MON = <span class="number">1</span>, TUE, WED, THU, FRI, SAT, SUN</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">DAY</span> <span class="title">day</span>;</span></span><br><span class="line">    day = MON;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, day);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1</p>
<h1 id="三、联合体（共用体）：union"><a href="#三、联合体（共用体）：union" class="headerlink" title="三、联合体（共用体）：union"></a>三、联合体（共用体）：union</h1><h2 id="1、联合体类型的定义"><a href="#1、联合体类型的定义" class="headerlink" title="1、联合体类型的定义"></a>1、联合体类型的定义</h2><p>联合体也是一种特殊的自定义类型。这种类型定义的变量也包含一系列的成员，特征是这些成员公用同一块空间（所以联合也叫共用体）。</p>
<p>来看一个例子<br><strong>例18：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">un</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">union</span> <span class="title">un</span> <span class="title">u</span>;</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(u));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;u);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;(u.c));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;(u.i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>4<br>004FFD3C<br>004FFD3C<br>004FFD3C</p>
<p>这也说明了：联合体的成员<strong>公用同一块空间</strong>。</p>
<h2 id="2、联合体的特点"><a href="#2、联合体的特点" class="headerlink" title="2、联合体的特点"></a>2、联合体的特点</h2><p>联合体的成员是公用同一块内存空间的，这样一个联合变量的大小，至少是最大成员的大小（因为联合体至少得有能力保存最大的那个成员）。</p>
<h2 id="3、联合体大小的计算"><a href="#3、联合体大小的计算" class="headerlink" title="3、联合体大小的计算"></a>3、联合体大小的计算</h2><p>前面的结构体和枚举都有自己的规则，那联合体也不例外：<br>①联合体的大小至少是最大成员的大小；<br>②当最大成员大小不是最大对齐数的整数倍的时候，就要对齐到最大对齐数的整数倍。</p>
<h1 id="练习1"><a href="#练习1" class="headerlink" title="练习1"></a>练习1</h1><p>判断当前计算机的大小端存储。<br><strong>例19：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check_sys</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">//返回1表示小端</span></span><br><span class="line">	<span class="comment">//返回0表示大端</span></span><br><span class="line">	<span class="keyword">return</span> *(<span class="keyword">char</span>*)&amp;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> ret = check_sys();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="number">1</span> == ret)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;小端\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;大端\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int a = Ox11223344;</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//低地址----------------------------------------------&gt;高地址</span></span><br><span class="line">	<span class="comment">//...[][][][11][22][33][44][][][][]...			大端字节序存储模式</span></span><br><span class="line">	<span class="comment">//...[][][][44][33][22][11][][][][]...			小端字节序存储模式</span></span><br><span class="line">	<span class="comment">//讨论一个数据，放在内存中的存放的字节顺序</span></span><br><span class="line">	<span class="comment">//大小端字节序问题</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：小端</p>
<h1 id="练习2"><a href="#练习2" class="headerlink" title="练习2"></a>练习2</h1><p>制作学生管理系统</p>
<p>这个博主现在正在研究，也欢迎大家来交流，因为目前能力所限，这个到时候会再写一篇博客，专门说明这个。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>不知不觉，结构体的内容已经结束了，博主从晚上七点奋战至凌晨四点，不得不感叹道：时间过的真快的。学习的时光总是美好的，每天能学到新的知识就会感到很充实，做这个博客的原因不光是想查缺补漏一下，更多的是想帮助那些初学者，让他们能够很快理解这些知识点，一起加油。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E7%BB%93%E6%9E%84%E4%BD%93%E8%AF%A6%E8%A7%A3/" data-id="claf3rtio0006bovl73mpcbgn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言动态内存分配详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time datetime="2022-11-13T06:48:18.124Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>自从前两次博客写完以后，感觉对于我本人来说，收获很大，尤其是将学过的知识再度温习一遍，感觉基础扎实了很多，所以就养成了一个习惯，每学完一个模块，都会写一篇博客，不仅仅是写个我自己的，也是想通过这篇博客，与大家分享一些我的见解。本来周四就学完了动态内存分配，但是周末博主去玩了，于是忘记了写博客，现在加班奉上。</p>
<h1 id="一、为什么存在动态内存分配"><a href="#一、为什么存在动态内存分配" class="headerlink" title="一、为什么存在动态内存分配"></a>一、为什么存在动态内存分配</h1><h2 id="1、已掌握的内存开辟方式"><a href="#1、已掌握的内存开辟方式" class="headerlink" title="1、已掌握的内存开辟方式"></a>1、已掌握的内存开辟方式</h2><p>在C语言中，我们将内存分为了4个区间：<br>代码区，全局变量与静态变量区，局部变量区即栈区，动态存储区，即堆（heap）区或自由存储区（free store）。</p>
<p>为了方便大家理解，图解如下：<br><img src="https://img-blog.csdnimg.cn/294d490af88e49c29fd4b25f8c5e4b82.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>通过之前的学习，我们了解了一些内存的使用方法：</p>
<p>（1）创建一个变量<br>当我们想要使用单一变量的时候，我们可以通过创建一个变量，来使用内存。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;<span class="comment">//局部变量 - 栈区</span></span><br><span class="line"><span class="keyword">int</span> g_a = <span class="number">10</span>;<span class="comment">//全局变量 - 静态区</span></span><br></pre></td></tr></table></figure>
<p>（2）创建一个数组<br>当我们需要使用多个相同类型变量的时候，我们可以通过创建一个数组，来使用内存。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>];<span class="comment">//局部变量 - 栈区</span></span><br><span class="line"><span class="keyword">int</span> g_arr[<span class="number">10</span>];<span class="comment">//全局变量 - 静态区</span></span><br></pre></td></tr></table></figure>
<h2 id="2、上述开辟空间方式的特点"><a href="#2、上述开辟空间方式的特点" class="headerlink" title="2、上述开辟空间方式的特点"></a>2、上述开辟空间方式的特点</h2><p>以上两种使用内存的方式是我们学过的，也是常用的，但是在某些情况下，仅仅有这两种方法是不足的。</p>
<p>例如：我们需要创建一个数组来存放一个班级的学生信息的时候。</p>
<p>我们在创建这个arr数组的时候，当我们直接给定数组的长度arr[50]的时候，这样是很简单，但是这样合理吗？<br><strong>例1：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s</span> <span class="title">arr</span>[50];</span><span class="comment">// 50个struct s 类型的数据</span></span><br><span class="line">	<span class="comment">// 30 ：不够</span></span><br><span class="line">	<span class="comment">// 60 ：浪费</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>假设这个班级只有30个人，那么我们是不是就浪费了一部分的空间；假设这个班级有60个人，那么我们给定的50又不够。所以说这里给定多少都是不合理的。</p>
<p>这里有人又会说了，很简单啊：要多少给多少就好了嘛！就像这样<br><strong>例2：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">	scanf_s(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s</span> <span class="title">arr</span>[<span class="title">n</span>];</span><span class="comment">//错误(活动)	E0028	表达式必须含有常量值</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：报错</p>
<p>事实证明，我们的想法很美妙，但是现实却很残酷：<br>这里的错误名称叫:<strong>表达式必须含有常量值</strong>；<br>说明对于 struct s arr[n]; 这里的n是变量，那就不行了。</p>
<p>这里延伸一下：例2这种代码的写法叫做<strong>变长数组</strong>。<br>对于变长数组这种写法目前仅对于C99是可运行通过的。</p>
<p>总结：上述开辟空间方式的特点<br>（1）开辟空间的大小是固定的；<br>（2）数组在声明的时候，必须制定数组的长度，它所需的内存在编译时分配。</p>
<h2 id="3、为什么存在动态内存分配"><a href="#3、为什么存在动态内存分配" class="headerlink" title="3、为什么存在动态内存分配"></a>3、为什么存在动态内存分配</h2><p>我们对于内存开辟空间的需求，不仅仅局限于这些方式，有时候我们需要的空间大小在程序运行的时候才能知道，这时上述方式就不能达成目的了，所以动态内存分配就应运而生了。</p>
<h1 id="二、动态内存函数的介绍"><a href="#二、动态内存函数的介绍" class="headerlink" title="二、动态内存函数的介绍"></a>二、动态内存函数的介绍</h1><h2 id="1、malloc"><a href="#1、malloc" class="headerlink" title="1、malloc"></a>1、malloc</h2><p>C语言提供了一个动态内存开辟的函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">malloc</span> <span class="params">(<span class="keyword">size_t</span> size)</span></span>;</span><br></pre></td></tr></table></figure>
<p>malloc的全称是memory allocation，中文叫动态内存分配，用于申请一块连续的指定大小的内存块区域以void*类型返回分配的内存区域地址，当无法知道内存具体位置的时候，想要绑定真正的内存空间，就需要用到动态的分配内存，且分配的大小就是程序要求的大小。</p>
<p>这个函数向内存申请一块<strong>连续可用</strong>的空间，并返回指向这块空间的指针。<br>（1）如果开辟成功，则返回一个指向开辟好空间的指针；<br>（2）如果开辟失败，则返回一个NULL指针，因此 malloc 的返回值一定要做检查；<br>（3）返回值的类型是 void*，所以 malloc 函数并不知道开辟空间的类型，具体在使用的时候使用者自己来决定；<br>（4）如果参数 size 为 0 ，malloc 的行为是标准是未定义的，取决于编译器。</p>
<p>举一个例子<br><strong>例3：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 向内存申请10个整形的空间</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">10</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">	<span class="comment">// malloc -&gt; #include&lt;stdlib.h&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//int* p = malloc(10 * sizeof(int));</span></span><br><span class="line">	<span class="comment">// 错误	 C2440	 “初始化” : 无法从“void * ”转换为“int* ”</span></span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因的一个方式</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 正常使用空间</span></span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			*(p + i) = i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 1 2 3 4 5 6 7 8 9</p>
<p>在例3中，我们如果采用 “ int* p = malloc(10 * sizeof(int)); ” 的方式来开辟空间，在大部分检测严格的编译器中，会报错，这是因为变量类型的不同，从这里我们也可以看出，malloc 开辟空间的返回值是 void* 类型；</p>
<p>上面我们也提到了：如果 malloc 开辟失败，则返回一个NULL指针，所以malloc 的返回值一定要做检查，所以我们用了一种特殊的方式来打印错误原因——“ printf(“%s\n”, strerror(errno)); ” ，这样如果开辟失败，编译器就不会报错了，而是在运行后将错误的原因打印出来。</p>
<p><strong>易错提示：</strong><br>因为我们计算机的内存也是有限的，所以我们不能为所欲为的开辟空间，当我们需要开辟的空间不够时，打印错误就会出现“Not enough space”。</p>
<h2 id="2、free"><a href="#2、free" class="headerlink" title="2、free"></a>2、free</h2><p>紧接上文，我们不能为所欲为的开辟空间，因为空间是有限的，所以应当有借有还，我们在前边向系统借用了这么多内存，当我们用完以后，我们应该把这块内存还给系统，那么怎么还呢？这里就需要用到我们的 free 函数了。</p>
<p>C语言为我们提供了另外一个函数，专门用来做动态内存的释放和回收的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">free</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span></span><br></pre></td></tr></table></figure>
<p>free函数用来释放动态开辟的内存：<br>（1）如果参数 ptr 指向的空间不是动态开辟的，那 free 函数的行为是未定义的；<br>（2）如果参数 ptr 是NULL指针，则函数什么操作都不进行。</p>
<p>先来看一个例子<br><strong>例4：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 向内存申请10个整形的空间</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">10</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">	<span class="comment">// malloc -&gt; #include&lt;stdlib.h&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//int* p = malloc(10 * sizeof(int));</span></span><br><span class="line">	<span class="comment">// 错误	 C2440	 “初始化”  :  无法从“void * ”转换为“int* ”</span></span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因的一个方式</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 正常使用空间</span></span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			*(p + i) = i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 当动态申请的空间不再使用的时候</span></span><br><span class="line">	<span class="comment">// 就应该还给操作系统</span></span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 1 2 3 4 5 6 7 8 9</p>
<p>对比例3和例4，例4只是多了两行代码：<br>free( p );<br>p = NULL;</p>
<p>有人会疑惑了，例3和例4的运行结果明明是一样的啊，那为什么我们还要多此一举，加上这两行代码呢？<br>没错看上去运行结果是一样的，但这仅仅只是对于我们代码量很少的情况下，我们申请的内存够用了，所以目的达到了；但是假设我们要做一项任务量巨大的工程的时候，我们只借不还，系统的内存在不断减少，我们还能继续写程序吗？所以应该从现在养成一个习惯，申请的内存，用完以后一定要进行 free（）操作。</p>
<p>这里有人又有疑问了，那我们用完了内存，释放了不就好了吗？为什么还要把这个指针p置为空指针呢？<br>其实当我们free（p）操作结束以后，这块空间是释放了，但是p的值并没有改变，如果有人找到了这个p，进行了破坏，我们的程序就有可能出问题，所以我们不妨主动将p置为空指针，让有非分之想的人断绝这些念想。</p>
<p>光说不练，是学习编程语言的大忌，我们趁热打铁，来做一道练习题：<br><img src="https://img-blog.csdnimg.cn/d9ed10be36be4df1bf3d25ad46c58f96.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>正确答案为：<br><strong>例5：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* src=<span class="string">&quot;hello,world&quot;</span>; </span><br><span class="line">	<span class="keyword">char</span>* dest=<span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">int</span> len=<span class="built_in">strlen</span>(src);</span><br><span class="line">	dest=(<span class="keyword">char</span>*)<span class="built_in">malloc</span>(len+<span class="number">1</span>);<span class="comment">// 要为\0分配空间</span></span><br><span class="line">	<span class="keyword">char</span>* d=dest;</span><br><span class="line">	<span class="keyword">char</span>* s=src+len<span class="number">-1</span>;<span class="comment">// 指向最后一个字符</span></span><br><span class="line">	<span class="keyword">while</span>(len--!=<span class="number">0</span>)&#123; </span><br><span class="line">		*(d++)=*(s--);<span class="comment">// 注意不要丢掉*号</span></span><br><span class="line">		*d =<span class="string">&#x27;\0&#x27;</span>;<span class="comment">// 字符串的结尾不要忘记&#x27;\0&#x27;</span></span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,dest);</span><br><span class="line">	<span class="built_in">free</span>(dest);<span class="comment">// 使用完要释放空间，避免内存泄露</span></span><br><span class="line">	dest = <span class="literal">NULL</span>; <span class="comment">// 释放不等于安全，将其置为空指针的操作不可省略</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、calloc"><a href="#3、calloc" class="headerlink" title="3、calloc"></a>3、calloc</h2><p>C语言还提供了一个函数叫 calloc ，calloc 函数也用来动态内存分配：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">calloc</span><span class="params">(<span class="keyword">size_t</span> num,<span class="keyword">size_t</span> size)</span></span></span><br></pre></td></tr></table></figure>
<p>（1）函数的功能是为 num 个大小为 size 的元素开辟一块空间，并且把这块空间的每个字节初始化为0；<br>（2）与函数 malloc 的区别只在于 calloc 会在返回地址之前把申请的空间的每个字节初始化为全0.</p>
<p>举个例子：<br><strong>例6：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">calloc</span>(<span class="number">10</span> ， <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">	<span class="comment">// calloc -&gt; #include&lt;stdlib.h&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因的一个方式</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 正常使用空间</span></span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 当动态申请的空间不再使用的时候</span></span><br><span class="line">	<span class="comment">// 就应该还给操作系统</span></span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 0 0 0 0 0 0 0 0 0</p>
<p>由此可见：calloc 函数会将动态开辟空间的每个字节初始化为0</p>
<h2 id="4、realloc"><a href="#4、realloc" class="headerlink" title="4、realloc"></a>4、realloc</h2><p>回归今天的核心问题，如果我们在使用内存的过程中需要对内存的大小进行调整怎么办呢？</p>
<p>C语言同样为我们提供了一个函数叫 realloc ，realloc 函数可以让动态内存管理更加灵活：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">realloc</span><span class="params">(<span class="keyword">void</span>* ptr, <span class="keyword">size_t</span> size)</span></span>;</span><br></pre></td></tr></table></figure>
<p>（1）ptr 是要调整的内存地址；<br>（2）size 是调整后的新大小；<br>（3）返回值为调整之后的内存起始位置；</p>
<p>举个例子：<br><strong>例7：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">20</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		*(p + i) = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span>* p2 = (<span class="keyword">int</span>*)<span class="built_in">realloc</span>(p, <span class="number">40</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">5</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		*(p + j) = j;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">5</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + j));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>0 1 2 3 4 5 6 7 8 9</p>
<p>（4）这个函数调整原内存空间大小的基础上，还会将原来内存中的数据移动到 新 的空间；</p>
<p>（5）realloc 在调整内存空间的过程中存在两种情况<br>①原有空间之后有足够大的空间<br>此时，直接在原有内存之后追加空间，原来空间的数据不发生变化。</p>
<p>②原有空间之后没有足够大的空间<br>在堆空间上另找一个合适大小的连续空间来使用，这样函数返回的是一个新的内存地址。</p>
<p>图解如下：<br><img src="https://img-blog.csdnimg.cn/cfaa97eea52d4176bc014264d339ca2f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h1 id="三、常见的动态内存错误"><a href="#三、常见的动态内存错误" class="headerlink" title="三、常见的动态内存错误"></a>三、常见的动态内存错误</h1><h2 id="1、对NULL指针的解引用操作"><a href="#1、对NULL指针的解引用操作" class="headerlink" title="1、对NULL指针的解引用操作"></a>1、对NULL指针的解引用操作</h2><p><strong>例8：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 1.对NULL指针解引用操作</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">40</span>);</span><br><span class="line">	<span class="comment">// 万一malloc失败了，p就被赋值为NULL</span></span><br><span class="line">	<span class="comment">// 不安全</span></span><br><span class="line">	<span class="comment">// 记得判断p是否为空</span></span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		*(p + i) = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例8，如果 malloc 开辟空间失败，此时 p 被赋值为NULL，而下面对于空指针进行操作， *(p + i) 始终为非法地址，我们的操作始终为非法操作，所以我们一定要在使用前记得判断p是否为空。</p>
<h2 id="2、对动态开辟内存的越界访问"><a href="#2、对动态开辟内存的越界访问" class="headerlink" title="2、对动态开辟内存的越界访问"></a>2、对动态开辟内存的越界访问</h2><p><strong>例9：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 2.对动态开辟内存的越界访问</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">40</span>);<span class="comment">// 10个int -&gt; 0-9</span></span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 越界</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		*(p + i) = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例9，我们使用 malloc 向系统申请了 10个int 类型，但是我们在后边访问了 11个int 类型，运行程序的时候就会出现假死的情况，虽然是动态内存，但是也是有边界的，一但越界访问，程序就会出现问题。</p>
<h2 id="3、对非动态开辟内存使用free释放"><a href="#3、对非动态开辟内存使用free释放" class="headerlink" title="3、对非动态开辟内存使用free释放"></a>3、对非动态开辟内存使用free释放</h2><p><strong>例10：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 3.对非动态开辟内存使用free释放</span></span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* p = &amp;a;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例10，a的空间是存放与栈区的，它并不是动态开辟的空间，free函数释放的一定是堆区上开辟的空间，如果对非动态开辟内存使用free释放，程序就会出现假死的情况。</p>
<h2 id="4、使用free释放动态开辟内存的一部分"><a href="#4、使用free释放动态开辟内存的一部分" class="headerlink" title="4、使用free释放动态开辟内存的一部分"></a>4、使用free释放动态开辟内存的一部分</h2><p><strong>例11：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 4.使用free释放动态开辟内存的一部分</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">40</span>);</span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		*p++ = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 回收空间</span></span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例11，我们有这样一个操作 “*p++ = i;” ，当这个操作结束的时候，我们的指针p指向的空间已经不是我们动态开辟的完整空间了，不仅仅局限指向末尾，只要这里的p不再指向空间的初始位置，都会导致程序的崩溃。</p>
<h2 id="5、对同一块动态内存的多次释放"><a href="#5、对同一块动态内存的多次释放" class="headerlink" title="5、对同一块动态内存的多次释放"></a>5、对同一块动态内存的多次释放</h2><p><strong>例12：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 5.对同一块动态内存的多次释放</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">40</span>);</span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 假设使用了空间</span></span><br><span class="line">	<span class="comment">// 释放</span></span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	<span class="comment">// ...很多行代码过后 </span></span><br><span class="line">	<span class="built_in">free</span>(p);<span class="comment">// 再次释放 </span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例12，我们在使用完空间后，释放了空间，在很多行代码过后，又释放了一次空间，这样程序同样会假死，那么我们如何改进呢？<br><strong>例13：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 5.对同一块动态内存的多次释放</span></span><br><span class="line">	<span class="keyword">int</span>* p = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">40</span>);</span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//可以这样</span></span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">free</span>(p);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>像例13这样，每次释放完空间，主动将p置为空指针，这样就可以有效避免了上述情况，因为我们之前提到过：<br>对于free函数：如果参数 ptr 是NULL指针，则free函数什么操作都不进行。</p>
<h2 id="6、动态开辟内存忘记释放（内存泄漏）"><a href="#6、动态开辟内存忘记释放（内存泄漏）" class="headerlink" title="6、动态开辟内存忘记释放（内存泄漏）"></a>6、动态开辟内存忘记释放（内存泄漏）</h2><p><strong>例14：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 6.动态开辟内存忘记释放（内存泄漏）</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">malloc</span>(<span class="number">1</span>);<span class="comment">//警告	C6031	返回值被忽略 : “malloc”。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于例14，当我们开辟内存忘记释放的时候，就会造成内存泄漏。我们的电脑可能就会出现死机的情况，遇到这种情况我们一般都会重启，但是当我们写程序达到几万行的时候，出现了这种问题，那将是一个十分恐怖的事情。</p>
<h1 id="四、几个经典的笔试题"><a href="#四、几个经典的笔试题" class="headerlink" title="四、几个经典的笔试题"></a>四、几个经典的笔试题</h1><h2 id="1、题目1"><a href="#1、题目1" class="headerlink" title="1、题目1"></a>1、题目1</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetMemory</span><span class="params">(<span class="keyword">char</span>* p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	p = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="literal">NULL</span>;</span><br><span class="line">	GetMemory(str);</span><br><span class="line">	<span class="built_in">strcpy</span>(str, <span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请问：运行 Test 函数会有什么样的结果？<br>答案为：程序崩溃</p>
<p>对于本题，很多人的注意力会集中于 “printf(str);” ，实际上这里并没有问题，它等价于 “printf(“%s\n”,str);” 。</p>
<p><strong>解析代码：</strong><br>看到 “GetMemory(str);”  ，我们在这里传递的是 <strong>str 本身的值</strong>，而不是 str 的地址，进入 GetMemory 函数以后，我们在堆上开辟了100个空间，我们将这些空间放置在 p 中，这里的 p 作为一个<strong>形参变量</strong>，在 GetMemory 函数结束以后，这个 p 就销毁了， 实际上 <strong>str 仍然是NULL</strong>，而接下来我们想要将 “hello world”  copy 到 str 中去，但是 str 作为NULL，它并没有指向一个有效的空间，进行操作的时候，无法避免的进行了非法访问，虽然后边的 printf  操作没有问题，但是程序在 strcpy 操作时就已经崩溃了。</p>
<p><strong>总结：</strong><br>（1）运行代码程序会出现崩溃现象；<br>（2）程序存在内存泄漏问题：<br>str 以值传递的形式给 p<br>p 是 GetMemory 函数的形参，只在函数内有效<br>等 GetMemory 函数返回之后，动态开辟内存尚未释放<br>并且无法找到，所以会造成内存泄漏</p>
<h2 id="2、题目2"><a href="#2、题目2" class="headerlink" title="2、题目2"></a>2、题目2</h2><p>“返回栈空间地址问题”</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span>* <span class="title">GetMemory</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> p[] = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="literal">NULL</span>;</span><br><span class="line">	str = GetMemory();</span><br><span class="line">	<span class="built_in">printf</span>(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请问：运行 Test 函数会有什么样的结果？<br>答案为：随机值（或者崩溃）</p>
<p><strong>解析代码：</strong><br>看到 “str = GetMemory();” ，进入 GetMemory 函数的时候，p[] 这个数组是GetMemory 函数内的形参，它申请了一个空间，这个空间只在 GetMemory 函数内存在，在 GetMemory 函数结束的时候，的确将 p 的地址返回了，放置在 str 中，但是当 GetMemory 调用完成之后，p 这个数组开辟的空间返还给操作系统了，这个空间里存放的值，我们是不清楚的，接下来 “printf(str);”<br>打印出来的值我们不清楚，所以结果为随机值。</p>
<h2 id="3、题目3"><a href="#3、题目3" class="headerlink" title="3、题目3"></a>3、题目3</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">GetMemory</span><span class="params">(<span class="keyword">char</span>** p, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	*p = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = <span class="literal">NULL</span>;</span><br><span class="line">	GetMemory(&amp;str, <span class="number">100</span>);</span><br><span class="line">	<span class="built_in">strcpy</span>(str, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请问：运行 Test 函数会有什么样的结果？<br>答案为：<br>（1）输出hello<br>（2）但是有内存泄漏</p>
<p><strong>解析代码：</strong><br>看到 “GetMemory(&amp;str, 100);” ，将 str的地址传入 GetMemory 函数，用二级指针p 来接收，那么 *p 指向的地址即为 str ，然后将 “hello” copy 到 str 当中，再打印出来，这些操作都没有问题，但是当我们使用完 str 以后，忘记释放动态开辟的内存，导致了内存泄漏。</p>
<h2 id="4、题目4"><a href="#4、题目4" class="headerlink" title="4、题目4"></a>4、题目4</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* str = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line">	<span class="built_in">strcpy</span>(str, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">	<span class="built_in">free</span>(str);</span><br><span class="line">	<span class="keyword">if</span> (str != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">strcpy</span>(str, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请问：运行 Test 函数会有什么样的结果？<br>答案为：<br>（1）world<br>（2）非法访问内存（篡改动态内存区的内容，后果难以预测，非常危险）</p>
<p><strong>解析代码：</strong><br>首先，我们向系统申请了100个字节，地址存放在 str 中；然后，我们把 “hello” copy 到 str 当中去；接下来，我们释放了这块空间，之后， str 指向的这块空间已经还给操作系统了；然后，进行判断： str 是否为空指针，虽然之前我们对申请的动态内存进行了释放，但是 str 的值并没有改变，仍然是 “hello”，所以它不为空指针；进入if语句后，将 “world” copy 到 str 当中，world 就把 hello 给覆盖了；所以打印 str 以后结果为 world。</p>
<p>虽然打印了world，但是这个程序依然出了问题，对于 “free(str);” 操作：已经把空间释放掉了，这表明这块空间已经不属于我们了，我们已经不能再使用这块空间了，但是接下来我们还将 world 放进去，并且打印，这就属于非法访问内存了。</p>
<p><strong>提示：free（p）和p=NULL一定要连贯使用！</strong></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>关于动态内存分配的讲解就到此结束了，动态内存分配其实并不困难，更多的还是一些概念的背诵，只要我们牢记这些易错点，拿捏起来，还是轻轻松松的！加油，冲冲冲！<br>ps：动态内存分配拖了蛮久的，关于文件的博客，博主会快马加鞭的肝的（doge）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E8%AF%A6%E8%A7%A3/" data-id="claf3rtim0003bovl03sgev1d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言文件操作详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time datetime="2022-11-13T06:48:18.121Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>C语言中，文件，是程序设计中的一个重要概念。操作系统是以文件为单位对数据进行管理的，虽然也许日后在工作中运用到文件的地方不会很多，但是文件还是C语言一个不可或缺的部分。好了，废话不多说，我们直接进入正题。</p>
<h1 id="一、什么是文件"><a href="#一、什么是文件" class="headerlink" title="一、什么是文件"></a>一、什么是文件</h1><p>概念：磁盘上的文件是文件。</p>
<p>但在程序设计中，我们一般读的文件有两种：程序文件，数据文件。</p>
<p><strong>程序文件：</strong></p>
<blockquote>
<p>包括源程序文件（后缀为.c），目标文件（windows环境后缀为.obj），可执行程序（windows环境后缀为.exe）。</p>
</blockquote>
<p><strong>数据文件：</strong></p>
<blockquote>
<p>文件的内容不一定是程序，而是程序运行时读写的数据，比如程序运行需要从中读取数据的文件，或者输出内容的文件。</p>
</blockquote>
<p>今天我们讨论的是数据文件。</p>
<p>在此之前我们处理数据的输入输出都是以终端为对象的，即从终端的键盘输入数据，运行结果显示到显示器上。</p>
<p>其实有时候，我们会把信息输出到磁盘上，当需要的时候再从磁盘上把数据读取到内存中使用，这里处理的就是磁盘上的文件。</p>
<h1 id="二、文件名"><a href="#二、文件名" class="headerlink" title="二、文件名"></a>二、文件名</h1><p>一个文件要有一个唯一的文件标识，以使用户识别和引用。</p>
<p>文件名包含3部分：<strong>文件路径</strong> + <strong>文件名主干</strong> + <strong>文件后缀</strong><br>例如：</p>
<blockquote>
<p>c:\code\test.txt</p>
</blockquote>
<p>为了方便起见，文件标识常被称为<strong>文件名</strong>。</p>
<h1 id="三、文件类型"><a href="#三、文件类型" class="headerlink" title="三、文件类型"></a>三、文件类型</h1><p>根据数据的组织形式，数据文件被称为<strong>文本文件</strong>或者<strong>二进制文件</strong>。</p>
<p>数据在内存中以二进制的形式存储，如果不加转换的输出到外存，就是<strong>二进制文件</strong>。</p>
<p>如果要求在外存上以ASCⅡ码形式存储，则需要在存储前转换，以ASCⅡ字符的形式存储的文件就是<strong>文本文件</strong>。</p>
<p>那么一个数据在内存中是怎么存储的呢？<br>字符一律以ASCⅡ形式存储，数值型数据既可以用ASCⅡ形式存储，也可以使用二进制形式存储。</p>
<p>如有整数10000：</p>
<h2 id="1、文字说明"><a href="#1、文字说明" class="headerlink" title="1、文字说明"></a>1、文字说明</h2><p>如果以ASCⅡ码的形式输出到磁盘，则磁盘中占用5个字节（每个字符占一个字节），<br>而二进制形式输出，则在磁盘上只占4个字节（10000是整形，不加以任何转换，所以占4个字节）。</p>
<h2 id="2、图像解释"><a href="#2、图像解释" class="headerlink" title="2、图像解释"></a>2、图像解释</h2><p><img src="https://img-blog.csdnimg.cn/c2334eda349745cfad00a59c18f36de7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="3、代码解释"><a href="#3、代码解释" class="headerlink" title="3、代码解释"></a>3、代码解释</h2><p><strong>例1：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10000</span>;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;wb&quot;</span>);<span class="comment">// fopen:创建    </span></span><br><span class="line">	<span class="comment">//&quot;wb&quot; -&gt; write binary以二进制的形式写 </span></span><br><span class="line">	fwrite(&amp;a, <span class="number">4</span>, <span class="number">1</span>, pf);<span class="comment">// 二进制的形式写到文件中</span></span><br><span class="line">	fclose(pf);<span class="comment">// 关闭文件 </span></span><br><span class="line">	pf = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过这样一个代码，我们能看到在文件夹下出现了这样一个文件：<br><img src="https://img-blog.csdnimg.cn/64b08d1b8f50483aa82c40aac22d2947.png" alt="在这里插入图片描述"><br>如果我们直接打开，里边是所谓的乱码，我们看不懂，那怎么能看懂呢？<br>这里博主使用的编译器是：Visual Studio 2019</p>
<p>①先将 test.txt 这个文件添加到工程当中来：<br><img src="https://img-blog.csdnimg.cn/05525532b167414b89f2b6da38543359.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>②选择打开方式 -&gt; 二进制的方式打开：<br><img src="https://img-blog.csdnimg.cn/307a0347ca124f50ba781c713d67ddd7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/f7618f98afd24738891b6fb8cee20195.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>③打开文件 test.txt ：<br><img src="https://img-blog.csdnimg.cn/fbf203062b44474b889c0b2eae46f4db.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_18,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>我们看到的是：10 27 00 00，如果我们要放在内存中读取，应该逆序读取，因为这是小端存储，得到：00 00 27 10</p>
<p>然后我们通过计算发现，这个十六进制的数字转换为十进制，刚好就是10000.</p>
<h1 id="四、文件缓冲区"><a href="#四、文件缓冲区" class="headerlink" title="四、文件缓冲区"></a>四、文件缓冲区</h1><p>ANSIC 标准采用“<strong>缓冲文件系统</strong>”处理的数据文件，所谓缓冲文件系统是指系统自动地在内存中为程序中每一个正在使用的文件开辟一块“<strong>文件缓冲区</strong>”。</p>
<p>从内存向磁盘输出数据会先送到内存中的缓冲区，装满缓冲区后才一起送到磁盘上。</p>
<p>如果从磁盘向计算机读入数据，则从磁盘文件中读取数据输入到内存缓冲区（充满缓冲区），然后再从缓冲区逐个地将数据送到程序数据区（程序变量等）。</p>
<p>缓冲区的大小是根据C编译系统决定的。</p>
<p>图解如下：<br><img src="https://img-blog.csdnimg.cn/069dfabee7c54aa7836a83285cc6494a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h1 id="五、文件指针"><a href="#五、文件指针" class="headerlink" title="五、文件指针"></a>五、文件指针</h1><p>缓冲文件系统中，关键的概念是“<strong>文件类型指针</strong>”，简称“<strong>文件指针</strong>”。</p>
<p>每个被使用的文件都在内存中开辟了一个相应的文件信息区，用来存放文件的相关信息（如文件的名字，文件状态及文件当前的位置等）。这些信息是保存在一个结构体变量中的，该结构体类型是有系统声明的，取名<strong>FILE</strong>。</p>
<p>可以在 stdio.h (位于 visual studio 安装目录下的 include 文件夹下)头文件中查看 FILE 结构体的定义，如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">iobuf</span> &#123;</span>  </span><br><span class="line">        <span class="keyword">char</span> *_ptr;  </span><br><span class="line">        <span class="keyword">int</span>   _cnt;  </span><br><span class="line">        <span class="keyword">char</span> *_base;  </span><br><span class="line">        <span class="keyword">int</span>   _flag;  </span><br><span class="line">        <span class="keyword">int</span>   _file;  </span><br><span class="line">        <span class="keyword">int</span>   _charbuf;  </span><br><span class="line">        <span class="keyword">int</span>   _bufsiz;  </span><br><span class="line">        <span class="keyword">char</span> *_tmpfname;  </span><br><span class="line">        &#125;;  </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">iobuf</span> <span class="title">FILE</span>;</span> </span><br></pre></td></tr></table></figure>
<p>不同的编译器的 FILE 类型包含的内容不完全相同，但是大同小异。</p>
<p>每当打开一个文件的时候，系统会根据文件的情况自动创建一个FILE结构的变量，并填充其中的信息，使用者不必关心细节。</p>
<p>一般都是通过一个 FILE 的指针来维护这个 FILE 结构的变量，这样使用起来更加方便。</p>
<p>下面我们可以创建一个 FILE* 的指针变量：</p>
<blockquote>
<p>FILE* pf;// 文件指针变量</p>
</blockquote>
<p>定义 pf 是一个指向 FILE 类型数据的指针变量，可以使pf指向某个文件信息区（是一个结构体变量）。通过该文件信息区中的信息就能访问该文件。也就是说，<strong>通过文件指针变量就能找到与它关联的文件</strong>。</p>
<p>如图：<br><img src="https://img-blog.csdnimg.cn/624389cd47fd4e55a18899c6e31b2f1d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h1 id="六、文件的打开和关闭"><a href="#六、文件的打开和关闭" class="headerlink" title="六、文件的打开和关闭"></a>六、文件的打开和关闭</h1><p>文件在读写之前应该先<strong>打开文件</strong>，在使用结束后应该<strong>关闭文件</strong>。</p>
<p>在编写程序的时候，在打开文件的同时，都会返回一个 FILE* 的指针变量指向该文件，也相当于建立了指针和文件的关系。</p>
<p>ANSIC 规定使用 fopen 函数来打开文件，fclose 函数来关闭文件。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FILE * <span class="title">fopen</span> <span class="params">( <span class="keyword">const</span> <span class="keyword">char</span> * filename, <span class="keyword">const</span> <span class="keyword">char</span> * node)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fclose</span> <span class="params">( FILE * stream )</span></span>;</span><br></pre></td></tr></table></figure>
<p>打开方式如下：<br>| 文件的使用方式 | 含义 | 如果指定文件不存在 |<br>|–|–|–|<br>| “r”（只读） | 为了输入数据，打开一个已经存在的文本文件 | 出错 |<br>| “w”（只写） | 为了输出数据，打开一个文本文件 | 建立一个新的文件 |<br>| “a”（追加） | 向文本文件尾添加数据 | 出错 |<br>| “rb”（只读） | 为了输入数据，打开一个二进制文件 | 出错 |<br>| “wb”（只写） | 为了输出数据，打开一个二进制文件 | 建立一个新的文件 |<br>| “ab”（追加） | 向一个二进制文件尾添加数据 | 出错 |<br>| “r+”（读写） | 为了读和写，打开一个文本文件 | 出错 |<br>| “w+”（读写）| 为了读和写，建立一个新的文件 | 建立一个新的文件 |<br>| “a+”（读写） | 打开一个文件，在文件尾进行读写 | 建立一个新的文件 |<br>| “rb+”（读写） | 为了读和写，打开一个二进制文件 | 出错 |<br>| “wb+”（读写） | 为了读和写，新建一个新的二进制文件 | 建立一个新的文件 |<br>| “ab+”（读写） | 打开一个二进制文件，在文件尾进行读和写 | 建立一个新的文件 |</p>
<h2 id="1、文件的打开"><a href="#1、文件的打开" class="headerlink" title="1、文件的打开"></a>1、文件的打开</h2><h3 id="（1）代码示例"><a href="#（1）代码示例" class="headerlink" title="（1）代码示例"></a>（1）代码示例</h3><p><strong>例2：打开test.txt文件</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 打开文件test.txt</span></span><br><span class="line">	<span class="comment">// fopen(&quot;test.txt&quot;, &quot;r&quot;);</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 相等路径：</span></span><br><span class="line">	<span class="comment">//  ..表示上一级路径</span></span><br><span class="line">	<span class="comment">//  .表示当前路径</span></span><br><span class="line">	<span class="comment">// fopen(&quot;..\\test.txt&quot;,&quot;r&quot;);</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 绝对路径：</span></span><br><span class="line">	<span class="comment">// fopen(&quot;D:\\c语言\\文件操作详解\\文件操作详解\\test.txt&quot;, &quot;r&quot;);</span></span><br><span class="line">	<span class="comment">// 符号“ \ ”可能会进行转义，所以采用“  \\ ”的形式</span></span><br><span class="line"></span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）图解说明"><a href="#（2）图解说明" class="headerlink" title="（2）图解说明"></a>（2）图解说明</h3><p><img src="https://img-blog.csdnimg.cn/9cefbb78f8e844458ee898948a966670.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h3 id="（3）易错点"><a href="#（3）易错点" class="headerlink" title="（3）易错点"></a>（3）易错点</h3><p>同样的，文件的打开也可能会失败，当打开失败时，pf 这个指针为 NULL，并没有创建 FILE 结构体成功，所以我们在使用时，应该判断打开是否成功。</p>
<p>举个例子<br><strong>例3：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pf == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里用到了之前我们提到的 strerror(errno) 来打印错误。</p>
<h2 id="2、文件的关闭"><a href="#2、文件的关闭" class="headerlink" title="2、文件的关闭"></a>2、文件的关闭</h2><h3 id="（1）代码示例-1"><a href="#（1）代码示例-1" class="headerlink" title="（1）代码示例"></a>（1）代码示例</h3><p><strong>例4：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pf == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打开成功</span></span><br><span class="line">		<span class="built_in">fputs</span>(<span class="string">&quot;fopen example&quot;</span>, pf);</span><br><span class="line">		<span class="comment">// 读文件</span></span><br><span class="line">		<span class="comment">// 关闭文件</span></span><br><span class="line">		fclose(pf);</span><br><span class="line">		pf = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>（成功）（文件存在时）<br>No such file or directory（文件不存在时）</p>
<h3 id="（2）易错点"><a href="#（2）易错点" class="headerlink" title="（2）易错点"></a>（2）易错点</h3><p>对于例4：fclose 进行关闭文件时，实际上是释放了该文件的文件信息区的空间，类似于 free 函数，但是指针 pf 并未置于0，所以存在风险。</p>
<p>所以，对于代码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fclose(pf);</span><br><span class="line">pf = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>一定要<strong>连用</strong>。</p>
<h1 id="七、文件的顺序读写"><a href="#七、文件的顺序读写" class="headerlink" title="七、文件的顺序读写"></a>七、文件的顺序读写</h1><table>
<thead>
<tr>
<th>功能</th>
<th>函数名</th>
<th>适用于</th>
</tr>
</thead>
<tbody><tr>
<td>字符输入函数</td>
<td>fgetc</td>
<td>所有输入流</td>
</tr>
<tr>
<td>字符输出函数</td>
<td>fputc</td>
<td>所有输出流</td>
</tr>
<tr>
<td>文本行输入函数</td>
<td>fgets</td>
<td>所有输入流</td>
</tr>
<tr>
<td>文本行输出函数</td>
<td>fputs</td>
<td>所有输出流</td>
</tr>
<tr>
<td>格式化输入函数</td>
<td>fscanf</td>
<td>所有输入流</td>
</tr>
<tr>
<td>格式化输出函数</td>
<td>fprintf</td>
<td>所有输出流</td>
</tr>
<tr>
<td>二进制输入</td>
<td>fread</td>
<td>文件</td>
</tr>
<tr>
<td>二进制输出</td>
<td>fwrite</td>
<td>文件</td>
</tr>
</tbody></table>
<h2 id="1、关于流"><a href="#1、关于流" class="headerlink" title="1、关于流"></a>1、关于流</h2><p>我们通常的操作，都是从键盘输入，输出到屏幕，而这里的键盘和屏幕都是外部设备。</p>
<blockquote>
<p>键盘 - 标准输入设备 - stdin<br>屏幕 - 标准输出设备 - stdout<br>是一个程序默认打开的两个流设备</p>
</blockquote>
<p>当程序运行时，会默认打开三个流设备:</p>
<blockquote>
<p>stdin （类型）-&gt; FILE*<br>stdout （类型）-&gt; FILE*<br>stderr （类型）-&gt; FILE*</p>
</blockquote>
<h2 id="2、fputc-函数（写文件）"><a href="#2、fputc-函数（写文件）" class="headerlink" title="2、fputc 函数（写文件）"></a>2、fputc 函数（写文件）</h2><p>我们现在学会了创建文件，打开文件，那么我们要如何写文件呢？</p>
<p>C语言给了我们这样一个函数： fputc 来完成写文件的操作，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputc</span> <span class="params">(<span class="keyword">int</span> c, FILE *fp)</span></span>;</span><br></pre></td></tr></table></figure>

<p>操作如下：<br><strong>例5：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 写文件</span></span><br><span class="line">	fputc(<span class="string">&#x27;x&#x27;</span>, pfWrite);</span><br><span class="line">	fputc(<span class="string">&#x27;i&#x27;</span>, pfWrite);</span><br><span class="line">	fputc(<span class="string">&#x27;y&#x27;</span>, pfWrite);</span><br><span class="line">	fputc(<span class="string">&#x27;o&#x27;</span>, pfWrite);</span><br><span class="line">	fputc(<span class="string">&#x27;u&#x27;</span>, pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过例5这样一个操作，我们将 “xiyou” 写进了 test.txt 这个文件当中，因为 test.txt 这个文件之前并不存在，所以在使用 “w” 的时候，会新建一个名为 “test.txt” 的文件，然后再把 “xiyou” 写入。</p>
<p>用记事本打开这个文件，就会看见如下情况：<br><img src="https://img-blog.csdnimg.cn/f229a7780e024dfe9e6f01d11cee6f42.png" alt="在这里插入图片描述"><br>这样我们就完成了一次简单的写文件。</p>
<h2 id="3、fgetc-函数（读文件）"><a href="#3、fgetc-函数（读文件）" class="headerlink" title="3、fgetc 函数（读文件）"></a>3、fgetc 函数（读文件）</h2><p>我们刚刚学习了如何写文件，那写完文件以后，我们要如何读取呢？</p>
<p>C语言同样给了我们一个函数： fgetc 来完成文件的读取，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fgetc</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>操作如下：<br><strong>例6：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 读文件</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, fgetc(pfRead));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, fgetc(pfRead));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, fgetc(pfRead));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, fgetc(pfRead));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, fgetc(pfRead));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：xiyou</p>
<p>在读文件的时候，多次使用 fgetc(pfRead) 不用+1，它会默认到下一位。</p>
<h2 id="4、-fgetc-和-fputc-的标准输入输出流"><a href="#4、-fgetc-和-fputc-的标准输入输出流" class="headerlink" title="4、 fgetc 和 fputc 的标准输入输出流"></a>4、 fgetc 和 fputc 的标准输入输出流</h2><p><strong>例7：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = fgetc(<span class="built_in">stdin</span>);</span><br><span class="line">	<span class="comment">// 从标准输入流里读信息</span></span><br><span class="line">	fputc(a, <span class="built_in">stdout</span>);</span><br><span class="line">	<span class="comment">// 将信息写到标准输出流中</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们输入：h<br>运行结果为：h</p>
<p>例7就达到了 从键盘读信息，输出到屏幕上的一个结果。</p>
<p>之前我们也使用过 fgetc 和 fputc 这两个函数，当时我们是输入和输出到文件上，所以说这两个函数是分别适用于所有输入流和输出流的。</p>
<h2 id="5、fputs-函数（写文件）"><a href="#5、fputs-函数（写文件）" class="headerlink" title="5、fputs 函数（写文件）"></a>5、fputs 函数（写文件）</h2><p>使用 fputc 函数的确可以输入文件，但是一次只能写一个字符，我们能不能多写一点呢？</p>
<p>C语言给我们提供了 fputs 函数，来输入文本行，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputs</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>我们来举一个例子：<br><strong>例8：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 写文件</span></span><br><span class="line">	<span class="built_in">fputs</span>(<span class="string">&quot;hello&quot;</span>, pfWrite);</span><br><span class="line">	<span class="built_in">fputs</span>(<span class="string">&quot;world&quot;</span>, pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用记事本打开 test.txt 这个文件，如图：<br><img src="https://img-blog.csdnimg.cn/7a5b7e31ab0c4046b17601fb9dd7d1b8.png" alt="在这里插入图片描述"><br>这里有人就会有疑问了，为什么这里没有换行，这是因为我们直接输入的是hello 以及 world ，它们并没有 “\n”，如果需要换行，需要我们自己加上 “\n”。</p>
<h2 id="6、fgets-函数（读文件）"><a href="#6、fgets-函数（读文件）" class="headerlink" title="6、fgets 函数（读文件）"></a>6、fgets 函数（读文件）</h2><p>使用 fgetc 函数的确可以读取文件，但是一次只能读一个字符，我们能不能多读一点呢？</p>
<p>C语言给我们提供了 fgets 函数，来读取文本行，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">fgets</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">int</span> n, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>依然是 test.txt 这个文件，我们用记事本打开之后加上hello，如图所示：<br><img src="https://img-blog.csdnimg.cn/459b07f7172e46ed97c21e23885ab0e1.png" alt="在这里插入图片描述"><br>然后进行文本行的读取：<br><strong>例9：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 读文件</span></span><br><span class="line">	fgets(buf, <span class="number">1024</span>, pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, buf);</span><br><span class="line">	</span><br><span class="line">	fgets(buf, <span class="number">1024</span>, pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, buf);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>hello<br>xiyou</p>
<p>注意：<br>①这里的 “fgets(buf, 1024, pfRead);” 操作多次使用时，和 fgetc 函数一样，会自动+1，读取下一行。<br>②文本内的代码实际上是这样的：</p>
<blockquote>
<p>hello\n<br>xiyou\n</p>
</blockquote>
<p>我们在读取的时候把 “\n” 也读进了buf，所以在打印的时候不需要再进行换行操作。</p>
<h2 id="7、-fgets-和-fputs-的标准输入输出流"><a href="#7、-fgets-和-fputs-的标准输入输出流" class="headerlink" title="7、 fgets 和 fputs 的标准输入输出流"></a>7、 fgets 和 fputs 的标准输入输出流</h2><p><strong>例10：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 从键盘读取一行文本信息</span></span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	fgets(buf, <span class="number">1024</span>, <span class="built_in">stdin</span>);<span class="comment">// 从标准输入流读取</span></span><br><span class="line">	<span class="built_in">fputs</span>(buf, <span class="built_in">stdout</span>);<span class="comment">// 输出到标准输出流</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们输入：helloworld<br>运行结果为：helloworld</p>
<h2 id="8、fprintf-函数（写文件）"><a href="#8、fprintf-函数（写文件）" class="headerlink" title="8、fprintf 函数（写文件）"></a>8、fprintf 函数（写文件）</h2><p>仅仅使用 fgetc 以及 fgets 函数，在解决实际问题时，是远远不够的，在遇到结构体等问题时，我们就需要进行格式化。</p>
<p>C语言为我们提供了 fprintf 函数来格式化输出，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fprintf</span> <span class="params">(FILE* stream, <span class="keyword">const</span> <span class="keyword">char</span>*format[,argument] …)</span></span></span><br></pre></td></tr></table></figure>
<p>举一个例子：<br><strong>例11：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">float</span> score;</span><br><span class="line">	<span class="keyword">char</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; <span class="number">1</span>,<span class="number">99.5f</span>,<span class="string">&quot;xiyou&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 格式化的形式写文件</span></span><br><span class="line">	<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;%d %f %s&quot;</span>, s.n, s.score, s.arr);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用记事本打开 test.txt 这个文件，如图：<br><img src="https://img-blog.csdnimg.cn/b603b70bc8874be284e66b74bbc43fe2.png" alt="在这里插入图片描述"></p>
<h2 id="9、fscanf-函数（读文件）"><a href="#9、fscanf-函数（读文件）" class="headerlink" title="9、fscanf 函数（读文件）"></a>9、fscanf 函数（读文件）</h2><p>仅仅使用 fputc 以及 fputs 函数，在解决实际问题时，是远远不够的，在遇到结构体等问题时，我们就需要进行格式化。</p>
<p>C语言为我们提供了 fscanf 函数来格式化输入，其一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fscanf</span><span class="params">(FILE *stream, <span class="keyword">char</span> *format[,argument …])</span></span>;</span><br></pre></td></tr></table></figure>
<p>举一个例子：<br><strong>例12：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">float</span> score;</span><br><span class="line">	<span class="keyword">char</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 格式化的形式输入文件</span></span><br><span class="line">	<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%d %f %s&quot;</span>, &amp;(s.n), &amp;(s.score), s.arr);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %f %s\n&quot;</span>, s.n, s.score, s.arr);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1 99.500000 xiyou</p>
<h2 id="10、-fscanf-和-fprintf-的标准输入输出流"><a href="#10、-fscanf-和-fprintf-的标准输入输出流" class="headerlink" title="10、 fscanf 和 fprintf 的标准输入输出流"></a>10、 fscanf 和 fprintf 的标准输入输出流</h2><p><strong>例13：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">float</span> score;</span><br><span class="line">	<span class="keyword">char</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">fscanf</span>(<span class="built_in">stdin</span>, <span class="string">&quot;%d %f %s&quot;</span>, &amp;(s.n), &amp;(s.score), s.arr);</span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stdout</span>, <span class="string">&quot;%d %f %s&quot;</span>, s.n, s.score, s.arr);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们输入：1 99.5 xiyou<br>运行结果为：1 99.500000 xiyou</p>
<h2 id="11、进行一个比较"><a href="#11、进行一个比较" class="headerlink" title="11、进行一个比较"></a>11、进行一个比较</h2><p>scanf/printf </p>
<blockquote>
<p>是针对标准输入流/标准输出流的 格式化输入/输出语句</p>
</blockquote>
<p>fscanf/fprintf</p>
<blockquote>
<p>是针对所有输入流/所有输出流的 格式化输入/输出语句</p>
</blockquote>
<p>sscanf/sprintf</p>
<blockquote>
<p>sscanf 是从字符串中读取格式化的数据<br>sprintf 是把格式化的数据输出成（储存到）字符串</p>
</blockquote>
<h3 id="（1）sprintf-函数"><a href="#（1）sprintf-函数" class="headerlink" title="（1）sprintf 函数"></a>（1）sprintf 函数</h3><p>作用：把格式化的数据写入某个字符串中<br>一般形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sprintf</span><span class="params">(<span class="keyword">char</span> *<span class="built_in">string</span>, <span class="keyword">char</span> *format [,argument,...])</span></span>;</span><br></pre></td></tr></table></figure>

<p>举个例子：<br><strong>例14：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">float</span> score;</span><br><span class="line">	<span class="keyword">char</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; <span class="number">1</span>,<span class="number">99.5f</span>,<span class="string">&quot;xiyou&quot;</span> &#125;;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="comment">// 把格式化的数据转换成字符串储存到buf</span></span><br><span class="line">	<span class="built_in">sprintf</span>(buf, <span class="string">&quot;%d %f %s&quot;</span>, s.n, s.score, s.arr);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, buf);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1 99.500000 xiyou</p>
<p><strong>注意：</strong>这里的结果为字符串形式！</p>
<h3 id="（2）sscanf-函数"><a href="#（2）sscanf-函数" class="headerlink" title="（2）sscanf 函数"></a>（2）sscanf 函数</h3><p>作用：读取格式化的字符串中的数据。<br>一般形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sscanf</span><span class="params">(<span class="keyword">char</span> *buffer, <span class="keyword">char</span> *format [,argument....])</span></span>; </span><br></pre></td></tr></table></figure>

<p>举个例子：<br><strong>例15：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">float</span> score;</span><br><span class="line">	<span class="keyword">char</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; <span class="number">1</span>,<span class="number">99.5f</span>,<span class="string">&quot;xiyou&quot;</span> &#125;;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">tmp</span> =</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	<span class="comment">// 把格式化的数据转换成字符串储存到buf</span></span><br><span class="line">	<span class="built_in">sprintf</span>(buf, <span class="string">&quot;%d %f %s&quot;</span>, s.n, s.score, s.arr);</span><br><span class="line">	<span class="comment">// 从buf中读取格式化的数据到tmp中</span></span><br><span class="line">	<span class="built_in">sscanf</span>(buf, <span class="string">&quot;%d %f %s&quot;</span>, &amp;(tmp.n), &amp;(tmp.score), tmp.arr);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %f %s\n&quot;</span>, tmp.n, tmp.score, tmp.arr);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：1 99.500000 xiyou</p>
<h1 id="八、文件的随机读写"><a href="#八、文件的随机读写" class="headerlink" title="八、文件的随机读写"></a>八、文件的随机读写</h1><h2 id="1、fseek-函数"><a href="#1、fseek-函数" class="headerlink" title="1、fseek 函数"></a>1、fseek 函数</h2><blockquote>
<p>根据文件指针的位置和偏移量来定位文件指针</p>
</blockquote>
<p>其一般形式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fseek</span><span class="params">(FILE *stream, <span class="keyword">long</span> offset, <span class="keyword">int</span> origin)</span></span>;</span><br></pre></td></tr></table></figure>
<p>第一个参数 stream 为文件指针<br>第二个参数 offset 为偏移量，正数表示正向偏移，负数表示负向偏移<br>第三个参数 origin 设定从文件的哪里开始偏移,可能取值为：<br>SEEK_CUR、 SEEK_END 或 SEEK_SET<br>SEEK_SET： 文件开头<br>SEEK_CUR： 当前位置<br>SEEK_END： 文件结尾</p>
<p>我们来举一个例子<br><strong>例16：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 1、写文件</span></span><br><span class="line">	<span class="built_in">fputs</span>(<span class="string">&quot;welcome to xiyou&quot;</span>, pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 2、定位文件指针</span></span><br><span class="line">	fseek(pfRead, <span class="number">2</span>, SEEK_CUR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3、读取文件</span></span><br><span class="line">	<span class="keyword">int</span> ch = fgetc(pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, ch);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：l</p>
<p>解析：我们先用 pfWrite 进行写文件，用到了我们之前学到的 fgets 函数，写入 “welcome to xiyou” ；然后我们用 pfRead 进行读文件，先通过 fseek 定位到文件指针，当前位置为起始位置即 “w”，偏移量为 2，所以定位到 “l”，然后通过我们之前学到的 fgetc 来写入当前字符，最后通过 ch 这个变量来打印 fgetc 读取的结果。<br><strong>注意：fseek（）函数设置偏移量的时候，要注意不能超出文件的范围！</strong></p>
<h2 id="2、ftell-函数"><a href="#2、ftell-函数" class="headerlink" title="2、ftell 函数"></a>2、ftell 函数</h2><blockquote>
<p>返回文件指针相对于起始位置的偏移量</p>
</blockquote>
<p>其一般形式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">int</span> <span class="title">ftell</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>
<p>我们来举一个例子：<br><strong>例17：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 1、写文件</span></span><br><span class="line">	<span class="built_in">fputs</span>(<span class="string">&quot;welcome to xiyou&quot;</span>, pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 2、定位文件指针</span></span><br><span class="line">	fseek(pfRead, <span class="number">-2</span>, SEEK_END);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> pos = ftell(pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, pos);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：14</p>
<p>解析：我们先用 pfWrite 进行写文件，用到了我们之前学到的 fgets 函数，写入 “welcome to xiyou” ；然后我们用 pfRead 进行读文件，通过 fseek 定位文件指针，文件末尾即 “o”，偏移量为 -2，定位到 “y”，然后使用 ftell 函数，它的返回值为 “文件指针相对于起始位置的偏移量”，又是整形，所以用变量 pos 来打印，“y” 相对 “w” 的偏移量为 14，所以返回14。</p>
<h2 id="3、rewind-函数"><a href="#3、rewind-函数" class="headerlink" title="3、rewind 函数"></a>3、rewind 函数</h2><blockquote>
<p>让文件指针的位置回到文件的起始位置</p>
</blockquote>
<p>其一般形式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rewind</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>我们来举一个例子：<br><strong>例18：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 1、写文件</span></span><br><span class="line">	<span class="built_in">fputs</span>(<span class="string">&quot;welcome to xiyou&quot;</span>, pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line">	pfWrite = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 2、定位文件指针</span></span><br><span class="line">	fseek(pfRead, <span class="number">9</span>, SEEK_CUR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 打印</span></span><br><span class="line">	<span class="keyword">int</span> ch = fgetc(pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, ch);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回起始位置</span></span><br><span class="line">	rewind(pfRead);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 打印</span></span><br><span class="line">	ch = fgetc(pfRead);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, ch);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>o<br>w</p>
<p>解析：我们先定位到 “o” ，读取打印，然后使用 rewind 函数，再次读取打印，发现第二次打印的结果为 “w” 说明 rewind 使得文件指针的当前位置为起始位置了。</p>
<h1 id="九、文件结束的判定"><a href="#九、文件结束的判定" class="headerlink" title="九、文件结束的判定"></a>九、文件结束的判定</h1><h2 id="1、打印错误的方式"><a href="#1、打印错误的方式" class="headerlink" title="1、打印错误的方式"></a>1、打印错误的方式</h2><h3 id="（1）strerror-函数"><a href="#（1）strerror-函数" class="headerlink" title="（1）strerror 函数"></a>（1）strerror 函数</h3><p>在动态内存分配模块中，我们学习了 strerror 函数，<strong>将错误码对应的错误信息的字符串地址</strong>。</p>
<p>比如这样：<br><strong>例19：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test2.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 打印错误原因</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, strerror(errno));</span><br><span class="line">		<span class="comment">// strerror -&gt; #include&lt;string.h&gt;</span></span><br><span class="line">		<span class="comment">// errno -&gt; #include&lt;errno.h&gt;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>No such file or directory</p>
<p>解析：这里 “test2.txt” 这个文件并不存在，但是我们又用 “r”，想来读取它，之前讲过，这样就会报错，</p>
<h3 id="（2）perror-函数"><a href="#（2）perror-函数" class="headerlink" title="（2）perror 函数"></a>（2）perror 函数</h3><p>今天我们要学习另外一种打印错误的方式 - perror 函数<br>其一般形式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">perror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str)</span></span></span><br></pre></td></tr></table></figure>

<p>perror函数的使用非常简单，它不需要像 strerror 函数一样引用那么多头文件，它包含在 “stdio.h” 中，而且它也不需要传错误码。</p>
<p>perror 函数的输出形式为：</p>
<blockquote>
<p>str：错误原因</p>
</blockquote>
<p>我们来举一个例子：<br><strong>例20：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;test2.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">&quot;File opening failed&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pfRead);</span><br><span class="line">	pfRead = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>File opening failed: No such file or directory</p>
<h2 id="2、feof-函数"><a href="#2、feof-函数" class="headerlink" title="2、feof 函数"></a>2、feof 函数</h2><blockquote>
<p>检测流上的文件结束符，如果文件结束，则返回非0值，否则返回0</p>
</blockquote>
<p>其一般形式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">feof</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="（1）文本文件"><a href="#（1）文本文件" class="headerlink" title="（1）文本文件"></a>（1）文本文件</h3><p>举一个例子<br><strong>例21：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pf == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">&quot;File opening failed&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 读文件</span></span><br><span class="line">	<span class="keyword">int</span> ch;</span><br><span class="line">	<span class="comment">// 注意：int ，非char ，要求处理EOF</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// fgetc 当读取失败的时候或者遇到文件结束的时候，都会返回EOF</span></span><br><span class="line">	<span class="keyword">while</span> ((ch = fgetc(pf)) != EOF) <span class="comment">// 标准C I/O 读取文件循环</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">putchar</span>(ch);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断是什么原因结束的</span></span><br><span class="line">	<span class="keyword">if</span> (ferror(pf))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;I/O error when reading\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (feof(pf))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;End of file reached successfully\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pf);</span><br><span class="line">	pf = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>welcome to xiyou<br>End of file reached successfully</p>
<h3 id="（2）二进制文件"><a href="#（2）二进制文件" class="headerlink" title="（2）二进制文件"></a>（2）二进制文件</h3><p>我们来举一个例子<br><strong>例22：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line">	SIZE = <span class="number">5</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a[SIZE] = &#123; <span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>,<span class="number">5.0</span> &#125;;</span><br><span class="line">	<span class="keyword">double</span> b = <span class="number">0.0</span>;</span><br><span class="line">	<span class="keyword">size_t</span> ret_code = <span class="number">0</span>;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;test.bin&quot;</span>, <span class="string">&quot;wb&quot;</span>); <span class="comment">// wb - 二进制的形式</span></span><br><span class="line">	<span class="keyword">if</span> (pf == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(<span class="string">&quot;File opening failed&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 写 double 的数组</span></span><br><span class="line">	fwrite(a, <span class="keyword">sizeof</span>(*a), SIZE, pf);</span><br><span class="line">	fclose(pf);</span><br><span class="line"></span><br><span class="line">	pf = fopen(<span class="string">&quot;test.bin&quot;</span>, <span class="string">&quot;rb&quot;</span>); <span class="comment">// rb - 二进制的形式</span></span><br><span class="line">	<span class="comment">// 读 double 的数组</span></span><br><span class="line">	<span class="keyword">while</span> ((ret_code = fread(&amp;b, <span class="keyword">sizeof</span>(<span class="keyword">double</span>), <span class="number">1</span>, pf)) &gt;= <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, b);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断是什么原因结束的</span></span><br><span class="line">	<span class="keyword">if</span> (ferror(pf))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Error reading test.bin\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (feof(pf))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Error reading test.bin: unexpected end of file\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭文件</span></span><br><span class="line">	fclose(pf);</span><br><span class="line">	pf = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>1.000000<br>2.000000<br>3.000000<br>4.000000<br>5.000000<br>Error reading test.bin: unexpected end of file</p>
<h3 id="（3）易错点总结"><a href="#（3）易错点总结" class="headerlink" title="（3）易错点总结"></a>（3）易错点总结</h3><p><strong>被错误使用的 feof</strong></p>
<p>注意：在文本读取过程中，不能用 feof 函数的返回值直接用来判断文件是否结束！而是<strong>应用于当文件读取结束的时候，判断是否读取失败结束，还是遇到文件尾结束</strong>。</p>
<blockquote>
<p>①文本文件读取是否结束，判断返回值是否为 EOF（fgetc），或者 NULL        （fgets）<br>例如：<br>Ⅰ. fgetc判断返回值是否为 EOF。<br>Ⅱ. fgets判断返回值是否为 NULL。</p>
</blockquote>
<blockquote>
<p>②二进制文件的读取结束判断，判断返回值是否小于实际要读取的个数。<br>例如：<br>fread 判断返回值是否小于实际要读的个数。</p>
</blockquote>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>关于文件操作的相关知识就到此结束了，这块主要还是概念非常多，需要我们用心去学习，切不可急功近利，需要一步一步的来学习，相信能看到这里的大家也肯定是愿意这样去做的，那我们下一期再见，加油！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3/" data-id="claf3rtin0004bovldstc0y0l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言：学生信息管理系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2022-11-13T06:48:18.117Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>C语言学完了，知识很多，也很琐碎，学生信息管理系统对我们而言，就是一次机会，一次让我们将C语言知识融会贯通的机会，通过编程学生信息管理系统，我们运用了循环、指针，结构体，链表、函数、文件等知识，也能让我们更加熟悉了C语言相关知识。话不多说，直接开始。</p>
<h1 id="一、思路"><a href="#一、思路" class="headerlink" title="一、思路"></a>一、思路</h1><p>学生信息管理系统，说难也难，说简单也简单，对于初学者的我们也算一项不小的挑战了，对于这个系统，它的功能等等很多，所以我们需要有一个大概的思路，来让我们更好的完成它。</p>
<h2 id="1、流程图"><a href="#1、流程图" class="headerlink" title="1、流程图"></a>1、流程图</h2><p><img src="https://img-blog.csdnimg.cn/f09ce8e3e15743f2b70dee423737011d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h2><p>根据这个流程图，我们先做好一个大概的框架，然后再一部分一部分的补全即可。</p>
<h3 id="（1）登录界面"><a href="#（1）登录界面" class="headerlink" title="（1）登录界面"></a>（1）登录界面</h3><p>将学生信息管理系统的功能键选择的提示信息打印出来，就组成了一个简易的登录界面：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             学生成绩管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          1 ---- 增加学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          2 ---- 删除学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          3 ---- 修改学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          4 ---- 查询学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          5 ---- 输出学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          6 ---- 排序学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          0 ---- 退出管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br><img src="https://img-blog.csdnimg.cn/652a5d70a5b44bae829636a3c5836d5f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h3 id="（2）功能框架"><a href="#（2）功能框架" class="headerlink" title="（2）功能框架"></a>（2）功能框架</h3><h4 id="①基本的函数框架"><a href="#①基本的函数框架" class="headerlink" title="①基本的函数框架"></a>①基本的函数框架</h4><p>一共七个功能，为了程序的可读性，我们尽量使用其英语全拼，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		welcome();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 增加学生信息</span></span><br><span class="line">			Add();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 删除学生信息</span></span><br><span class="line">			Delete();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 修改学生信息</span></span><br><span class="line">			Fix();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 查询学生信息</span></span><br><span class="line">			Search();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 输出学生信息</span></span><br><span class="line">			print();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 排序学生信息</span></span><br><span class="line">			Sort();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出管理系统</span></span><br><span class="line">			goodbye();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             学生成绩管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          1 ---- 增加学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          2 ---- 删除学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          3 ---- 修改学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          4 ---- 查询学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          5 ---- 输出学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          6 ---- 排序学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          0 ---- 退出管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br><img src="https://img-blog.csdnimg.cn/9b567d7f6d5f4bb684af334795e8b537.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h4 id="②改进"><a href="#②改进" class="headerlink" title="②改进"></a>②改进</h4><p>对于登录界面，信息会不断输出，所以我们在 welcome（）函数中加入一行代码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system(<span class="string">&quot;cls&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>其对应的头文件为：windows.h<br>功能为：清屏</p>
<p>这样我们的学生信息系统在使用时，就会更加的简洁。</p>
<h1 id="二、分布实现"><a href="#二、分布实现" class="headerlink" title="二、分布实现"></a>二、分布实现</h1><h2 id="1、定义结构体"><a href="#1、定义结构体" class="headerlink" title="1、定义结构体"></a>1、定义结构体</h2><p>我们存储学生信息用到的是<strong>链表</strong>，所以我们首先要<strong>定义结构体</strong>，来创建链表。（信息可以自行定义）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> ID;<span class="comment">// 学号</span></span><br><span class="line">	<span class="keyword">char</span> Name[<span class="number">50</span>];<span class="comment">// 姓名</span></span><br><span class="line">	<span class="keyword">char</span> Sex[<span class="number">10</span>];<span class="comment">// 性别</span></span><br><span class="line">	<span class="keyword">char</span> Class[<span class="number">50</span>];<span class="comment">// 班级</span></span><br><span class="line">	<span class="keyword">char</span> Room[<span class="number">20</span>];<span class="comment">// 宿舍号</span></span><br><span class="line">	<span class="keyword">int</span> Score;<span class="comment">// 成绩</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span><span class="comment">// 指针域</span></span><br><span class="line">&#125;node;</span><br><span class="line"></span><br><span class="line">node <span class="built_in">list</span>;<span class="comment">// 链表</span></span><br></pre></td></tr></table></figure>
<h2 id="2、文件读取"><a href="#2、文件读取" class="headerlink" title="2、文件读取"></a>2、文件读取</h2><p>运用文件的相关知识，我们就可以将之前已经在文件中写的一部分信息，保存在文件中，当我们要读取它们的时候，从文件中读取它们，并将它们放入链表中，不用担心每次打开信息就会丢失的问题。</p>
<p>这里就需要用到<strong>文件的读取</strong>以及<strong>链表的插入</strong>相关的知识点。<br>这里文件的读取，我选择的是 <strong>fscanf （）</strong> 函数，而链表的插入我选择的是<strong>尾插法</strong>。</p>
<p>代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	node* s;</span><br><span class="line">	node* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%d %s %s %s %s %d&quot;</span>, &amp;st.ID, st.Name, st.Sex, st.Class, st.Room, &amp;st.Score) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line"></span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、输出学生信息"><a href="#3、输出学生信息" class="headerlink" title="3、输出学生信息"></a>3、输出学生信息</h2><p>先从简单的部分入手，读取学生信息，我们只需要对链表进行一次遍历即可，注意要判断链表是否为空。</p>
<p>将功能和界面分开做更有利于我们快速完成：</p>
<h3 id="（1）功能实现"><a href="#（1）功能实现" class="headerlink" title="（1）功能实现"></a>（1）功能实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line">	Print_Printf();</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Class, p-&gt;Room, p-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			p = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）输出界面"><a href="#（2）输出界面" class="headerlink" title="（2）输出界面"></a>（2）输出界面</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<p>①<strong>选择输出学生信息</strong><br><img src="https://img-blog.csdnimg.cn/389a91378bcc47a88c5cc45184a39827.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>②<strong>输出界面</strong><br><img src="https://img-blog.csdnimg.cn/367830ce3f35418e8477136a8f4a3361.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="4、增加学生信息"><a href="#4、增加学生信息" class="headerlink" title="4、增加学生信息"></a>4、增加学生信息</h2><p>完成输出函数以后，我们需要继续完成增加函数，由于之前在文件读取中，我们使用了尾插法，为了起到练习的作业，我们现在使用头插法添加学生信息。</p>
<p>我们将功能和界面分开来做：</p>
<h3 id="（1）功能实现-1"><a href="#（1）功能实现-1" class="headerlink" title="（1）功能实现"></a>（1）功能实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	node* p = L;</span><br><span class="line">	node* s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）输出界面-1"><a href="#（2）输出界面-1" class="headerlink" title="（2）输出界面"></a>（2）输出界面</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入新增学生的相关信息：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.ID);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;性别：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Sex);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;班级：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Class);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;宿舍号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Room);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;成绩：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.Score);</span><br><span class="line"></span><br><span class="line">	Add(&amp;<span class="built_in">list</span>, st);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>①<strong>选择添加学生信息</strong><br><img src="https://img-blog.csdnimg.cn/b807fe95ddee4ffa8c91a2cf1ab7aaaf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>②<strong>输出添加学生的相关信息</strong><br><img src="https://img-blog.csdnimg.cn/49a24ffbfe084c3390884c0ed55fbd7b.png" alt="在这里插入图片描述"></p>
<p>③<strong>选择输出学生信息</strong><br><img src="https://img-blog.csdnimg.cn/701a0c3e483148f5b806e870ef96f066.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>④<strong>输出界面</strong><br><img src="https://img-blog.csdnimg.cn/441cff7734354fb8b08070d8dabb7a7d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="5、文件保存"><a href="#5、文件保存" class="headerlink" title="5、文件保存"></a>5、文件保存</h2><p>刚刚我们完成了增加学生信息，尝试过的同学可能已经发现了，当我们关闭程序的时候，我们之前添加的信息并不会保存下来，所以就需要用到了文件来进行信息保存。</p>
<p>代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot; %d %s %s %s %s %d\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Class, p-&gt;Room, p-&gt;Score);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们将这个文件保存的函数放在添加函数的最后：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	node* p = L;</span><br><span class="line">	node* s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们添加的学生信息就可以存放在文件中了。</p>
<h2 id="6、查询学生信息"><a href="#6、查询学生信息" class="headerlink" title="6、查询学生信息"></a>6、查询学生信息</h2><p>同样的，还是将功能和界面分开做，这里的查询功能有两种方式，分别通过学号、姓名查找学生信息，鉴于后边的修改、删除函数同样需要用到查询，所以我们在信息查询完成后会返回其前一个节点的位置。</p>
<h3 id="（1）输出界面"><a href="#（1）输出界面" class="headerlink" title="（1）输出界面"></a>（1）输出界面</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号查询 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照姓名查询 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入查询方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">	node* st;</span><br><span class="line">	<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的学号：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">		st = Search(id, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的姓名：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">		st = Search(name, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）功能实现"><a href="#（2）功能实现" class="headerlink" title="（2）功能实现"></a>（2）功能实现</h3><h4 id="①-按照学号查找"><a href="#①-按照学号查找" class="headerlink" title="① 按照学号查找"></a>① 按照学号查找</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;ID == id)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="②-按照姓名查找"><a href="#②-按照姓名查找" class="headerlink" title="② 按照姓名查找"></a>② 按照姓名查找</h4><p>注意 strcmp 函数需要头文件 string.h</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按姓名进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name,p-&gt;next-&gt;Name))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>①<strong>按照学号查询</strong><br><img src="https://img-blog.csdnimg.cn/fe4759609302456d9aa50f954ed98944.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>②<strong>按照姓名查询</strong><br><img src="https://img-blog.csdnimg.cn/24889bf50ece47049d3907feaca7d181.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="7、修改学生信息"><a href="#7、修改学生信息" class="headerlink" title="7、修改学生信息"></a>7、修改学生信息</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要查找的学生的学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 输出一次所要修改的学生成绩</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改姓名 ---- 1\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改性别 ---- 2\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改班级 ---- 3\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改宿舍号 ---- 4\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改成绩 ---- 5\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要修改的信息：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入姓名：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入性别：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Sex);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入班级：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Class);</span><br><span class="line">			<span class="keyword">break</span>; </span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入宿舍号：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Room);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入成绩：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, st-&gt;Score);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续修改该学生信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改完成后该学生的信息</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br><img src="https://img-blog.csdnimg.cn/5e353f26020446f884f9947046bc2e6f.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/4eb1c75611e44b9ab683ec5e98662915.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="8、删除学生信息"><a href="#8、删除学生信息" class="headerlink" title="8、删除学生信息"></a>8、删除学生信息</h2><p>这里运用到的是链表的删除的相关知识点。</p>
<h3 id="（1）输出界面-1"><a href="#（1）输出界面-1" class="headerlink" title="（1）输出界面"></a>（1）输出界面</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	node* p;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要删除的学生的学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line">	p = st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Delete(p);</span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）功能实现-1"><a href="#（2）功能实现-1" class="headerlink" title="（2）功能实现"></a>（2）功能实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br><img src="https://img-blog.csdnimg.cn/3a6969f59f83476dbb87d4e6684af65e.png" alt="在这里插入图片描述"><br>再次尝试<br><img src="https://img-blog.csdnimg.cn/1720df389ee748a4b3e8cb0ed90e0738.png" alt="在这里插入图片描述"><br>说明删除成功！</p>
<h2 id="9、排序学生信息"><a href="#9、排序学生信息" class="headerlink" title="9、排序学生信息"></a>9、排序学生信息</h2><p>排序这里主要还是注意链表的交换，涉及到数据域的交换与指针域的交换。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号从大到小排序 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号从小到大排序 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照成绩从大到小排序 ---- 3\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照成绩从小到大排序 ---- 4\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择排序方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (node* p = L-&gt;next; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (node* q = p; q != <span class="literal">NULL</span>; q = q-&gt;next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_ID(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_ID(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_Score(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_Score(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 交换数据域</span></span><br><span class="line">				node t = *p;</span><br><span class="line">				*p = *q;</span><br><span class="line">				*q = t;</span><br><span class="line">				<span class="comment">// 处理指针域</span></span><br><span class="line">				t.next = p-&gt;next;</span><br><span class="line">				p-&gt;next = q-&gt;next;</span><br><span class="line">				q-&gt;next = t.next;</span><br><span class="line">				flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学号从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_ID</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.ID &gt; e2.ID;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &gt; e2.Score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学号从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_ID</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.ID &lt; e2.ID;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &lt; e2.Score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：<br>①<strong>学号从大到小：</strong><br><img src="https://img-blog.csdnimg.cn/8fdc70496fc24a04ad853acff57c38fa.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/ba838485bfde4b069daf7d299645524f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>②<strong>学号从小到大：</strong></p>
<p><img src="https://img-blog.csdnimg.cn/8672280e896c4f08819ed31c0cadb942.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/ef1c468fa72f4fcab87be25c4eda9876.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>③<strong>成绩从小到大：</strong><br><img src="https://img-blog.csdnimg.cn/cb1ca493884647aa8dcbdac5f460cf0c.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/fcbbee867535493f8053408752ca7ba0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>④<strong>成绩从小到大：</strong><br><img src="https://img-blog.csdnimg.cn/cfebb27400d3475db9d347a57340b85d.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/d571ef3c2d654d459959b29b258712e4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAV0UtdWJ5dHQ=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="10、退出管理系统"><a href="#10、退出管理系统" class="headerlink" title="10、退出管理系统"></a>10、退出管理系统</h2><p>终于！！！到了最激动人心的时刻了，我们的学生信息管理系统要做完了，万事俱备只欠东风！</p>
<p>注意：exit（0）表示正常运行程序并退出程序。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用学生信息管理系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);<span class="comment">// 结束程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、完整代码"><a href="#三、完整代码" class="headerlink" title="三、完整代码"></a>三、完整代码</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> ID;<span class="comment">// 学号</span></span><br><span class="line">	<span class="keyword">char</span> Name[<span class="number">50</span>];<span class="comment">// 姓名</span></span><br><span class="line">	<span class="keyword">char</span> Sex[<span class="number">10</span>];<span class="comment">// 性别</span></span><br><span class="line">	<span class="keyword">char</span> Class[<span class="number">50</span>];<span class="comment">// 班级</span></span><br><span class="line">	<span class="keyword">char</span> Room[<span class="number">20</span>];<span class="comment">// 宿舍号</span></span><br><span class="line">	<span class="keyword">int</span> Score;<span class="comment">// 成绩</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span><span class="comment">// 指针域</span></span><br><span class="line">&#125;node;</span><br><span class="line"></span><br><span class="line">node <span class="built_in">list</span>;<span class="comment">// 链表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node *L,node e)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node*L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(node *L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span>;<span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span>;<span class="comment">// 按姓名进行查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_ID</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 学号从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Score</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_ID</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 学号从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Score</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 成绩从小到大</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	Read_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		welcome();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 增加学生信息</span></span><br><span class="line">			Add_Printf();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 删除学生信息</span></span><br><span class="line">			Delete_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 修改学生信息</span></span><br><span class="line">			Fix(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 查询学生信息</span></span><br><span class="line">			Search_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 输出学生信息</span></span><br><span class="line">			Print(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 排序学生信息</span></span><br><span class="line">			Sort(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出管理系统</span></span><br><span class="line">			goodbye();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             学生成绩管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          1 ---- 增加学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          2 ---- 删除学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          3 ---- 修改学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          4 ---- 查询学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          5 ---- 输出学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          6 ---- 排序学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          0 ---- 退出管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	node* s;</span><br><span class="line">	node* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%d %s %s %s %s %d&quot;</span>, &amp;st.ID, st.Name, st.Sex, st.Class, st.Room, &amp;st.Score) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line"></span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot; %d %s %s %s %s %d\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Class, p-&gt;Room, p-&gt;Score);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入新增学生的相关信息：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.ID);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;性别：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Sex);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;班级：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Class);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;宿舍号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Room);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;成绩：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.Score);</span><br><span class="line"></span><br><span class="line">	Add(&amp;<span class="built_in">list</span>, st);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	node* p = L;</span><br><span class="line">	node* s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	node* p;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要删除的学生的学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line">	p = st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Delete(p);</span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要修改的学生的学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 输出一次所要修改的学生成绩</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改姓名 ---- 1\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改性别 ---- 2\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改班级 ---- 3\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改宿舍号 ---- 4\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改成绩 ---- 5\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要修改的信息：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入姓名：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入性别：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Sex);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入班级：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Class);</span><br><span class="line">			<span class="keyword">break</span>; </span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入宿舍号：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Room);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入成绩：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, st-&gt;Score);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续修改该学生信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改完成后该学生的信息</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号查询 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照姓名查询 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入查询方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">	node* st;</span><br><span class="line">	<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的学号：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">		st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的姓名：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">		st = Search_name(name, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Class, st-&gt;Room, st-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;ID == id)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按姓名进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name, p-&gt;next-&gt;Name) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line">	Print_Printf();</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d|%s\t|%s\t|%s\t|%s\t|%d\t|\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Class, p-&gt;Room, p-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">			p = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|班级\t\t|宿舍号\t\t|成绩\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号从大到小排序 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照学号从小到大排序 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照成绩从大到小排序 ---- 3\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照成绩从小到大排序 ---- 4\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择排序方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (node* p = L-&gt;next; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (node* q = p; q != <span class="literal">NULL</span>; q = q-&gt;next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_ID(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_ID(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_Score(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_Score(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 交换数据域</span></span><br><span class="line">				node t = *p;</span><br><span class="line">				*p = *q;</span><br><span class="line">				*q = t;</span><br><span class="line">				<span class="comment">// 处理指针域</span></span><br><span class="line">				t.next = p-&gt;next;</span><br><span class="line">				p-&gt;next = q-&gt;next;</span><br><span class="line">				q-&gt;next = t.next;</span><br><span class="line">				flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学号从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_ID</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.ID &gt; e2.ID;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &gt; e2.Score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 学号从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_ID</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.ID &lt; e2.ID;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &lt; e2.Score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用学生信息管理系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);<span class="comment">// 结束程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>到此，学生管理系统的代码部分就结束了，耗时9个小时，代码+博客终于完成了，也算是有了满满的成就感，希望可以帮助到大家。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" data-id="claf3rtka0030bovl8vue5idw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言：程序设计综合训练" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%EF%BC%9A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E8%AE%AD%E7%BB%83/" class="article-date">
  <time datetime="2022-11-13T06:48:18.114Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="综合实验二：学生成绩管理系统"><a href="#综合实验二：学生成绩管理系统" class="headerlink" title="综合实验二：学生成绩管理系统"></a>综合实验二：学生成绩管理系统</h1><h2 id="1、要求"><a href="#1、要求" class="headerlink" title="1、要求"></a>1、要求</h2><p><strong>（一）程序运行时，首先显示主菜单如下：</strong></p>
<ol>
<li>新建数据</li>
<li>添加数据</li>
<li>删除数据</li>
<li>排序</li>
<li>查询</li>
<li>退出</li>
</ol>
<p>屏幕提示：请输入序号选择相应操作。<br>要求当用户输入任一序号后，程序都能进行相应操作。</p>
<p><strong>（二）在主菜单中选择序号4，弹出子菜单选择排序方式，子菜单如下：</strong></p>
<ol>
<li>数学成绩排序</li>
<li>程序设计成绩排序</li>
<li>总分排序。</li>
<li>返回主菜单</li>
</ol>
<p>请按序号选择相应操作。<br>选择子菜单的序号后，程序能正确运行并在屏幕上显示按要求排序后的相关信息。<br><strong>（三）在主菜单中选择序号5，弹出子菜单选择查询方式，子菜单如下：</strong></p>
<ol>
<li>学号查询</li>
<li>姓名查询</li>
<li>数学成绩查询</li>
<li>程序设计成绩查询</li>
<li>总分查询</li>
<li>返回主菜单</li>
</ol>
<p>请按序号选择相应操作。 </p>
<p><strong>在子菜单中选择序号后，程序按以下方式工作：</strong></p>
<blockquote>
<p>1）学号查询：输入学号后，若该学号存在则显示与其相关的所有信息，否则显示找不到的提示信息；（提示：查询到满足条件的结果后，查询即可结束）<br>2）姓名查询：输入姓名后，若该姓名存在则显示与其相关的所有信息，否则显示找不到的提示信息；（提示：使用字符串比较函数进行比较）<br>3）按科目查询：输入指定分数，程序运行后显示该科目中考试成绩大于等于指定分数的同学的学号、姓名以及该科成绩并统计满足条件的人数；<br>4）总分查询：输入指定分数，程序运行后显示总分成绩大于等于指定分数的同学的学号、姓名以及各科成绩并统计满足条件的人数。</p>
</blockquote>
<h2 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> ID;<span class="comment">// 学号</span></span><br><span class="line">	<span class="keyword">char</span> Name[<span class="number">50</span>];<span class="comment">// 姓名</span></span><br><span class="line">	<span class="keyword">int</span> Math;<span class="comment">// 数学成绩</span></span><br><span class="line">	<span class="keyword">int</span> C;<span class="comment">// 程序设计成绩</span></span><br><span class="line">	<span class="keyword">int</span> Score;<span class="comment">// 总分</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span><span class="comment">// 指针域</span></span><br><span class="line">&#125;node;</span><br><span class="line"></span><br><span class="line">node <span class="built_in">list</span>;<span class="comment">// 链表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span>;<span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Math</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 数学成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Math</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 数学成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_C</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 程序设计成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_C</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 程序设计成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Score</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Score</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 成绩从小到大</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span>;<span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span>;<span class="comment">// 按姓名进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_math</span><span class="params">(<span class="keyword">int</span> math, node* L)</span></span>;<span class="comment">// 按数学成绩进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_c</span><span class="params">(<span class="keyword">int</span> c, node* L)</span></span>;<span class="comment">// 按程序设计成绩进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_score</span><span class="params">(<span class="keyword">int</span> score, node* L)</span></span>;<span class="comment">// 按总分进行查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	Read_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		welcome();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 新建学生信息</span></span><br><span class="line">			Build(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 增加学生信息</span></span><br><span class="line">			Add_Printf();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 删除学生信息</span></span><br><span class="line">			Delete_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 排序学生信息</span></span><br><span class="line">			Sort(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 查询学生信息</span></span><br><span class="line">			Search_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 退出管理系统</span></span><br><span class="line">			goodbye();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             学生成绩管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          1 ---- 新建学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          2 ---- 增加学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          3 ---- 删除学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          4 ---- 排序学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          5 ---- 查询学生信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          6 ---- 退出管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	node* s;</span><br><span class="line">	node* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%ld %s %d %d %d&quot;</span>, &amp;st.ID, st.Name, &amp;st.Math, &amp;st.C, &amp;st.Score) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line"></span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Save_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;student_information.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot; %ld %s %d %d %d\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Math, p-&gt;C, p-&gt;Score);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p, * q;</span><br><span class="line">	p = L-&gt;next;</span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		q = p-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(p);</span><br><span class="line">		p = q;</span><br><span class="line">	&#125;</span><br><span class="line">	L-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;新建成功！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入新增学生的相关信息：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%ld&quot;</span>, &amp;st.ID);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;数学成绩：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.Math);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;程序设计成绩：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.C);</span><br><span class="line">	st.Score = st.Math + st.C;</span><br><span class="line"></span><br><span class="line">	Add(&amp;<span class="built_in">list</span>, st);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	node* p = L;</span><br><span class="line">	node* s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	node* p;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要删除的学生的学号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%ld&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line">	p = st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Math, st-&gt;C, st-&gt;Score);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Delete(p);</span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> choice1 = <span class="number">0</span>, choice2 = <span class="number">0</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;按照数学成绩排序     ---- 1\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;按照程序设计成绩排序 ---- 2\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;按照总分排序         ---- 3\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;返回主菜单           ---- 4\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请选择排序方式：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice1);</span><br><span class="line"></span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (choice1 == <span class="number">1</span> || choice1 == <span class="number">2</span> || choice1 == <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;从大到小排序 ---- 1\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;从小到大排序 ---- 2\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请选择排序方式：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice2);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (node* p = L-&gt;next; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (node* q = p; q != <span class="literal">NULL</span>; q = q-&gt;next)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">switch</span> (choice1)</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">					<span class="keyword">if</span> (choice2 == <span class="number">1</span>) </span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_big_Math(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (choice2 == <span class="number">2</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_small_Math(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">					<span class="keyword">if</span> (choice2 == <span class="number">1</span>) </span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_big_C(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (choice2 == <span class="number">2</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_small_C(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">					<span class="keyword">if</span> (choice2 == <span class="number">1</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_big_Score(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (choice2 == <span class="number">2</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span> (!cmp_small_Score(*p, *q))</span><br><span class="line">						&#123;</span><br><span class="line">							flag = <span class="number">1</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// 交换数据域</span></span><br><span class="line">					node t = *p;</span><br><span class="line">					*p = *q;</span><br><span class="line">					*q = t;</span><br><span class="line">					<span class="comment">// 处理指针域</span></span><br><span class="line">					t.next = p-&gt;next;</span><br><span class="line">					p-&gt;next = q-&gt;next;</span><br><span class="line">					q-&gt;next = t.next;</span><br><span class="line">					flag = <span class="number">0</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		Print(L);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续排序该学生信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice1);</span><br><span class="line">		<span class="keyword">if</span> (choice1 == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line">	Print_Printf();</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Math, p-&gt;C, p-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			p = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数学成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Math</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Math &gt; e2.Math;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数学成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Math</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.ID &lt; e2.ID;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 程序设计成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_C</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.C &gt; e2.C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 程序设计成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_C</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.C &lt; e2.C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成绩从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &gt; e2.Score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成绩从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Score</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Score &lt; e2.Score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询学生信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;学号查询         ---- 1\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;姓名查询         ---- 2\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;数学成绩查询     ---- 3\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;程序设计成绩查询 ---- 4\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;总分查询         ---- 5\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;返回主菜单       ---- 6\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入查询方式：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> id, math, c, score;</span><br><span class="line">		<span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">		node* st;</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的学号：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">			st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				st = st-&gt;next;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Math, st-&gt;C, st-&gt;Score);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的姓名：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">			st = Search_name(name, L);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				st = st-&gt;next;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Math, st-&gt;C, st-&gt;Score);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的数学成绩：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;math);</span><br><span class="line"></span><br><span class="line">			Search_math(math, L);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">4</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的程序设计成绩：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;c);</span><br><span class="line"></span><br><span class="line">			Search_c(c, L);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">5</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的总分：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;score);</span><br><span class="line"></span><br><span class="line">			Search_score(score, L);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">6</span>)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续查询该学生信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;ID == id)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按姓名进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name, p-&gt;next-&gt;Name) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按数学成绩进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_math</span><span class="params">(<span class="keyword">int</span> math, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;Math &gt;= math)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!count)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, p-&gt;next-&gt;ID, p-&gt;next-&gt;Name, p-&gt;next-&gt;Math, p-&gt;next-&gt;C, p-&gt;next-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			count++;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (count)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;满足条件的人数:%d\n&quot;</span>, count);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;没有满足条件的人！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按程序设计成绩进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_c</span><span class="params">(<span class="keyword">int</span> c, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;C &gt;= c)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (!count)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, p-&gt;next-&gt;ID, p-&gt;next-&gt;Name, p-&gt;next-&gt;Math, p-&gt;next-&gt;C, p-&gt;next-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			count++;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (count)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;满足条件的人数:%d\n&quot;</span>, count);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;没有满足条件的人！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按总分进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_score</span><span class="params">(<span class="keyword">int</span> score, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;Score &gt;= score)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (!count)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|数学成绩\t|程序设计成绩\t|总分\t|\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%ld|%s\t|%d\t\t|%d\t\t|%d\t|\n&quot;</span>, p-&gt;next-&gt;ID, p-&gt;next-&gt;Name, p-&gt;next-&gt;Math, p-&gt;next-&gt;C, p-&gt;next-&gt;Score);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			count++;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (count)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;满足条件的人数:%d\n&quot;</span>, count);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;没有满足条件的人！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用学生信息管理系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);<span class="comment">// 结束程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="综合实验五-：万年历系统"><a href="#综合实验五-：万年历系统" class="headerlink" title="综合实验五 ：万年历系统"></a>综合实验五 ：万年历系统</h1><h2 id="1、要求-1"><a href="#1、要求-1" class="headerlink" title="1、要求"></a>1、要求</h2><ol>
<li>日期对星期的转换。</li>
<li>输出指定日期N天后的日期。</li>
<li>输出当前日期。</li>
<li>输出指定日期的节假日。</li>
<li>判断指定年是否是闰年还是平年。</li>
</ol>
<h2 id="2、代码-1"><a href="#2、代码-1" class="headerlink" title="2、代码"></a>2、代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> year, month, day;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> d[<span class="number">2</span>][<span class="number">13</span>] = &#123;&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;,&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125; &#125;;</span><br><span class="line"><span class="keyword">int</span> run[<span class="number">12</span>] = &#123; <span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> ping[<span class="number">12</span>] = &#123; <span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span> &#125;;</span><br><span class="line"><span class="keyword">char</span> weekday[<span class="number">7</span>][<span class="number">10</span>] = &#123; <span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>,<span class="string">&quot;星期日&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表头</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 打印星号</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_star</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 平闰年判断</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">leap</span><span class="params">(<span class="keyword">int</span> year)</span></span>;</span><br><span class="line"><span class="comment">// 计算输入的 year 与 1900年有多少天</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">day_sum</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day, <span class="keyword">int</span> run[], <span class="keyword">int</span> ping[])</span></span>;</span><br><span class="line"><span class="comment">// 打印日历</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> sum,<span class="keyword">int</span> year,<span class="keyword">int</span> month)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">week_day</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 判断星期几</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">caculateWeekDay</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// N天后日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ndays</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当前日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">time_now</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 求节假日</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fest</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">festival</span><span class="params">(<span class="keyword">int</span> year1, <span class="keyword">int</span> month1, <span class="keyword">int</span> day1, <span class="keyword">int</span> iWeek)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断平闰</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pingrun</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出万年历系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入当前日期（年、月、日）：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;year, &amp;month, &amp;day);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		welcome();</span><br><span class="line">		<span class="keyword">int</span> sum = day_sum(year, month, day, run, ping);</span><br><span class="line">		print(sum, year, month);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 日期转换</span></span><br><span class="line">			week_day();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// N天后日期</span></span><br><span class="line">			ndays();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 当前日期</span></span><br><span class="line">			time_now();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 求节假日</span></span><br><span class="line">			fest();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 判断平闰</span></span><br><span class="line">			pingrun();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 退出系统</span></span><br><span class="line">			goodbye();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	goodbye();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表头</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	print_star();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********                 万年历系统                  ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ---- 日期转换                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             2 ---- N天后日期                ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             3 ---- 当前日期                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             4 ---- 求节假日                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             5 ---- 判断平闰                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             6 ---- 退出系统                 ***********\n&quot;</span>);</span><br><span class="line">	print_star();</span><br><span class="line">	print_star();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t%s&quot;</span>, weekday[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印星号</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_star</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;*******************************************************************\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 平闰年判断</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">leap</span><span class="params">(<span class="keyword">int</span> year)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> four, hundred, fourhundred;</span><br><span class="line">	four = year % <span class="number">4</span>;</span><br><span class="line">	hundred = year % <span class="number">100</span>;</span><br><span class="line">	fourhundred = year % <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (four == <span class="number">0</span> &amp;&amp; hundred == <span class="number">0</span> &amp;&amp; fourhundred == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (four == <span class="number">0</span> &amp;&amp; hundred != <span class="number">0</span> &amp;&amp; fourhundred != <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算输入的 year 与 1900年有多少天</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">day_sum</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day, <span class="keyword">int</span> run[], <span class="keyword">int</span> ping[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 1900 1 1 ：星期一</span></span><br><span class="line">	<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1900</span>; i &lt;= year + <span class="number">1</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> flag = leap(year);<span class="comment">// 判断平闰年</span></span><br><span class="line">		<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sum += <span class="number">366</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			sum += <span class="number">365</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 加上月份的天数</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; month - <span class="number">1</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (leap(year) == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sum += run[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			sum += ping[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印日历</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> sum, <span class="keyword">int</span> year, <span class="keyword">int</span> month)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> result, temp, i;</span><br><span class="line">	result = sum % <span class="number">7</span>;<span class="comment">// 计算前面空余的天数</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; result; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	temp = <span class="number">7</span> - result;<span class="comment">// 从第几格开始打印1号</span></span><br><span class="line">	<span class="keyword">if</span> (leap(year) == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= run[month - <span class="number">1</span>]; i++)<span class="comment">// 打印31天</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\t%d&quot;</span>, i);</span><br><span class="line">			<span class="keyword">if</span> (i == temp || (i - temp) % <span class="number">7</span> == <span class="number">0</span>)</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= ping[month - <span class="number">1</span>]; i++)<span class="comment">// 打印30天</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;\t%d&quot;</span>, i);</span><br><span class="line">			<span class="keyword">if</span> (i == temp || (i - temp) % <span class="number">7</span> == <span class="number">0</span>)</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	print_star();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">week_day</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> year1, month1, day1, iWeek;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入需要转换的年月日：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;year1, &amp;month1, &amp;day1);</span><br><span class="line">	iWeek = caculateWeekDay(year1, month1, day1);</span><br><span class="line">	<span class="keyword">switch</span> (iWeek)<span class="comment">//iWeek获得返回值</span></span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期一\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期二\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期三\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期四\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">4</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期五\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">5</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期六\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">6</span>: <span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是星期日\n&quot;</span>, year1, month1, day1); <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断星期几</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">caculateWeekDay</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> iWeek;<span class="comment">// 基姆拉尔森计算公式W= (d+2*m+3*(m+1)/5+y+y/4-y/100+y/400)%7</span></span><br><span class="line">	<span class="keyword">if</span> (month == <span class="number">1</span> || month == <span class="number">2</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 1月和2月看作上一年13月和14月</span></span><br><span class="line">		month += <span class="number">12</span>;</span><br><span class="line">		year--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> iWeek = (day + <span class="number">2</span> * month + <span class="number">3</span> * (month + <span class="number">1</span>) / <span class="number">5</span> + year + year / <span class="number">4</span> - year / <span class="number">100</span> + year / <span class="number">400</span>) % <span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// N天后日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ndays</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> year1 = year, month1 = month, day1 = day, n, k;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入天数：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	day1 += n;</span><br><span class="line">	k = month;</span><br><span class="line">	<span class="keyword">for</span> (; day1 &gt; d[leap(year1)][k]; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		day1 -= d[leap(year1)][k];</span><br><span class="line">		<span class="keyword">if</span> (k == <span class="number">12</span>)</span><br><span class="line">			k = <span class="number">0</span>, year1++;</span><br><span class="line">	&#125;</span><br><span class="line">	month1 = k;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;N天后为：%04d年%02d月%02d日\n&quot;</span>, year1, month1, day1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当前日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">time_now</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;现在是%4d年%2d月%2d日！\n&quot;</span>, year, month, day);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 求节假日</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> year1, month1, day1, iWeek;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的日期：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;year1, &amp;month1, &amp;day1);</span><br><span class="line">	iWeek = caculateWeekDay(year1, month1, day1);</span><br><span class="line">	<span class="keyword">if</span> (festival(year1, month1, day1, iWeek))</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日是节假日！\n&quot;</span>, year1, month1, day1);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%4d年%2d月%2d日不是节假日！\n&quot;</span>, year1, month1, day1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">festival</span><span class="params">(<span class="keyword">int</span> year1, <span class="keyword">int</span> month1, <span class="keyword">int</span> day1, <span class="keyword">int</span> iWeek)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &lt;= <span class="number">3</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">4</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &gt;= <span class="number">3</span> &amp;&amp; day1 &lt;= <span class="number">5</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">5</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &lt;= <span class="number">5</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">6</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &gt;= <span class="number">3</span> &amp;&amp; day1 &lt;= <span class="number">5</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">9</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &gt;= <span class="number">10</span> &amp;&amp; day1 &lt;= <span class="number">12</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (month1 == <span class="number">10</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (day1 &lt;= <span class="number">7</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (iWeek &gt;= <span class="number">5</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断平闰</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pingrun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> year1;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要判断的年份：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;year1);</span><br><span class="line">	<span class="keyword">if</span> (leap(year1) == <span class="number">1</span>)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d为闰年！\n&quot;</span>, year1);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d为平年！\n&quot;</span>, year1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出万年历系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用万年历系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);<span class="comment">// 结束程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="综合实验八：职工信息管理系统"><a href="#综合实验八：职工信息管理系统" class="headerlink" title="综合实验八：职工信息管理系统"></a>综合实验八：职工信息管理系统</h1><h2 id="1、要求-2"><a href="#1、要求-2" class="headerlink" title="1、要求"></a>1、要求</h2><p>职工信息包括职工号、姓名、性别、年龄、学历、职务、工资、住址、电话等（职工号不重复）。试设计一职工信息管理系统，使之能提供以下功能：</p>
<ul>
<li>职工信息录入功能(职工信息用文件保存)</li>
<li>职工信息浏览功能</li>
<li>查询或排序功能：(至少一种查询方式)<br>（1）按工资查询<br>（2）按学历查询等</li>
<li>职工信息删除、修改功能</li>
</ul>
<h2 id="2、代码-2"><a href="#2、代码-2" class="headerlink" title="2、代码"></a>2、代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> ID;<span class="comment">// 工号</span></span><br><span class="line">	<span class="keyword">char</span> Name[<span class="number">50</span>];<span class="comment">// 姓名</span></span><br><span class="line">	<span class="keyword">char</span> Sex[<span class="number">10</span>];<span class="comment">// 性别</span></span><br><span class="line">	<span class="keyword">int</span> Age;<span class="comment">// 年龄</span></span><br><span class="line">	<span class="keyword">char</span> Education[<span class="number">20</span>];<span class="comment">// 学历</span></span><br><span class="line">	<span class="keyword">char</span> Post[<span class="number">20</span>];<span class="comment">// 职务</span></span><br><span class="line">	<span class="keyword">int</span> Wage;<span class="comment">// 工资</span></span><br><span class="line">	<span class="keyword">char</span> Room[<span class="number">50</span>];<span class="comment">// 住址</span></span><br><span class="line">	<span class="keyword">char</span> Telephone[<span class="number">20</span>];<span class="comment">// 电话</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span><span class="comment">// 指针域</span></span><br><span class="line">&#125;node;</span><br><span class="line"></span><br><span class="line">node <span class="built_in">list</span>;<span class="comment">// 链表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(node* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span>;<span class="comment">// 界面</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span>;<span class="comment">// 按工号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span>;<span class="comment">// 按姓名进行查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span>;<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span>;<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Wage</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 工资从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Wage</span><span class="params">(node e1, node e2)</span></span>;<span class="comment">// 工资从小到大</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	Read_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		welcome();</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 增加职工信息</span></span><br><span class="line">			Add_Printf();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 删除职工信息</span></span><br><span class="line">			Delete_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 修改职工信息</span></span><br><span class="line">			Fix(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 查询职工信息</span></span><br><span class="line">			Search_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 输出职工信息</span></span><br><span class="line">			Print(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 排序职工信息</span></span><br><span class="line">			Sort(&amp;<span class="built_in">list</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出职工系统</span></span><br><span class="line">			goodbye();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             职工信息管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          1 ---- 增加职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          2 ---- 删除职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          3 ---- 修改职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          4 ---- 查询职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          5 ---- 输出职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          6 ---- 排序职工信息             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********          0 ---- 退出管理系统             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择想要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;worker_information.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	node* s;</span><br><span class="line">	node* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%d %s %s %d %s %s %d %s %s&quot;</span>, &amp;st.ID, st.Name, st.Sex, &amp;st.Age, st.Education, st.Post, &amp;st.Wage, st.Room, st.Telephone) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line"></span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">Save_FILE</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;worker_information.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;%d %s %s %d %s %s %d %s %s\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Age, p-&gt;Education, p-&gt;Post, p-&gt;Wage, p-&gt;Room, p-&gt;Telephone);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node st;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入新增职工的相关信息：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;工号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.ID);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;性别：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Sex);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;年龄：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.Age);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;学历：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Education);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;职务：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Post);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;工资：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.Wage);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;住址：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.Room);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;电话：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;st.Telephone);</span><br><span class="line"></span><br><span class="line">	Add(&amp;<span class="built_in">list</span>, st);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(node* L, node e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	node* p = L;</span><br><span class="line">	node* s = (node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	node* p;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要删除的职工的工号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line">	p = st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Age, st-&gt;Education, st-&gt;Post, st-&gt;Wage, st-&gt;Room, st-&gt;Telephone);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Delete(p);</span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(node* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入要修改的职工的工号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	node* st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 输出一次所要修改的职工信息</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Age, st-&gt;Education, st-&gt;Post, st-&gt;Wage, st-&gt;Room, st-&gt;Telephone);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改姓名 ---- 1\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改性别 ---- 2\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改班级 ---- 3\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改学历 ---- 4\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改职位 ---- 5\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改工资 ---- 6\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改住址 ---- 7\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;修改电话 ---- 8\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要修改的信息：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入姓名：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入性别：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Sex);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入年龄：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, st-&gt;Age);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入学历：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Education);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入职务：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Post);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入工资：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, st-&gt;Wage);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入住址：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Room);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;请输入电话：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;Telephone);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续修改该学生信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改完成后该学生的信息</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Age, st-&gt;Education, st-&gt;Post, st-&gt;Wage, st-&gt;Room, st-&gt;Telephone);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照工号查询 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照姓名查询 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入查询方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">50</span>];</span><br><span class="line">	node* st;</span><br><span class="line">	<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的工号：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">		st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Age, st-&gt;Education, st-&gt;Post, st-&gt;Wage, st-&gt;Room, st-&gt;Telephone);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;请输入要查询的姓名：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">		st = Search_name(name, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, st-&gt;ID, st-&gt;Name, st-&gt;Sex, st-&gt;Age, st-&gt;Education, st-&gt;Post, st-&gt;Wage, st-&gt;Room, st-&gt;Telephone);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按学号进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;ID == id)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按姓名进行查找</span></span><br><span class="line"><span class="function">node* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name, p-&gt;next-&gt;Name) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line">	Print_Printf();</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%d\t|%s\t|%s\t|%d\t|%s\t|%s\t|%d\t|%s\t\t|%s\t|\n&quot;</span>, p-&gt;ID, p-&gt;Name, p-&gt;Sex, p-&gt;Age, p-&gt;Education, p-&gt;Post, p-&gt;Wage, p-&gt;Room, p-&gt;Telephone);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			p = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|学号\t|姓名\t|性别\t|年龄\t|学历\t|职位\t|工资\t|住址\t\t\t|电话\t\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序职工信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(node* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照工资从大到小排序 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照工资从小到大排序 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择排序方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (node* p = L-&gt;next; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (node* q = p; q != <span class="literal">NULL</span>; q = q-&gt;next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_Wage(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_Wage(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// 交换数据域</span></span><br><span class="line">					node t = *p;</span><br><span class="line">					*p = *q;</span><br><span class="line">					*q = t;</span><br><span class="line">					<span class="comment">// 处理指针域</span></span><br><span class="line">					t.next = p-&gt;next;</span><br><span class="line">					p-&gt;next = q-&gt;next;</span><br><span class="line">					q-&gt;next = t.next;</span><br><span class="line">					flag = <span class="number">0</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工资从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_big_Wage</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Wage &gt; e2.Wage;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 工资从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_small_Wage</span><span class="params">(node e1, node e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.Wage &lt; e2.Wage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出管理系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用职工信息管理系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);<span class="comment">// 结束程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%EF%BC%9A%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E8%AE%AD%E7%BB%83/" data-id="claf3rtka002zbovl6arvgqmd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言课设：影院售票管理系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E8%AF%BE%E8%AE%BE%EF%BC%9A%E5%BD%B1%E9%99%A2%E5%94%AE%E7%A5%A8%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2022-11-13T06:48:18.110Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近刚好在写自己的课设，匆匆忙忙写出来的课设系统，仍有不足，拿出来和大家分享一下，希望能对大家有帮助。</p>
<h1 id="一、概要设计"><a href="#一、概要设计" class="headerlink" title="一、概要设计"></a>一、概要设计</h1><h2 id="1、基本信息"><a href="#1、基本信息" class="headerlink" title="1、基本信息"></a>1、基本信息</h2><p>数据类型：链表</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> name[N];          		<span class="comment">// 名称</span></span><br><span class="line">    <span class="keyword">char</span> type[N];          		<span class="comment">// 类型</span></span><br><span class="line">    <span class="keyword">int</span> time;              		<span class="comment">// 时长</span></span><br><span class="line">    <span class="keyword">char</span> day[N];            	<span class="comment">// 日期</span></span><br><span class="line">    <span class="keyword">char</span> start[N];         		<span class="comment">// 起始时间</span></span><br><span class="line">    <span class="keyword">char</span> site[N];           	<span class="comment">// 地点</span></span><br><span class="line">    <span class="keyword">int</span> price;              	<span class="comment">// 价格</span></span><br><span class="line">    <span class="keyword">int</span> num;                	<span class="comment">// 数量</span></span><br><span class="line">    <span class="keyword">int</span> id;                 	<span class="comment">// 编号</span></span><br><span class="line">    <span class="keyword">int</span> seat[N][N];       		<span class="comment">// 座位</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span>* <span class="title">next</span>;</span>       	<span class="comment">// 指针域</span></span><br><span class="line">&#125;NODE;</span><br></pre></td></tr></table></figure>
<p>实现功能：<br><img src="https://img-blog.csdnimg.cn/408a311850dc4cfab1e38ea5f4699d79.png" alt="在这里插入图片描述"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">ticket</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> name[N];           	<span class="comment">// 名称</span></span><br><span class="line">    <span class="keyword">char</span> type[N];           	<span class="comment">// 类型</span></span><br><span class="line">    <span class="keyword">int</span> time;              		<span class="comment">// 时长</span></span><br><span class="line">    <span class="keyword">char</span> day[N];            	<span class="comment">// 日期</span></span><br><span class="line">    <span class="keyword">char</span> start[N];          	<span class="comment">// 起始时间</span></span><br><span class="line">    <span class="keyword">char</span> site[N];           	<span class="comment">// 地点</span></span><br><span class="line">    <span class="keyword">int</span> price;             		<span class="comment">// 价格</span></span><br><span class="line">    <span class="keyword">int</span> id;                   	<span class="comment">// 编号</span></span><br><span class="line">    <span class="keyword">char</span> username[N];        	<span class="comment">// 用户名</span></span><br><span class="line">    <span class="keyword">int</span> x;                		<span class="comment">// 行</span></span><br><span class="line">    <span class="keyword">int</span> y;               	 	<span class="comment">// 列</span></span><br><span class="line">    <span class="keyword">int</span> istake;                	<span class="comment">// 是否取票</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ticket</span>* <span class="title">next</span>;</span>      	<span class="comment">// 指针域</span></span><br><span class="line">&#125;TICKET;</span><br></pre></td></tr></table></figure>
<p>实现功能：<br> <img src="https://img-blog.csdnimg.cn/aff44cb3b5694f978c6e6d9a24307fd1.png" alt="在这里插入图片描述"></p>
<p>开发环境：VS2019</p>
<h2 id="2、功能模块图"><a href="#2、功能模块图" class="headerlink" title="2、功能模块图"></a>2、功能模块图</h2><p><img src="https://img-blog.csdnimg.cn/8837cdc143c949919dcb7bdb1066edf8.png" alt="在这里插入图片描述"></p>
<h2 id="3、功能描述"><a href="#3、功能描述" class="headerlink" title="3、功能描述"></a>3、功能描述</h2><p>（1）管理员<br>①增加影片：新增影片至系统中<br>②显示影片：显示系统中的所有影片信息<br>③查找影片：通过姓名、类型、编号查询影片信息<br>④修改影片：通过编号查询影片，修改影片信息<br>⑤删除影片：通过编号查询影片，删除影片信息<br>⑥排序影片：按照时长、日期、价格、数量排序影片信息<br>（2）用户<br>①购票：排序影片信息，显示影片信息，通过编号查询影片信息，购票后显示票务信息<br>②取票：显示票务信息，选择是否取票<br>③退票：显示票务信息，选择是否退票</p>
<h2 id="4、调用关系图"><a href="#4、调用关系图" class="headerlink" title="4、调用关系图"></a>4、调用关系图</h2><p><img src="https://img-blog.csdnimg.cn/e71f129e3a4c4e83bc856e902760f633.png" alt="在这里插入图片描述"></p>
<h1 id="二、完整代码"><a href="#二、完整代码" class="headerlink" title="二、完整代码"></a>二、完整代码</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;conio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">administrator</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> id[N];								<span class="comment">// 用户名</span></span><br><span class="line">	<span class="keyword">char</span> password[N];						<span class="comment">// 密码</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">administrator</span>* <span class="title">next</span>;</span>				<span class="comment">// 指针域</span></span><br><span class="line">&#125;ADMIN;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">user</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> id[N];								<span class="comment">// 用户名</span></span><br><span class="line">	<span class="keyword">char</span> password[N];						<span class="comment">// 密码</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">user</span>* <span class="title">next</span>;</span>						<span class="comment">// 指针域</span></span><br><span class="line">&#125;USER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[N];				<span class="comment">// 名称</span></span><br><span class="line">	<span class="keyword">char</span> type[N];				<span class="comment">// 类型</span></span><br><span class="line">	<span class="keyword">int</span> time;					<span class="comment">// 时长</span></span><br><span class="line">	<span class="keyword">char</span> day[N];				<span class="comment">// 日期</span></span><br><span class="line">	<span class="keyword">char</span> start[N];				<span class="comment">// 起始时间</span></span><br><span class="line">	<span class="keyword">char</span> site[N];				<span class="comment">// 地点</span></span><br><span class="line">	<span class="keyword">int</span> price;					<span class="comment">// 价格</span></span><br><span class="line">	<span class="keyword">int</span> num;					<span class="comment">// 数量</span></span><br><span class="line">	<span class="keyword">int</span> id;						<span class="comment">// 编号</span></span><br><span class="line">	<span class="keyword">int</span> seat[N][N];				<span class="comment">// 座位</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node</span>* <span class="title">next</span>;</span>			<span class="comment">// 指针域</span></span><br><span class="line">&#125;NODE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">ticket</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[N];				<span class="comment">// 名称</span></span><br><span class="line">	<span class="keyword">char</span> type[N];				<span class="comment">// 类型</span></span><br><span class="line">	<span class="keyword">int</span> time;					<span class="comment">// 时长</span></span><br><span class="line">	<span class="keyword">char</span> day[N];				<span class="comment">// 日期</span></span><br><span class="line">	<span class="keyword">char</span> start[N];				<span class="comment">// 起始时间</span></span><br><span class="line">	<span class="keyword">char</span> site[N];				<span class="comment">// 地点</span></span><br><span class="line">	<span class="keyword">int</span> price;					<span class="comment">// 价格</span></span><br><span class="line">	<span class="keyword">int</span> id;						<span class="comment">// 编号</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> username[N];			<span class="comment">// 用户名</span></span><br><span class="line">	<span class="keyword">int</span> x;						<span class="comment">// 行</span></span><br><span class="line">	<span class="keyword">int</span> y;						<span class="comment">// 列</span></span><br><span class="line">	<span class="keyword">int</span> istake;					<span class="comment">// 是否取票</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">ticket</span>* <span class="title">next</span>;</span>		<span class="comment">// 指针域</span></span><br><span class="line">&#125;TICKET;</span><br><span class="line"></span><br><span class="line">ADMIN a;									<span class="comment">// 管理员信息</span></span><br><span class="line">USER b;										<span class="comment">// 用户信息</span></span><br><span class="line">NODE <span class="built_in">list</span>;									<span class="comment">// 影片信息</span></span><br><span class="line">TICKET c;									<span class="comment">// 购票</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> fusername[N], fpassword[N];			<span class="comment">// 用户名/密码（文件）</span></span><br><span class="line"><span class="keyword">char</span> username[N], password[N];				<span class="comment">// 用户名/密码（输入）</span></span><br><span class="line"><span class="keyword">int</span> flag = <span class="number">0</span>;								<span class="comment">// 判断是否登录成功</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员登录</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_Login_admin</span><span class="params">()</span></span>;					<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_Login_admin</span><span class="params">()</span></span>;						<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">admin_login</span><span class="params">()</span></span>;							<span class="comment">// 登录</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_admin_login</span><span class="params">()</span></span>;						<span class="comment">// 文件读取</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_Login_user</span><span class="params">()</span></span>;						<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_Login_user</span><span class="params">()</span></span>;						<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">user_login</span><span class="params">(USER* L)</span></span>;					<span class="comment">// 登录</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_user</span><span class="params">(USER* L)</span></span>;						<span class="comment">// 用户登录文件读取</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_user_login</span><span class="params">(USER* L)</span></span>;				<span class="comment">// 判断</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">user_logon</span><span class="params">(USER* L)</span></span>;					<span class="comment">// 注册</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add1</span><span class="params">(USER* L, USER e)</span></span>;					<span class="comment">// 插入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(NODE* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Save_FILE</span><span class="params">(NODE* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span>;								<span class="comment">// 主菜单</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_welcome</span><span class="params">()</span></span>;							<span class="comment">// 主菜单功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_administrator</span><span class="params">()</span></span>;					<span class="comment">// 管理员界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_administrator</span><span class="params">()</span></span>;					<span class="comment">// 管理员功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_user</span><span class="params">()</span></span>;							<span class="comment">// 用户界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_user</span><span class="params">()</span></span>;							<span class="comment">// 用户功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(NODE* L, NODE e)</span></span>;					<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span>;							<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(NODE* L)</span></span>;					<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search_allname</span><span class="params">(<span class="keyword">char</span> name[], NODE* L)</span></span>;		<span class="comment">// 按名称进行查找</span></span><br><span class="line"><span class="function">NODE* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], NODE* L)</span></span>;		<span class="comment">// 按名称进行查找第一个</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search_type</span><span class="params">(<span class="keyword">char</span> type[], NODE* L)</span></span>;			<span class="comment">// 按类型进行查找</span></span><br><span class="line"><span class="function">NODE* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, NODE* L)</span></span>;				<span class="comment">// 按编号进行查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(NODE* L)</span></span>;				<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(NODE* s)</span></span>;						<span class="comment">// 功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(NODE* L)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(NODE* L)</span></span>;						<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span>;						<span class="comment">// 界面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(NODE* L)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_time</span><span class="params">(NODE e1, NODE e2)</span></span>;			<span class="comment">// 时长从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_day</span><span class="params">(NODE e1, NODE e2)</span></span>;			<span class="comment">// 日期从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_price</span><span class="params">(NODE e1, NODE e2)</span></span>;		<span class="comment">// 价格从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_num</span><span class="params">(NODE e1, NODE e2)</span></span>;			<span class="comment">// 数量从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_time</span><span class="params">(NODE e1, NODE e2)</span></span>;		<span class="comment">// 时长从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_day</span><span class="params">(NODE e1, NODE e2)</span></span>;		<span class="comment">// 日期从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_price</span><span class="params">(NODE e1, NODE e2)</span></span>;		<span class="comment">// 价格从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_num</span><span class="params">(NODE e1, NODE e2)</span></span>;		<span class="comment">// 数量从小到大</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 购票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Buy_ticket</span><span class="params">()</span></span>;							<span class="comment">// 功能</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Buy_ticket_Printf</span><span class="params">()</span></span>;					<span class="comment">// 界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add2</span><span class="params">(TICKET* L, TICKET e)</span></span>;				<span class="comment">// 保存预定信息</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Save_TICKET</span><span class="params">(TICKET* L)</span></span>;					<span class="comment">// 文件保存售票信息</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_TICKET</span><span class="params">(TICKET* L)</span></span>;					<span class="comment">// 读取售票信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Collect_ticket</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 打印票务信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket</span><span class="params">(TICKET* L)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket_Printf</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Return_ticket</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket1</span><span class="params">(TICKET* L)</span></span>;						<span class="comment">// 打印信息</span></span><br><span class="line"><span class="function">TICKET* <span class="title">Find_ticket</span><span class="params">(TICKET* L, <span class="keyword">char</span> username[])</span></span>;	<span class="comment">// 查找前驱节点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_ticket</span><span class="params">(TICKET* s)</span></span>;						<span class="comment">// 删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Read_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">	Read_TICKET(&amp;c);</span><br><span class="line">	Read_user(&amp;b);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		fun_welcome();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********               影院管理系统               ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ----  管理员               ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             2 ----  用户                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             0 ----  退出                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择你的身份（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主菜单功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_welcome</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	welcome();</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">	<span class="keyword">switch</span> (choice)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 管理员</span></span><br><span class="line">		fun_administrator();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 用户</span></span><br><span class="line">		fun_user();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出</span></span><br><span class="line">		goodbye();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_administrator</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】欢迎%s！！！\n&quot;</span>, username);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********               欢迎！！！                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ----  增加影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             2 ----  显示影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             3 ----  查找影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             4 ----  修改影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             5 ----  删除影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             6 ----  排序影片             ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             0 ----  退出                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择你要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_administrator</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	fun_Login_admin();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			menu_administrator();</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 增加影片</span></span><br><span class="line">				Add_Printf();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 显示影片</span></span><br><span class="line">				Print(&amp;<span class="built_in">list</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 查找影片</span></span><br><span class="line">				Search_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 修改影片</span></span><br><span class="line">				Fix(&amp;<span class="built_in">list</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">5</span>:<span class="comment">// 删除影片</span></span><br><span class="line">				Delete_Printf(&amp;<span class="built_in">list</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">6</span>:<span class="comment">// 排序影片</span></span><br><span class="line">				Sort(&amp;<span class="built_in">list</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出</span></span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (choice != <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (choice != <span class="number">0</span>)</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;输入错误！！！\n&quot;</span>);</span><br><span class="line">				system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】欢迎%s！！！\n&quot;</span>, username);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********              欢迎光临！！                ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ----  购票                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             2 ----  取票                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             3 ----  退票                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             0 ----  退出                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择您要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	fun_Login_user();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			menu_user();</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 购票</span></span><br><span class="line">				Buy_ticket();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 取票</span></span><br><span class="line">				Collect_ticket();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 退票</span></span><br><span class="line">				Return_ticket();</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出</span></span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】是否需要继续操作？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (choice != <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (choice != <span class="number">0</span>)</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;【系统】输入错误！！！\n&quot;</span>);</span><br><span class="line">				system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员登录界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_Login_admin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********               管理员登录                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ----  登录                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             0 ----  退出                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择你要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员登录功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_Login_admin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	menu_Login_admin();</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">	<span class="keyword">switch</span> (choice)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 登录</span></span><br><span class="line">		admin_login();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:<span class="comment">// 退出</span></span><br><span class="line">		flag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员登录</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">admin_login</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入用户名：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, username);</span><br><span class="line">		getchar();</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入密码：&quot;</span>);</span><br><span class="line">		<span class="keyword">char</span> c;</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> ((c = getch()) != <span class="string">&#x27;\r&#x27;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			password[i] = c;</span><br><span class="line">			i++;</span><br><span class="line">			<span class="built_in">putchar</span>(<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		password[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">		cnt++;</span><br><span class="line">	&#125; <span class="keyword">while</span> (Read_admin_login() == <span class="number">0</span> &amp;&amp; cnt &lt; <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员登录文件读取</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_admin_login</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* fp = fopen(<span class="string">&quot;admin.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp, <span class="string">&quot;%s %s&quot;</span>, fusername, fpassword) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fscanf</span>(fp, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> ((<span class="built_in">strcmp</span>(fusername, username) == <span class="number">0</span>) &amp;&amp; (<span class="built_in">strcmp</span>(fpassword, password)) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】登陆成功\n&quot;</span>);</span><br><span class="line">			getch();</span><br><span class="line">			system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">			flag = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】用户名或密码错误，请重新输入\n&quot;</span>);</span><br><span class="line">	getch();</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu_Login_user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********               用户登录                   ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             1 ----  注册                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             2 ----  登录                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***********             0 ----  退出                 ***********\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;****************************************************************\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请选择你要实现的功能（数字）：&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录功能</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun_Login_user</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	menu_Login_user();</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">	<span class="keyword">switch</span> (choice)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		user_logon(&amp;b);</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		user_login(&amp;b);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">		flag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">user_login</span><span class="params">(USER* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入用户名：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, username);</span><br><span class="line">		getchar();</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入密码：&quot;</span>);</span><br><span class="line">		<span class="keyword">char</span> c;</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> ((c = getch()) != <span class="string">&#x27;\r&#x27;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			password[i] = c;</span><br><span class="line">			i++;</span><br><span class="line">			<span class="built_in">putchar</span>(<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		password[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">		cnt++;</span><br><span class="line">	&#125; <span class="keyword">while</span> (Read_user_login(L) == <span class="number">0</span> &amp;&amp; cnt &lt; <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_user</span><span class="params">(USER* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* fp = fopen(<span class="string">&quot;user.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	USER st;</span><br><span class="line">	USER* s = <span class="literal">NULL</span>;</span><br><span class="line">	USER* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(fp, <span class="string">&quot;%s %s&quot;</span>, st.id, st.password) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (USER*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(USER));</span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fclose(fp);	<span class="comment">// 打开文件后记得关闭</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户登录文件读取</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_user_login</span><span class="params">(USER* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	USER* q = L-&gt;next;</span><br><span class="line">	<span class="keyword">while</span> (q != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> ((<span class="built_in">strcmp</span>(q-&gt;id, username) == <span class="number">0</span>) &amp;&amp; (<span class="built_in">strcmp</span>(q-&gt;password, password)) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;登陆成功\n&quot;</span>);</span><br><span class="line">			getch();</span><br><span class="line">			system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">			flag = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		q = q-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】用户名或密码错误，请重新输入\n&quot;</span>);</span><br><span class="line">	getch();</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户注册</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">user_logon</span><span class="params">(USER* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pf = fopen(<span class="string">&quot;user.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pf == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	USER st;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.id);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;请输入密码：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.password);</span><br><span class="line"></span><br><span class="line">	Add1(&amp;b, st);</span><br><span class="line"></span><br><span class="line">	USER* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pf, <span class="string">&quot;%s %s\n&quot;</span>, p-&gt;id, p-&gt;password);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fclose(pf);</span><br><span class="line"></span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;注册成功！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add1</span><span class="params">(USER* L, USER e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	USER* p = L;</span><br><span class="line">	USER* s = (USER*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(USER));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_FILE</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;ticket.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	NODE st;</span><br><span class="line">	NODE* s = <span class="literal">NULL</span>;</span><br><span class="line">	NODE* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%s %s %d %s %s %s %d %d %d&quot;</span>, st.name, st.type, &amp;st.time, st.day, st.start, st.site, &amp;st.price, &amp;st.num, &amp;st.id) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 读取座位表</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">10</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%d &quot;</span>, &amp;st.seat[i][j]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		s = (NODE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NODE));</span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fclose(pfRead);	<span class="comment">// 打开文件后记得关闭</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存文件</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Save_FILE</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;ticket.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	NODE* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;%s %s %d %s %s %s %d %d %d\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;num, p-&gt;id);</span><br><span class="line">		<span class="comment">// 保存座位表</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">10</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;%d &quot;</span>, p-&gt;seat[i][j]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 打开文件后记得关闭</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	NODE st;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入新增影片的相关信息：\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;名称：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.name);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;类型：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.type);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;时长：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.time);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;日期：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.day);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;起始时间：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.start);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;地点：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st.site);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;价格：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.price);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;数量：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.num);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;编号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st.id);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">10</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			st.seat[i][j] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Add(&amp;<span class="built_in">list</span>, st);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(NODE* L, NODE e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	NODE* p = L;</span><br><span class="line">	NODE* s = (NODE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NODE));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_Printf</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	node* p;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要删除的影片的编号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line">	NODE* st = Search_id(id, L);</span><br><span class="line">	p = st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;找不到该影片！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price, st-&gt;num, st-&gt;id);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Delete(p);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(NODE* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NODE* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fix</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要修改的影片的编号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line"></span><br><span class="line">	NODE* st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;无法找到该影片！\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 输出一次所要修改的影片信息</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price, st-&gt;num, st-&gt;id);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改名称     ---- 1\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改类型     ---- 2\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改时长     ---- 3\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改日期     ---- 4\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改起始时间 ---- 5\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改地点     ---- 6\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改价格     ---- 7\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改数量     ---- 8\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t修改编号     ---- 9\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|\t退出         ---- 0\t|\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要修改的信息：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (choice)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入名称：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入类型：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;type);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入时长：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st-&gt;time);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入日期：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;day);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入起始时间：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;start);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入地点：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, st-&gt;site);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入价格：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st-&gt;price);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入数量：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st-&gt;num);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入编号：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;st-&gt;id);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;是否继续修改该影片信息？（Yes：1 / No：0）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改完成后该影片的信息</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price, st-&gt;num, st-&gt;id);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 保存信息</span></span><br><span class="line">	Save_FILE(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Search_Printf</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照名称查询 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照类型查询 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照编号查询 ---- 3\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入查询方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	node* st;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">char</span> name[N];</span><br><span class="line">		<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要查询的影片名称：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line"></span><br><span class="line">		cnt = Search_allname(name, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (cnt == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;无法找到该类型的影片！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">char</span> type[N];</span><br><span class="line">		<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要查询的影片类型：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, type);</span><br><span class="line"></span><br><span class="line">		cnt = Search_type(type, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (cnt == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;无法找到该类型的影片！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入要查询的影片编号：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line"></span><br><span class="line">		st = Search_id(id, L);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;查无此人！\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			st = st-&gt;next;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price, st-&gt;num, st-&gt;id);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按名称进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search_allname</span><span class="params">(<span class="keyword">char</span> name[], NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name, p-&gt;name) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cnt++;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (cnt == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;num, p-&gt;id);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按名称进行查找第一个</span></span><br><span class="line"><span class="function">NODE* <span class="title">Search_name</span><span class="params">(<span class="keyword">char</span> name[], NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NODE* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(name, p-&gt;next-&gt;name) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按编号进行查找</span></span><br><span class="line"><span class="function">NODE* <span class="title">Search_id</span><span class="params">(<span class="keyword">int</span> id, NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	NODE* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (p-&gt;next-&gt;id == id)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按类型进行查找</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Search_type</span><span class="params">(<span class="keyword">char</span> type[], NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	node* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(type, p-&gt;type) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			cnt++;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (cnt == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;num, p-&gt;id);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	node* p = L-&gt;next;</span><br><span class="line">	Print_Printf();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;num, p-&gt;id);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			p = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序影片</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sort</span><span class="params">(NODE* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照时长从大到小排序 ---- 1\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照时长从小到大排序 ---- 2\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照日期从大到小排序 ---- 3\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照日期从小到大排序 ---- 4\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照价格从大到小排序 ---- 5\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照价格从小到大排序 ---- 6\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照数量从大到小排序 ---- 7\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;按照数量从小到大排序 ---- 8\n\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择排序方式：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (node* p = L-&gt;next; p != <span class="literal">NULL</span>; p = p-&gt;next)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (node* q = p; q != <span class="literal">NULL</span>; q = q-&gt;next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">switch</span> (choice)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_time(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_time(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_day(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_day(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_price(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_price(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_big_num(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">				<span class="keyword">if</span> (!cmp_small_num(*p, *q))</span><br><span class="line">				&#123;</span><br><span class="line">					flag = <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 交换数据域</span></span><br><span class="line">				node t = *p;</span><br><span class="line">				*p = *q;</span><br><span class="line">				*q = t;</span><br><span class="line">				<span class="comment">// 处理指针域</span></span><br><span class="line">				t.next = p-&gt;next;</span><br><span class="line">				p-&gt;next = q-&gt;next;</span><br><span class="line">				q-&gt;next = t.next;</span><br><span class="line">				flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】排序成功！\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时长从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_time</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.time &gt; e2.time;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_day</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">strcmp</span>(e1.day, e2.day) &gt;= <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 价格从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_price</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.price &gt; e2.price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数量从大到小</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_big_num</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.num &gt; e2.num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时长从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_time</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.time &lt; e2.time;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_day</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">strcmp</span>(e1.day, e2.day) &lt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 价格从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_price</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.price &lt; e2.price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数量从小到大</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp_small_num</span><span class="params">(NODE e1, NODE e2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> e1.num &lt; e2.num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件保存售票信息</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Save_TICKET</span><span class="params">(TICKET* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfWrite = fopen(<span class="string">&quot;ticket1.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (pfWrite == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	TICKET* p = L-&gt;next;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(pfWrite, <span class="string">&quot;%s %s %d %s %s %s %d %d %s %d %d %d\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;id, p-&gt;username, p-&gt;x, p-&gt;y, p-&gt;istake);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 打开文件后记得关闭</span></span><br><span class="line">	fclose(pfWrite);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取售票信息</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Read_TICKET</span><span class="params">(TICKET* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FILE* pfRead = fopen(<span class="string">&quot;ticket1.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	TICKET st;</span><br><span class="line">	TICKET* s = <span class="literal">NULL</span>;</span><br><span class="line">	TICKET* t = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pfRead == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">fscanf</span>(pfRead, <span class="string">&quot;%s %s %d %s %s %s %d %d %s %d %d %d\n&quot;</span>, st.name, st.type, &amp;st.time, st.day, st.start, st.site, &amp;st.price, &amp;st.id, st.username, &amp;st.x, &amp;st.y, &amp;st.istake) != EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		s = (TICKET*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TICKET));</span><br><span class="line">		*s = st;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 尾插法</span></span><br><span class="line">		t-&gt;next = s;</span><br><span class="line">		t = s;</span><br><span class="line">		t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fclose(pfRead);	<span class="comment">// 打开文件后记得关闭</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 购票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Buy_ticket</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		Sort(&amp;<span class="built_in">list</span>);</span><br><span class="line">		system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		Print(&amp;<span class="built_in">list</span>);</span><br><span class="line">	&#125; <span class="keyword">while</span> (Buy_ticket_Printf() == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Buy_ticket_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TICKET s; <span class="comment">// 记录票务信息</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请输入您要购买的影片的编号：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line"></span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	node* st = Search_id(id, &amp;<span class="built_in">list</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (st == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】无法找到该影片！\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> choice;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择是否要继续购票？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;输入错误\n&quot;</span>);</span><br><span class="line">			system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	st = st-&gt;next;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】该影片的信息如下：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|编号\t |\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|%d\t |\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price, st-&gt;num, st-&gt;id);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】座位示意图如下：(■表示已预定，□表示未预定）\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;    &quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%3d&quot;</span>, i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%4d&quot;</span>, i);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">10</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (st-&gt;seat[i][j] == <span class="number">0</span>)</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot; □&quot;</span>);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot; ■&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择您要购买的数量：&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择您要购买的座位号：\n&quot;</span>);</span><br><span class="line">		<span class="keyword">int</span> x, y;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;行（1-10）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;列（1-10）：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;y);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (st-&gt;seat[x][y] == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			st-&gt;seat[x][y] = <span class="number">1</span>;</span><br><span class="line">			st-&gt;num = st-&gt;num - <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】预定失败，该座位已被预定\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span> choice;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】请选择是否要继续购票？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">0</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;输入错误\n&quot;</span>);</span><br><span class="line">				system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 记录订单信息</span></span><br><span class="line">		<span class="built_in">strcpy</span>(s.name, st-&gt;name);</span><br><span class="line">		<span class="built_in">strcpy</span>(s.type, st-&gt;type);</span><br><span class="line">		s.time = st-&gt;time;</span><br><span class="line">		<span class="built_in">strcpy</span>(s.day, st-&gt;day);</span><br><span class="line">		<span class="built_in">strcpy</span>(s.start, st-&gt;start);</span><br><span class="line">		<span class="built_in">strcpy</span>(s.site, st-&gt;site);</span><br><span class="line">		s.price = st-&gt;price;</span><br><span class="line">		s.id = st-&gt;id;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">strcpy</span>(s.username, username);</span><br><span class="line">		s.x = x;</span><br><span class="line">		s.y = y;</span><br><span class="line">		s.istake = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		Add2(&amp;c, s);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】预定成功\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】您的订单信息如下：\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|数量\t|\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t|\n&quot;</span>, st-&gt;name, st-&gt;type, st-&gt;time, st-&gt;day, st-&gt;start, st-&gt;site, st-&gt;price * a, a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;_________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">	Save_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存预定信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add2</span><span class="params">(TICKET* L, TICKET e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 头插法</span></span><br><span class="line">	TICKET* p = L;</span><br><span class="line">	TICKET* s = (TICKET*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TICKET));</span><br><span class="line">	*s = e;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line"></span><br><span class="line">	Save_TICKET(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Collect_ticket</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	</span><br><span class="line">	Print_ticket(&amp;c);</span><br><span class="line"></span><br><span class="line">	Save_TICKET(&amp;c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket</span><span class="params">(TICKET* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TICKET* p = L-&gt;next;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>, choice = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; <span class="built_in">strcmp</span>(p-&gt;username, username) == <span class="number">0</span> &amp;&amp; p-&gt;istake==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】您的订单如下：\n&quot;</span>);</span><br><span class="line">			Print_ticket_Printf();</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t |%-10s|%d\t|%-5d|\n&quot;</span>, p-&gt;name, p-&gt;type, p-&gt;time, p-&gt;day, p-&gt;start, p-&gt;site, p-&gt;price, p-&gt;id, p-&gt;username, p-&gt;x, p-&gt;y);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;【系统】是否取票？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (choice != <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (choice != <span class="number">0</span>)</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">&quot;【系统】输入错误！！！\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				p-&gt;istake = <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;【系统】取票成功！！！\n&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">			p = p-&gt;next;</span><br><span class="line"></span><br><span class="line">			cnt++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (cnt == <span class="number">0</span>)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】抱歉，您当前无票可取。\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket_Printf</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;|\t名称\t\t|类型\t|时长\t|日期\t\t|起始时间\t|地点\t|价格\t|编号\t |购票人    |行\t|列   |\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退票</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Return_ticket</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;【系统】您的订单如下：\n&quot;</span>);</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	Print_ticket1(&amp;c);</span><br><span class="line"></span><br><span class="line">	Save_TICKET(&amp;c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print_ticket1</span><span class="params">(TICKET* L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TICKET* s = L;</span><br><span class="line">	TICKET* p = <span class="literal">NULL</span>, * q = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>, choice = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		q = Find_ticket(s, username);</span><br><span class="line">		<span class="keyword">if</span> (q == <span class="literal">NULL</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		p = q;</span><br><span class="line">		Print_ticket_Printf();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;|%-15s\t|%s\t|%d\t|%s\t|%s\t\t|%s\t|%d\t|%d\t |%-10s|%d\t|%-5d|\n&quot;</span>, q-&gt;next-&gt;name, q-&gt;next-&gt;type, q-&gt;next-&gt;time, q-&gt;next-&gt;day, q-&gt;next-&gt;start, q-&gt;next-&gt;site, q-&gt;next-&gt;price, q-&gt;next-&gt;id, q-&gt;next-&gt;username, q-&gt;next-&gt;x, q-&gt;next-&gt;y);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;______________________________________________________________________________________________________________________\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】是否退票？（Yes：1 / No：0)：&quot;</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (choice != <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (choice != <span class="number">0</span>)</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;【系统】输入错误！！！\n&quot;</span>);</span><br><span class="line">			q = q-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(choice == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			NODE* r = Search_id(q-&gt;next-&gt;id, &amp;<span class="built_in">list</span>);</span><br><span class="line">			r-&gt;next-&gt;num = r-&gt;next-&gt;num + <span class="number">1</span>;</span><br><span class="line">			r-&gt;next-&gt;seat[q-&gt;next-&gt;x][q-&gt;next-&gt;y] = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d,%d\n&quot;</span>, r-&gt;next-&gt;num, r-&gt;next-&gt;seat[p-&gt;next-&gt;x][p-&gt;next-&gt;y]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			Save_FILE(&amp;<span class="built_in">list</span>);</span><br><span class="line">			Delete_ticket(p);</span><br><span class="line">		&#125;</span><br><span class="line">		system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">		s = q;</span><br><span class="line">		cnt++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (cnt == <span class="number">0</span>)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;【系统】抱歉，您当前无票可退。\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找前驱节点</span></span><br><span class="line"><span class="function">TICKET* <span class="title">Find_ticket</span><span class="params">(TICKET* L, <span class="keyword">char</span> username[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TICKET* p = L;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">strcmp</span>(username, p-&gt;next-&gt;username) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> p;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete_ticket</span><span class="params">(TICKET* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TICKET* t = s-&gt;next;</span><br><span class="line"></span><br><span class="line">	s-&gt;next = t-&gt;next;</span><br><span class="line">	t-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出系统</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goodbye</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;欢迎下次使用影院售票管理系统！&quot;</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>终于写完了课设，耗时蛮久的，不过也算是巩固了一些C语言知识了，嘿嘿，共勉！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/C%E8%AF%AD%E8%A8%80%E8%AF%BE%E8%AE%BE%EF%BC%9A%E5%BD%B1%E9%99%A2%E5%94%AE%E7%A5%A8%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" data-id="claf3rtin0005bovl4aqy83dg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言：L2-005 集合相似度 (25 分)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/11/C%E8%AF%AD%E8%A8%80%EF%BC%9AL2-005%20%E9%9B%86%E5%90%88%E7%9B%B8%E4%BC%BC%E5%BA%A6%20(25%20%E5%88%86)/" class="article-date">
  <time datetime="2022-02-11T02:50:55.742Z" itemprop="datePublished">2022-02-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="一、题目"><a href="#一、题目" class="headerlink" title="一、题目"></a>一、题目</h1><blockquote>
<p>给定两个整数集合，它们的相似度定义为：N<sub>c</sub> /N<sub>t</sub> × 100%。其中N<sub>c</sub> 是两个集合都有的不相等整数的个数，N<sub>t</sub> 是两个集合一共有的不相等整数的个数。你的任务就是计算任意一对给定集合的相似度。</p>
</blockquote>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>输入第一行给出一个正整数N（≤50），是集合的个数。随后N行，每行对应一个集合。每个集合首先给出一个正整数M（≤10^4^），是集合中元素的个数；然后跟M个[0,10^9^]区间内的整数。<br>之后一行给出一个正整数K（≤2000），随后K行，每行对应一对需要计算相似度的集合的编号（集合从1到N编号）。数字间以空格分隔。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>对每一对需要计算的集合，在一行中输出它们的相似度，为保留小数点后2位的百分比数字。</p>
</blockquote>
<p><strong>输入样例：</strong></p>
<blockquote>
<p>3<br>3 99 87 101<br>4 87 101 5 87<br>7 99 101 18 5 135 18 99<br>2<br>1 2<br>1 3</p>
</blockquote>
<p><strong>输出样例：</strong></p>
<blockquote>
<p>50.00%<br>33.33%</p>
</blockquote>
<h1 id="二、方法1"><a href="#二、方法1" class="headerlink" title="二、方法1"></a>二、方法1</h1><h2 id="1、思路"><a href="#1、思路" class="headerlink" title="1、思路"></a>1、思路</h2><h3 id="（1）set"><a href="#（1）set" class="headerlink" title="（1）set"></a>（1）set</h3><p>set 为集合，是一个内部自动有序且不含重复元素的容器，其内部采用“红黑树”实现。</p>
<p>使用方法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;s[<span class="number">55</span>];</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>set的定义方式为：<strong>set&lt; typename &gt; name</strong>，其中typename是任意的基本类型或者STL容器，name是set的名字。</li>
<li>set只能用迭代器访问：（ it 即指针）</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator it = s[a].begin(); it != s[a].end(); it++)&#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="（2）solution"><a href="#（2）solution" class="headerlink" title="（2）solution"></a>（2）solution</h3><p>利用 set 中元素互异性，在输入时去重；</p>
<p>然后根据公式计算：<br> N<sub>t</sub> = 总数 - N<sub>c</sub>；<br> 相似率 = N<sub>c</sub> / N<sub>t</sub> * 100％</p>
<h2 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"><span class="keyword">int</span> num, a, b;</span><br><span class="line"><span class="keyword">int</span> c, t;</span><br><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">double</span> sum;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;s[<span class="number">55</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">            s[i].insert(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        c = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator it = s[a].begin(); it != s[a].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[b].count(*it) == <span class="number">1</span>) </span><br><span class="line">            &#123;</span><br><span class="line">                c++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        t = s[b].size() + s[a].size() - c;</span><br><span class="line">        sum = <span class="number">1.0</span> * c / t * <span class="number">100</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2lf%%\n&quot;</span>, sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/11/C%E8%AF%AD%E8%A8%80%EF%BC%9AL2-005%20%E9%9B%86%E5%90%88%E7%9B%B8%E4%BC%BC%E5%BA%A6%20(25%20%E5%88%86)/" data-id="claf3rtjv002hbovlebdm51r7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-C语言：L2-016 愿天下有情人都是失散多年的兄妹 (25 分)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/11/C%E8%AF%AD%E8%A8%80%EF%BC%9AL2-016%20%E6%84%BF%E5%A4%A9%E4%B8%8B%E6%9C%89%E6%83%85%E4%BA%BA%E9%83%BD%E6%98%AF%E5%A4%B1%E6%95%A3%E5%A4%9A%E5%B9%B4%E7%9A%84%E5%85%84%E5%A6%B9%20(25%20%E5%88%86)/" class="article-date">
  <time datetime="2022-02-10T16:28:01.602Z" itemprop="datePublished">2022-02-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>@<a href="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="一、题目"><a href="#一、题目" class="headerlink" title="一、题目"></a>一、题目</h1><blockquote>
<p>呵呵。大家都知道五服以内不得通婚，即两个人最近的共同祖先如果在五代以内（即本人、父母、祖父母、曾祖父母、高祖父母）则不可通婚。本题就请你帮助一对有情人判断一下，他们究竟是否可以成婚？</p>
</blockquote>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>输入第一行给出一个正整数 <strong>N</strong>（2 ≤ <strong>N</strong> ≤10^4^ ），随后 <strong>N</strong> 行，每行按以下格式给出一个人的信息：<br><strong>本人ID 性别 父亲ID 母亲ID</strong><br>其中 <strong>ID</strong> 是5位数字，每人不同；性别 <strong>M</strong> 代表男性、<strong>F</strong> 代表女性。如果某人的父亲或母亲已经不可考，则相应的 <strong>ID</strong> 位置上标记为-1。<br>接下来给出一个正整数 <strong>K</strong>，随后 <strong>K</strong> 行，每行给出一对有情人的 <strong>ID</strong>，其间以空格分隔。</p>
<p>注意：题目保证两个人是同辈，每人只有一个性别，并且血缘关系网中没有乱伦或隔辈成婚的情况。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>对每一对有情人，判断他们的关系是否可以通婚：如果两人是同性，输出<strong>Never Mind</strong>；如果是异性并且关系出了五服，输出<strong>Yes</strong>；如果异性关系未出五服，输出<strong>No</strong>。</p>
</blockquote>
<p><strong>输入样例：</strong></p>
<blockquote>
<p>24<br>00001 M 01111 -1<br>00002 F 02222 03333<br>00003 M 02222 03333<br>00004 F 04444 03333<br>00005 M 04444 05555<br>00006 F 04444 05555<br>00007 F 06666 07777<br>00008 M 06666 07777<br>00009 M 00001 00002<br>00010 M 00003 00006<br>00011 F 00005 00007<br>00012 F 00008 08888<br>00013 F 00009 00011<br>00014 M 00010 09999<br>00015 M 00010 09999<br>00016 M 10000 00012<br>00017 F -1 00012<br>00018 F 11000 00013<br>00019 F 11100 00018<br>00020 F 00015 11110<br>00021 M 11100 00020<br>00022 M 00016 -1<br>00023 M 10012 00017<br>00024 M 00022 10013<br>9<br>00021 00024<br>00019 00024<br>00011 00012<br>00022 00018<br>00001 00004<br>00013 00016<br>00017 00015<br>00019 00021<br>00010 00011</p>
</blockquote>
<p><strong>输出样例：</strong></p>
<blockquote>
<p>Never Mind<br>Yes<br>Never Mind<br>No<br>Yes<br>No<br>Yes<br>No<br>No</p>
</blockquote>
<h1 id="二、方法1"><a href="#二、方法1" class="headerlink" title="二、方法1"></a>二、方法1</h1><h2 id="1、思路"><a href="#1、思路" class="headerlink" title="1、思路"></a>1、思路</h2><p>看到这种家庭关系第一时间想到的就是<strong>并查集</strong>，然后再根据题意，五代之内不能通婚，很明显想到了<strong>深度优先搜索</strong>。</p>
<p><strong>深度优先搜索：</strong></p>
<ol>
<li>双方同时开始找祖先，如果五代以内不相交，则可以通婚；反之，则不行。</li>
<li>一个人找到五代以内所有祖先，放入一个数组，另一个人再开始一一对比，如果都不一样，则可以通婚；反之，则不行。</li>
</ol>
<p><strong>易错点提示：</strong></p>
<ul>
<li>在定义孩子的父母时记得将父母初始化为-1；</li>
<li>并查集数组也要进行初始化；</li>
<li>并查集的实现中，find 函数如果用 while 循环来实现，最后会超时，所以可以选用递归（只要内存限制不大，递归可以省很多时间）；</li>
</ul>
<h2 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max 100000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> father;                             <span class="comment">// 父亲</span></span><br><span class="line">    <span class="keyword">int</span> mather;                             <span class="comment">// 母亲</span></span><br><span class="line">    <span class="keyword">char</span> sex;                               <span class="comment">// 性别</span></span><br><span class="line">&#125;node;</span><br><span class="line">node a[max];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="keyword">int</span> i, j;                                   <span class="comment">// 遍历</span></span><br><span class="line"><span class="keyword">int</span> id, father, mather;                     <span class="comment">// 孩子，父，母</span></span><br><span class="line"><span class="keyword">char</span> sex;                                   <span class="comment">// 性别</span></span><br><span class="line"><span class="keyword">int</span> x, y;                                   <span class="comment">// 需要判断的两个人</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pre[max];                               <span class="comment">// 并查集数组</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 深度优先搜索</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> age)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %c %d %d&quot;</span>, &amp;id, &amp;sex, &amp;father, &amp;mather);</span><br><span class="line">        <span class="comment">// 存值</span></span><br><span class="line">        a[id].father = father;</span><br><span class="line">        a[id].sex = sex;</span><br><span class="line">        a[id].mather = mather;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将孩子与父母联系起来</span></span><br><span class="line">        Union(id, father);</span><br><span class="line">        Union(id, mather);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 父母的性别</span></span><br><span class="line">        <span class="keyword">if</span> (father != <span class="number">-1</span>)</span><br><span class="line">            a[father].sex = <span class="string">&#x27;M&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (mather != <span class="number">-1</span>)</span><br><span class="line">            a[mather].sex = <span class="string">&#x27;F&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="comment">// 先判断性别</span></span><br><span class="line">        <span class="keyword">if</span> (a[x].sex == a[y].sex)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Never Mind\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 不同祖先</span></span><br><span class="line">            <span class="keyword">if</span> (find(x) != find(y))</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">            <span class="comment">// 相同祖先</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dfs(x, y, <span class="number">1</span>))</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; max; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[i] = i;</span><br><span class="line">        a[i].father = <span class="number">-1</span>;</span><br><span class="line">        a[i].mather = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == pre[x])</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> pre[x] = find(pre[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> f_a = find(a);</span><br><span class="line">    <span class="keyword">int</span> f_b = find(b);</span><br><span class="line">    <span class="keyword">if</span> (f_a != f_b)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[f_a] = f_b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(x != <span class="number">-1</span> &amp;&amp; y != <span class="number">-1</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (age &gt; <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (x == y)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> dfs(a[x].father, a[y].father, age + <span class="number">1</span>) &amp;&amp; dfs(a[x].father, a[y].mather, age + <span class="number">1</span>) &amp;&amp; dfs(a[x].mather, a[y].father, age + <span class="number">1</span>) &amp;&amp; dfs(a[x].mather, a[y].mather, age + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/11/C%E8%AF%AD%E8%A8%80%EF%BC%9AL2-016%20%E6%84%BF%E5%A4%A9%E4%B8%8B%E6%9C%89%E6%83%85%E4%BA%BA%E9%83%BD%E6%98%AF%E5%A4%B1%E6%95%A3%E5%A4%9A%E5%B9%B4%E7%9A%84%E5%85%84%E5%A6%B9%20(25%20%E5%88%86)/" data-id="claf3rtk7002ubovl63mbh6n1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88%E8%AE%B2%E8%A7%A3/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E2%80%94%E2%80%94qsort%E5%87%BD%E6%95%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E7%BB%93%E6%9E%84%E4%BD%93%E8%AF%A6%E8%A7%A3/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E8%AF%A6%E8%A7%A3/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/13/C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>